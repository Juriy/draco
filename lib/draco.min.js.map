{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///draco.min.js","webpack:///webpack/bootstrap fef00140842c47f7324b","webpack:///./src/index.js","webpack:///./src/Animator.js","webpack:///./src/DirtyRectangleManager.js","webpack:///./src/Rect.js","webpack:///./src/Engine.js","webpack:///./src/input/Keyboard.js","webpack:///./src/EventEmitter.js","webpack:///./src/input/TouchInputHandler.js","webpack:///./src/input/InputHandlerBase.js","webpack:///./src/input/MouseInputHandler.js","webpack:///./src/ImageManager.js","webpack:///./src/utils.js","webpack:///./src/GameObject.js","webpack:///./src/GameScene.js","webpack:///./src/MathUtils.js","webpack:///./src/ui/index.js","webpack:///./src/ui/Rectangle.js","webpack:///./src/ui/Shapes.js","webpack:///./src/ui/Sprite.js","webpack:///./src/ui/SpriteSheet.js","webpack:///./src/ui/TileSheet.js","webpack:///./src/ui/map/TileMapOrtho.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","_interopRequireDefault","default","defineProperty","value","ui","dist","isTouchDevice","Rect","MathUtils","ImageManager","GameScene","GameObject","EventEmitter","Engine","DirtyRectangleManager","Animator","undefined","_Animator","_Animator2","_DirtyRectangleManager","_DirtyRectangleManager2","_Engine","_Engine2","_EventEmitter","_EventEmitter2","_GameObject","_GameObject2","_GameScene","_GameScene2","_ImageManager","_ImageManager2","_MathUtils","_MathUtils2","_Rect","_Rect2","_utils","_index","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","protoProps","staticProps","duration","_duration","_repeatCount","_acceleration","_deceleration","_loopsDone","_repeatBehavior","RepeatBehavior","LOOP","_timeSinceLoopStart","_started","_running","_reverseLoop","_throwIfStarted","Error","repeatCount","INFINITE","behavior","REVERSE","acceleration","deceleration","fraction","_accelerationDecelerationPreprocessor","runRate","tdec","pdec","deltaTime","loopsSkipped","Math","floor","_onLoopEnd","_onAnimationEnd","stop","_timingEventPreprocessor","_onUpdate","loopsDone","allDirtyThreshold","arguments","_allDirtyThreshold","_viewport","_dirtyRect","_allDirty","markAllDirty","rect","width","height","intersection","convexHull","copy","x","y","r2","x2","y2","w2","h2","r","min","max","cellW","cellH","cellsInRow","cellsInColumn","rectX","rectY","rectWidth","rectHeight","_Keyboard","_Keyboard2","_TouchInputHandler","_TouchInputHandler2","_MouseInputHandler","_MouseInputHandler2","vpWidth","vpHeight","_canvas","document","getElementById","_ctx","getContext","_scenes","_currentScene","_lastTick","Date","now","_input","_keyboard","_dirtyRects","setViewport","_resourceManager","_tick","bind","_gameContext","resourceManager","resourceData","onDone","load","name","get","_scene","_useScene","init","requestAnimationFrame","dt","fc","input","keyboard","graphContext","dirtyRects","_update","isClean","_draw","resetPressed","update","getDirtyRect","save","beginPath","clip","draw","clear","restore","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_EventEmitter3","Keyboard","element","_this","getPrototypeOf","_element","_stopDomEvents","_keys","_pressed","_onKeyDown","_onKeyUp","attachTo","_detachDomListeners","el","_attachDomListeners","focus","stopDomEvents","code","e","stopPropagation","preventDefault","keyCode","isDown","_stopEventIfRequired","addEventListener","removeEventListener","_listeners","type","listener","push","position","indexOf","splice","event","on","addListener","_get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getter","_InputHandlerBase2","_InputHandlerBase3","TouchInputHandler","_InputHandlerBase","_isDown","_lastInteractionCoordinates","_onDownDomEvent","_onUpDomEvent","_onMoveDomEvent","_getInputCoordinates","emit","moved","_moving","domEvent","InputHandlerBase","_lastMoveCoordinates","_moveThreshold","moveThreshold","coords","deltaX","deltaY","deltaMove","sqrt","targetTouches","pageX","clientX","body","scrollLeft","offsetLeft","pageY","clientY","scrollTop","offsetTop","MouseInputHandler","_mouseDown","_onMouseOut","_onHoverDomEvent","_coords","_imageQueue","_images","path","images","onProgress","noop","queue","im","_addImage","itemCounter","total","_loadItem","queueItem","img","Image","onload","_onItemLoaded","onerror","_placeholder","src","success","documentElement","x1","y1","_x","_y","_width","_height","_id","uid","_name","_anchorX","_anchorY","_rot","_parent","_children","forEach","it","child","setParent","idx","scene","w","h","dx","dy","removeChild","_GameObject3","gameContext","getBoundingRectangle","points","minX","Number","MAX_VALUE","minY","maxX","MIN_VALUE","maxY","epsilon","linesIntersect","p0_x","p0_y","p1_x","p1_y","p2_x","p2_y","p3_x","p3_y","s1_x","s1_y","s2_x","s2_y","s","t","sign","number","pointInsidePolygon","px","py","polygon","rayX","rayY","intersectCount","polyX0","polyY0","polyX1","polyY1","segmentIntersectsPolygon","x0","y0","distance","distanceSquared","distanceFromPointToSegment","pX","pY","segStartX","segStartY","segEndX","segEndY","lengthSquared","distanceFromPointToPolygon","polyPoints","minDist","TileMapOrtho","TileSheet","SpriteSheet","Sprite","Shapes","Rectangle","_Rectangle","_Rectangle2","_Shapes","_Shapes2","_Sprite","_Sprite2","_SpriteSheet","_SpriteSheet2","_TileSheet","_TileSheet2","_TileMapOrtho","_TileMapOrtho2","apply","gc","fillStyle","fillRect","drawMarker","ctx","size","lineWidth","color","strokeStyle","moveTo","lineTo","stroke","drawArrow1","offsetFromCenter","wingLength","wingDepth","angle","translate","rotate","closePath","fill","drawPolygon","fillPolygon","PI","_i","linesOffset","tan","_i2","_img","_isPressed","_clicked","widthOrFraction","drawImage","image","frames","_image","_frames","index","frame","FRAME_X","FRAME_Y","FRAME_WIDTH","FRAME_HEIGHT","FRAME_ANCHOR_X","FRAME_ANCHOR_Y","_w","_h","_row","tx","ty","mapData","tileSize","viewportWidth","viewportHeight","_mapData","_tileSize","_viewportWidth","_viewportHeight","_offCanvas","createElement","_offContext","_offBounds","_offDirty","_resetOffScreenCanvas","_tilesPerRow","_redrawOffscreen","offCanvasX","offCanvasY","offCanvasW","offCanvasH","_updateOffscreenBounds","clearRect","startX","endX","startY","endY","cellY","cellX","tileId","_drawTileAt","srcX","srcY","destX","destY","oldBounds","newBounds","ceil"],"mappings":"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","file":"draco.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"draco\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"draco\"] = factory();\n\telse\n\t\troot[\"draco\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"draco\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"draco\"] = factory();\n\telse\n\t\troot[\"draco\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.ui = exports.dist = exports.isTouchDevice = exports.Rect = exports.MathUtils = exports.ImageManager = exports.GameScene = exports.GameObject = exports.EventEmitter = exports.Engine = exports.DirtyRectangleManager = exports.Animator = undefined;\n\t\n\tvar _Animator = __webpack_require__(1);\n\t\n\tvar _Animator2 = _interopRequireDefault(_Animator);\n\t\n\tvar _DirtyRectangleManager = __webpack_require__(2);\n\t\n\tvar _DirtyRectangleManager2 = _interopRequireDefault(_DirtyRectangleManager);\n\t\n\tvar _Engine = __webpack_require__(4);\n\t\n\tvar _Engine2 = _interopRequireDefault(_Engine);\n\t\n\tvar _EventEmitter = __webpack_require__(6);\n\t\n\tvar _EventEmitter2 = _interopRequireDefault(_EventEmitter);\n\t\n\tvar _GameObject = __webpack_require__(12);\n\t\n\tvar _GameObject2 = _interopRequireDefault(_GameObject);\n\t\n\tvar _GameScene = __webpack_require__(13);\n\t\n\tvar _GameScene2 = _interopRequireDefault(_GameScene);\n\t\n\tvar _ImageManager = __webpack_require__(10);\n\t\n\tvar _ImageManager2 = _interopRequireDefault(_ImageManager);\n\t\n\tvar _MathUtils = __webpack_require__(14);\n\t\n\tvar _MathUtils2 = _interopRequireDefault(_MathUtils);\n\t\n\tvar _Rect = __webpack_require__(3);\n\t\n\tvar _Rect2 = _interopRequireDefault(_Rect);\n\t\n\tvar _utils = __webpack_require__(11);\n\t\n\tvar _index = __webpack_require__(15);\n\t\n\tvar ui = _interopRequireWildcard(_index);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.Animator = _Animator2.default;\n\texports.DirtyRectangleManager = _DirtyRectangleManager2.default;\n\texports.Engine = _Engine2.default;\n\texports.EventEmitter = _EventEmitter2.default;\n\texports.GameObject = _GameObject2.default;\n\texports.GameScene = _GameScene2.default;\n\texports.ImageManager = _ImageManager2.default;\n\texports.MathUtils = _MathUtils2.default;\n\texports.Rect = _Rect2.default;\n\texports.isTouchDevice = _utils.isTouchDevice;\n\texports.dist = _utils.dist;\n\texports.ui = ui;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t/**\r\n\t * This is the base class to support the animation.\r\n\t * @param duration - the duration of the one loop of the animation in milliseconds.\r\n\t * For example, for a 6-frame animation where each frame is staying on the\r\n\t * screen for 50 milliseconds the duration will be 300 milliseconds.\r\n\t *\r\n\t * The constructor accepts the bare minimum of parameters: the rest is set via setters:\r\n\t * setRepeatBehavior and setRepeatCount (see the function docs for the details)\r\n\t *\r\n\t * Animator doesn't handle the timing internally. It should be used with the external\r\n\t * timer. The external timer calls the update() function, passing the number of milliseconds\r\n\t * since the previous call as the parameter.\r\n\t */\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Animator = function () {\n\t\tfunction Animator(duration) {\n\t\t\t_classCallCheck(this, Animator);\n\t\n\t\t\tthis._duration = duration;\n\t\n\t\t\t// total loops to do\n\t\t\tthis._repeatCount = 1;\n\t\n\t\t\t// the fraction to accelerate\n\t\t\tthis._acceleration = 0;\n\t\n\t\t\t// the fraction to decelerate\n\t\t\tthis._deceleration = 0;\n\t\n\t\t\t// How many loops were actually done\n\t\t\tthis._loopsDone = 0;\n\t\n\t\t\t// Default repeat behavior is LOOP\n\t\t\tthis._repeatBehavior = Animator.RepeatBehavior.LOOP;\n\t\n\t\t\t// Time, passed since the start of the loop\n\t\t\tthis._timeSinceLoopStart = 0;\n\t\n\t\t\t// This flag is used to indicate that the animator has already\n\t\t\t// started to work with the certain configuration of parameters (repeatCount, repeat\n\t\t\tthis._started = false;\n\t\t\tthis._running = false;\n\t\n\t\t\t// Flag to mark that this loop is going into the opposite direction\n\t\t\tthis._reverseLoop = false;\n\t\t}\n\t\n\t\t/**\r\n\t  * Starts the animator. After the animator is started you can't\r\n\t  * change its parameters until stop() is called.\r\n\t  */\n\t\n\t\n\t\t_createClass(Animator, [{\n\t\t\tkey: 'start',\n\t\t\tvalue: function start() {\n\t\t\t\tthis._started = true;\n\t\t\t\tthis._running = true;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Checks if animator is currently running\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'isRunning',\n\t\t\tvalue: function isRunning() {\n\t\t\t\treturn this._running;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Stops the animator and resets the internal state. This function\r\n\t   * may be called multiple times.\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'stop',\n\t\t\tvalue: function stop() {\n\t\t\t\tthis._loopsDone = 0;\n\t\t\t\tthis._timeSinceLoopStart = 0;\n\t\t\t\tthis._running = false;\n\t\t\t\tthis._started = false;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'pause',\n\t\n\t\n\t\t\t/**\r\n\t   * Pauses the animator. The animator will ignore the updates while paused, \"freezing\"\r\n\t   * the animation but not resetting its state. The animation can be then resumed\r\n\t   */\n\t\t\tvalue: function pause() {\n\t\t\t\tthis._running = false;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Returns the duration of one loop of the animation\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'getDuration',\n\t\t\tvalue: function getDuration() {\n\t\t\t\treturn this._duration;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Sets the duration of one loop of the animation. Should be value >=1\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'setDuration',\n\t\t\tvalue: function setDuration(duration) {\n\t\t\t\tthis._throwIfStarted();\n\t\t\t\tif (duration < 1) {\n\t\t\t\t\tthrow Error('Duration can\\'t be < 1');\n\t\t\t\t}\n\t\t\t\tthis._duration = duration;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Returns the configured repeat count, default is 1.\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'getRepeatCount',\n\t\t\tvalue: function getRepeatCount() {\n\t\t\t\treturn this._repeatCount;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Set the number of loops in the animation, default is 1. Valid values\r\n\t   * are integers, -1 or Animator.INFINITE for infinite looping\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'setRepeatCount',\n\t\t\tvalue: function setRepeatCount(repeatCount) {\n\t\t\t\tthis._throwIfStarted();\n\t\n\t\t\t\tif (repeatCount < 1 && repeatCount !== Animator.INFINITE) {\n\t\t\t\t\tthrow Error('Repeat count must be greater than 0 or INFINITE');\n\t\t\t\t}\n\t\t\t\tthis._repeatCount = repeatCount;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Returns the configured repeat behavior of the animator. Possible values are\r\n\t   * Animator.RepeatBehavior.LOOP and Animator.RepeatBehavior.REPATE. Read the docs for\r\n\t   * Animator.RepeatBehavior for the details on how they differ.\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'getRepeatBehavior',\n\t\t\tvalue: function getRepeatBehavior() {\n\t\t\t\treturn this._repeatBehavior;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Sets the repeat behavior, default value is Animator.RepeatBehavior.LOOP\r\n\t   * @param behavior the new repat behavior\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'setRepeatBehavior',\n\t\t\tvalue: function setRepeatBehavior(behavior) {\n\t\t\t\tthis._throwIfStarted();\n\t\t\t\tif (behavior !== Animator.RepeatBehavior.LOOP && behavior !== Animator.RepeatBehavior.REVERSE) {\n\t\t\t\t\tthrow Error('Repeat behavior should be either RepeatBehavior.LOOP' + ' or RepeatBehavior.REVERSE');\n\t\t\t\t}\n\t\t\t\tthis._repeatBehavior = behavior;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Returns the current value for the acceleration, default is 0.\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'getAcceleration',\n\t\t\tvalue: function getAcceleration() {\n\t\t\t\treturn this._acceleration;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Sets the value for the acceleration. The value must be between 0 and 1-deceleration.\r\n\t   * @param acceleration new acceleration\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'setAcceleration',\n\t\t\tvalue: function setAcceleration(acceleration) {\n\t\t\t\tthis._throwIfStarted();\n\t\t\t\tif (acceleration < 0 || acceleration > 1 || acceleration > 1 - this._deceleration) {\n\t\t\t\t\tthrow Error('Acceleration value must be from 0 to 1 and ' + 'cannot be greater than (1 - deceleration)');\n\t\t\t\t}\n\t\n\t\t\t\tthis._acceleration = acceleration;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Returns the current value for the deceleration, default is 0.\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'getDeceleration',\n\t\t\tvalue: function getDeceleration() {\n\t\t\t\treturn this._deceleration;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Sets the value for the deceleraion. The value must be between 0 and 1-deceleration.\r\n\t   * @param deceleration new deceleration\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'setDeceleration',\n\t\t\tvalue: function setDeceleration(deceleration) {\n\t\t\t\tthis._throwIfStarted();\n\t\t\t\tif (deceleration < 0 || deceleration > 1 || deceleration > 1 - this._acceleration) {\n\t\t\t\t\tthrow Error('Deceleration value must be from 0 to 1 ' + 'and cannot be greater than (1 - acceleration)');\n\t\t\t\t}\n\t\n\t\t\t\tthis._deceleration = deceleration;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * In the default implementation the preprocessor takes into the account\r\n\t   * only acceleration and deceleration. In more advanced implementation it might\r\n\t   * use easing functions or any other more advanced transformations.\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: '_timingEventPreprocessor',\n\t\t\tvalue: function _timingEventPreprocessor(fraction) {\n\t\t\t\treturn this._accelerationDecelerationPreprocessor(fraction);\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Calculates the fraction with the respect to the acceleration and deceleration values.\r\n\t   * See the SMIL 2.0 specification for details on this calculation. You shouldn't really dive deep\r\n\t   * into the details of this particular piece of code, if you're not very curious.\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: '_accelerationDecelerationPreprocessor',\n\t\t\tvalue: function _accelerationDecelerationPreprocessor(fraction) {\n\t\t\t\tif (this._acceleration || this._deceleration) {\n\t\t\t\t\tvar runRate = 1 / (1 - this._acceleration / 2 - this._deceleration / 2);\n\t\n\t\t\t\t\tif (fraction < this._acceleration) {\n\t\t\t\t\t\tfraction *= runRate * (fraction / this._acceleration) / 2;\n\t\t\t\t\t} else if (fraction > 1 - this._deceleration) {\n\t\t\t\t\t\t// time spent in deceleration portion\n\t\t\t\t\t\tvar tdec = fraction - (1 - this._deceleration);\n\t\t\t\t\t\t// proportion of tdec to total deceleration time\n\t\t\t\t\t\tvar pdec = tdec / this._deceleration;\n\t\n\t\t\t\t\t\tfraction = runRate * (1 - this._acceleration / 2 - this._deceleration + tdec * (2 - pdec) / 2);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfraction = runRate * (fraction - this._acceleration / 2);\n\t\t\t\t\t}\n\t\t\t\t\t// clamp fraction to [0,1] since above calculations may\n\t\t\t\t\t// cause rounding errors\n\t\t\t\t\tif (fraction < 0) {\n\t\t\t\t\t\tfraction = 0;\n\t\t\t\t\t} else if (fraction > 1) {\n\t\t\t\t\t\tfraction = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\treturn fraction;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * This function should be called by the external timer to update the state\r\n\t   * of the animator.\r\n\t   * @param deltaTime - time passed since the last upate. 0 is valid value.\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'update',\n\t\t\tvalue: function update(deltaTime) {\n\t\t\t\t// Will return undefined\n\t\t\t\tif (!this._started) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\n\t\t\t\t// If the animator is paused we pass 0 as deltaTime - like nothing has changed\n\t\t\t\tif (!this._running) {\n\t\t\t\t\tdeltaTime = 0;\n\t\t\t\t}\n\t\n\t\t\t\tthis._timeSinceLoopStart += deltaTime;\n\t\n\t\t\t\t// If we exceeded the loop time, we must take care of what to do next:\n\t\t\t\t// adjust the direction of the animation, call hook functions etc.\n\t\t\t\tif (this._timeSinceLoopStart >= this._duration) {\n\t\n\t\t\t\t\t// Just in case, we skipped more than one loop, determine how many loops did we miss\n\t\t\t\t\tvar loopsSkipped = Math.floor(this._timeSinceLoopStart / this._duration);\n\t\n\t\t\t\t\tthis._timeSinceLoopStart %= this._duration;\n\t\n\t\t\t\t\t// truncate to the number of loops skipped. Even if we skipped 5 loops,\n\t\t\t\t\t// but there was only 3 left, we don't want to fire extra listeners.\n\t\t\t\t\tif (this._repeatCount !== Animator.INFINITE && loopsSkipped > this._repeatCount - this._loopsDone) {\n\t\t\t\t\t\tloopsSkipped = this._repeatCount - this._loopsDone;\n\t\t\t\t\t}\n\t\n\t\t\t\t\t// Call the hook for each of the skipped loops\n\t\t\t\t\tfor (var i = 1; i <= loopsSkipped; i++) {\n\t\t\t\t\t\tthis._loopsDone++;\n\t\t\t\t\t\tthis._reverseLoop = this._repeatBehavior === Animator.RepeatBehavior.REVERSE && this._loopsDone % 2 === 1;\n\t\t\t\t\t\tthis._onLoopEnd(this._loopsDone);\n\t\t\t\t\t}\n\t\n\t\t\t\t\t// Check if we reached the end of the animation\n\t\t\t\t\tif (this._repeatCount !== Animator.INFINITE && this._loopsDone === this._repeatCount) {\n\t\t\t\t\t\tthis._onAnimationEnd();\n\t\t\t\t\t\tthis.stop();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\t// If this is the loop that is going backwards - reverse the fraction as well\n\t\t\t\tvar fraction = this._timeSinceLoopStart / this._duration;\n\t\n\t\t\t\tif (this._reverseLoop) {\n\t\t\t\t\tfraction = 1 - fraction;\n\t\t\t\t}\n\t\n\t\t\t\t// Give away for preprocessing (acceleration/deceleration, easing functions etc)\n\t\t\t\tfraction = this._timingEventPreprocessor(fraction);\n\t\n\t\t\t\t// Call update\n\t\t\t\tthis._onUpdate(fraction, this._loopsDone);\n\t\t\t\treturn fraction;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Hook function. Override in subclass to provide the specific\r\n\t   * implementation of the updates. For example, you may change the\r\n\t   * active frame, adjust the coordinates or color of the object.\r\n\t   *\r\n\t   * @param fraction the current fraction of the animation: from 0 to 1\r\n\t   * @param loopsDone how many loops done already.\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: '_onUpdate',\n\t\t\tvalue: function _onUpdate(fraction, loopsDone) {}\n\t\n\t\t\t/**\r\n\t   * Hook function - called when the loop ends. Should be owerwritten in\r\n\t   * subclasses if you need any extra functionality here.\r\n\t   * @param loopsDone the number of loops done from the start of the animation,\r\n\t   * the latest loop is included.\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: '_onLoopEnd',\n\t\t\tvalue: function _onLoopEnd(loopsDone) {}\n\t\n\t\t\t/**\r\n\t   * Hook function - called when the animation ends to be owerwritten in\r\n\t   * subclasses if you need any extra functionality here.\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: '_onAnimationEnd',\n\t\t\tvalue: function _onAnimationEnd() {}\n\t\n\t\t\t/**\r\n\t   * This function is called to ensure that the animator is not running\r\n\t   * (changing the setting of the running animator is not allowed)\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: '_throwIfStarted',\n\t\t\tvalue: function _throwIfStarted() {\n\t\t\t\tif (this._started) {\n\t\t\t\t\tthrow Error('Cannot change property on the started animator');\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Animator;\n\t}();\n\t\n\t/**\r\n\t * A possible parameter to setLoopCount.\r\n\t */\n\t\n\t\n\texports.default = Animator;\n\tAnimator.INFINITE = -1;\n\t\n\t/**\r\n\t * RepeatBehavior determines what animator does after reaching the end of the loop.\r\n\t * If it is set to Animator.RepeatBehavior.LOOP, then the next loop will start from 0 again,\r\n\t * proceeding to 1. If the behavior is Animator.RepeatBehavior.REVERSE the odd loops will run\r\n\t * backwards - from 1 to 0. Obviously setting this parameter only makes sense when the\r\n\t * number of loops is more than 1.\r\n\t */\n\tAnimator.RepeatBehavior = {\n\t\tLOOP: 1,\n\t\tREVERSE: 2\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Rect = __webpack_require__(3);\n\t\n\tvar _Rect2 = _interopRequireDefault(_Rect);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar DirtyRectangleManager = function () {\n\t\tfunction DirtyRectangleManager() {\n\t\t\tvar allDirtyThreshold = arguments.length <= 0 || arguments[0] === undefined ? 0.5 : arguments[0];\n\t\n\t\t\t_classCallCheck(this, DirtyRectangleManager);\n\t\n\t\t\tthis._allDirtyThreshold = allDirtyThreshold;\n\t\t\tthis._viewport = new _Rect2.default(0, 0, 100, 100);\n\t\t\tthis._dirtyRect = null;\n\t\t\tthis._allDirty = true;\n\t\t\tthis.markAllDirty();\n\t\t}\n\t\n\t\t_createClass(DirtyRectangleManager, [{\n\t\t\tkey: 'clear',\n\t\t\tvalue: function clear() {\n\t\t\t\tthis._dirtyRect = null;\n\t\t\t\tthis._allDirty = false;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'markDirty',\n\t\t\tvalue: function markDirty(rect) {\n\t\t\t\tif (!(rect.width || rect.height) || this._allDirty) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\trect = this._viewport.intersection(rect);\n\t\n\t\t\t\tif (!rect) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tif (this._dirtyRect) {\n\t\t\t\t\tthis._dirtyRect = this._dirtyRect.convexHull(rect);\n\t\t\t\t\tif (this._dirtyRect.width * this._dirtyRect.height > this._allDirtyThreshold * this._viewport.width * this._viewport.height) {\n\t\t\t\t\t\tthis.markAllDirty();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis._dirtyRect = this._viewport.intersection(rect);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'markAllDirty',\n\t\t\tvalue: function markAllDirty() {\n\t\t\t\tthis._allDirty = true;\n\t\t\t\tthis._dirtyRect = this._viewport.copy();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'isClean',\n\t\t\tvalue: function isClean() {\n\t\t\t\treturn !this._dirtyRect;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'isAllDirty',\n\t\t\tvalue: function isAllDirty() {\n\t\t\t\treturn this._allDirty;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getDirtyRect',\n\t\t\tvalue: function getDirtyRect() {\n\t\t\t\treturn this._dirtyRect;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'setViewport',\n\t\t\tvalue: function setViewport(width, height) {\n\t\t\t\tif (this._viewport.width === width && this._viewport.height === height) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._viewport.width = width;\n\t\t\t\tthis._viewport.height = height;\n\t\t\t\tthis.markAllDirty();\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn DirtyRectangleManager;\n\t}();\n\t\n\texports.default = DirtyRectangleManager;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t/**\r\n\t * TODO: refactor-out object destructuring\r\n\t */\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Rect = function () {\n\t\tfunction Rect(x, y, width, height) {\n\t\t\t_classCallCheck(this, Rect);\n\t\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\t\t}\n\t\n\t\t_createClass(Rect, [{\n\t\t\tkey: 'copy',\n\t\t\tvalue: function copy() {\n\t\t\t\treturn new Rect(this.x, this.y, this.width, this.height);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'equals',\n\t\t\tvalue: function equals(r2) {\n\t\t\t\treturn this.x === r2.x && this.y === r2.y && this.width === r2.width && this.height === r2.height;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'toString',\n\t\t\tvalue: function toString() {\n\t\t\t\treturn '[x=' + this.x + ', y=' + this.y + ',' + ('width=' + this.width + ', height=' + this.height + ']');\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'intersects',\n\t\t\tvalue: function intersects(x2, y2, w2, h2) {\n\t\t\t\tif (arguments.length === 1) {\n\t\t\t\t\tvar r = x2;\n\t\n\t\t\t\t\tx2 = r.x;\n\t\t\t\t\ty2 = r.y;\n\t\t\t\t\tw2 = r.width;\n\t\t\t\t\th2 = r.height;\n\t\t\t\t}\n\t\n\t\t\t\treturn this.x <= x2 + w2 && this.x + this.width >= x2 && this.y <= y2 + h2 && this.y + this.height >= y2;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Returns true if the given rect fully covers the other one\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'covers',\n\t\t\tvalue: function covers(x2, y2, w2, h2) {\n\t\t\t\tif (arguments.length === 1) {\n\t\t\t\t\tvar r = x2;\n\t\n\t\t\t\t\tx2 = r.x;\n\t\t\t\t\ty2 = r.y;\n\t\t\t\t\tw2 = r.width;\n\t\t\t\t\th2 = r.height;\n\t\t\t\t}\n\t\n\t\t\t\treturn x2 >= this.x && y2 >= this.y && x2 + w2 <= this.x + this.width && y2 + h2 <= this.y + this.height;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Assumes that neither of rectangles is zero-area\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'convexHull',\n\t\t\tvalue: function convexHull(x2, y2, w2, h2) {\n\t\t\t\tif (arguments.length === 1) {\n\t\t\t\t\tvar r = x2;\n\t\n\t\t\t\t\tx2 = r.x;\n\t\t\t\t\ty2 = r.y;\n\t\t\t\t\tw2 = r.width;\n\t\t\t\t\th2 = r.height;\n\t\t\t\t}\n\t\n\t\t\t\tvar x = Math.min(this.x, x2);\n\t\t\t\tvar y = Math.min(this.y, y2);\n\t\t\t\tvar width = Math.max(this.x + this.width, x2 + w2) - x;\n\t\t\t\tvar height = Math.max(this.y + this.height, y2 + h2) - y;\n\t\n\t\t\t\treturn new Rect(x, y, width, height);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'intersection',\n\t\t\tvalue: function intersection(x2, y2, w2, h2) {\n\t\t\t\tif (arguments.length === 1) {\n\t\t\t\t\tvar r = x2;\n\t\n\t\t\t\t\tx2 = r.x;\n\t\t\t\t\ty2 = r.y;\n\t\t\t\t\tw2 = r.width;\n\t\t\t\t\th2 = r.height;\n\t\t\t\t}\n\t\n\t\t\t\tvar x = Math.max(this.x, x2);\n\t\t\t\tvar y = Math.max(this.y, y2);\n\t\t\t\tvar width = Math.min(this.x + this.width, x2 + w2) - x;\n\t\t\t\tvar height = Math.min(this.y + this.height, y2 + h2) - y;\n\t\n\t\t\t\tif (width <= 0 || height <= 0) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\n\t\t\t\treturn new Rect(x, y, width, height);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'containsPoint',\n\t\t\tvalue: function containsPoint(x, y) {\n\t\t\t\treturn x >= this.x && x < this.x + this.width && y >= this.y && y < this.y + this.height;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Given a rectangular grid, with the grid cell size cellW, cellH test which cells\r\n\t   * are overlapped by the rectangle. cellsInRow and cellsInColumn are used only\r\n\t   * to limit the coordinates (to prevent going out of bounds in arrays for example)\r\n\t   *\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'getOverlappingGridCells',\n\t\t\tvalue: function getOverlappingGridCells(cellW, cellH, cellsInRow, cellsInColumn) {\n\t\t\t\tvar rectX = Math.max(0, Math.floor(this.x / cellW));\n\t\t\t\tvar rectY = Math.max(0, Math.floor(this.y / cellH));\n\t\t\t\tvar rectWidth = Math.min(cellsInRow - rectX, Math.floor((this.x + this.width) / cellW) - rectX + 1);\n\t\t\t\tvar rectHeight = Math.min(cellsInColumn - rectY, Math.floor((this.y + this.height) / cellH) - rectY + 1);\n\t\n\t\t\t\treturn new Rect(rectX, rectY, rectWidth, rectHeight);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Rect;\n\t}();\n\t\n\texports.default = Rect;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Keyboard = __webpack_require__(5);\n\t\n\tvar _Keyboard2 = _interopRequireDefault(_Keyboard);\n\t\n\tvar _TouchInputHandler = __webpack_require__(7);\n\t\n\tvar _TouchInputHandler2 = _interopRequireDefault(_TouchInputHandler);\n\t\n\tvar _MouseInputHandler = __webpack_require__(9);\n\t\n\tvar _MouseInputHandler2 = _interopRequireDefault(_MouseInputHandler);\n\t\n\tvar _DirtyRectangleManager = __webpack_require__(2);\n\t\n\tvar _DirtyRectangleManager2 = _interopRequireDefault(_DirtyRectangleManager);\n\t\n\tvar _ImageManager = __webpack_require__(10);\n\t\n\tvar _ImageManager2 = _interopRequireDefault(_ImageManager);\n\t\n\tvar _utils = __webpack_require__(11);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Engine = function () {\n\t\tfunction Engine(id, vpWidth, vpHeight) {\n\t\t\t_classCallCheck(this, Engine);\n\t\n\t\t\tthis._canvas = document.getElementById(id);\n\t\t\tthis._ctx = this._canvas.getContext('2d');\n\t\t\tthis._scenes = {};\n\t\t\tthis._currentScene = null;\n\t\t\tthis._lastTick = Date.now();\n\t\t\tthis._input = (0, _utils.isTouchDevice)() ? _TouchInputHandler2.default : _MouseInputHandler2.default;\n\t\t\tthis._keyboard = new _Keyboard2.default(this._canvas);\n\t\n\t\t\tthis._dirtyRects = new _DirtyRectangleManager2.default();\n\t\t\tthis._dirtyRects.setViewport(vpWidth, vpHeight);\n\t\t\tthis._resourceManager = new _ImageManager2.default();\n\t\t\tthis._tick = this._tick.bind(this);\n\t\n\t\t\tthis._gameContext = {\n\t\t\t\tresourceManager: this._resourceManager,\n\t\t\t\twidth: this._canvas.width,\n\t\t\t\theight: this._canvas.height\n\t\t\t};\n\t\t}\n\t\n\t\t_createClass(Engine, [{\n\t\t\tkey: 'loadResources',\n\t\t\tvalue: function loadResources(resourceData, onDone) {\n\t\t\t\tthis._resourceManager.load(resourceData, onDone, function onProgress() {});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getResource',\n\t\t\tvalue: function getResource(name) {\n\t\t\t\treturn this._resourceManager.get(name);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'scene',\n\t\t\tvalue: function scene(id, _scene) {\n\t\t\t\tif (_scene === undefined) {\n\t\t\t\t\tthis._useScene(id);\n\t\t\t\t} else {\n\t\t\t\t\t_scene.init(this._gameContext);\n\t\t\t\t\tthis._scenes[id] = _scene;\n\t\t\t\t\tif (!this._currentScene) {\n\t\t\t\t\t\tthis._useScene(id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'start',\n\t\t\tvalue: function start() {\n\t\t\t\tthis._lastTick = Date.now();\n\t\t\t\tthis._tick();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_tick',\n\t\t\tvalue: function _tick() {\n\t\t\t\trequestAnimationFrame(this._tick);\n\t\n\t\t\t\t// delta time\n\t\t\t\tvar dt = Date.now() - this._lastTick;\n\t\n\t\t\t\tthis._lastTick = Date.now();\n\t\n\t\t\t\t// frame context\n\t\t\t\tvar fc = {\n\t\t\t\t\tdt: dt,\n\t\t\t\t\tinput: this._input,\n\t\t\t\t\tkeyboard: this._keyboard,\n\t\t\t\t\tgraphContext: this._ctx,\n\t\t\t\t\twidth: this._canvas.width,\n\t\t\t\t\theight: this._canvas.height,\n\t\t\t\t\tdirtyRects: this._dirtyRects\n\t\t\t\t};\n\t\n\t\t\t\tif (!this._currentScene) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tthis._update(fc);\n\t\n\t\t\t\tif (!this._dirtyRects.isClean()) {\n\t\t\t\t\tthis._draw(fc);\n\t\t\t\t}\n\t\n\t\t\t\tthis._keyboard.resetPressed();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_update',\n\t\t\tvalue: function _update(fc) {\n\t\t\t\tthis._currentScene.update(fc);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_draw',\n\t\t\tvalue: function _draw(fc) {\n\t\t\t\tvar rect = this._dirtyRects.getDirtyRect();\n\t\n\t\t\t\tthis._ctx.save();\n\t\t\t\tthis._ctx.beginPath();\n\t\t\t\tthis._ctx.rect(rect.x, rect.y, rect.width, rect.height);\n\t\t\t\tthis._ctx.clip();\n\t\t\t\tthis._currentScene.draw(fc);\n\t\t\t\tthis._dirtyRects.clear();\n\t\t\t\tthis._ctx.restore();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_useScene',\n\t\t\tvalue: function _useScene(id) {\n\t\t\t\tthis._currentScene = this._scenes[id];\n\t\t\t\tthis._dirtyRects.markAllDirty();\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Engine;\n\t}();\n\t\n\texports.default = Engine;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _EventEmitter2 = __webpack_require__(6);\n\t\n\tvar _EventEmitter3 = _interopRequireDefault(_EventEmitter2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Keyboard = function (_EventEmitter) {\n\t\t_inherits(Keyboard, _EventEmitter);\n\t\n\t\tfunction Keyboard(element) {\n\t\t\t_classCallCheck(this, Keyboard);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Keyboard).call(this));\n\t\n\t\t\t_this._element = null;\n\t\t\t_this._stopDomEvents = true;\n\t\t\t_this._keys = [];\n\t\t\t_this._pressed = [];\n\t\n\t\t\t_this._onKeyDown = _this._onKeyDown.bind(_this);\n\t\t\t_this._onKeyUp = _this._onKeyUp.bind(_this);\n\t\n\t\t\t_this.attachTo(element);\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(Keyboard, [{\n\t\t\tkey: 'detach',\n\t\t\tvalue: function detach() {\n\t\t\t\tif (this._element) {\n\t\t\t\t\tthis._detachDomListeners();\n\t\t\t\t\tthis._element = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'attachTo',\n\t\t\tvalue: function attachTo(el) {\n\t\t\t\tif (this._element) {\n\t\t\t\t\tthis._detachDomListeners();\n\t\t\t\t}\n\t\n\t\t\t\tthis._element = el;\n\t\t\t\tif (el) {\n\t\t\t\t\tthis._attachDomListeners();\n\t\t\t\t}\n\t\t\t\tel.focus();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getStopDomEvents',\n\t\t\tvalue: function getStopDomEvents() {\n\t\t\t\treturn this._stopDomEvents;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'setStopDomEvents',\n\t\t\tvalue: function setStopDomEvents(stopDomEvents) {\n\t\t\t\tthis._stopDomEvents = stopDomEvents;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'isDown',\n\t\t\tvalue: function isDown(code) {\n\t\t\t\treturn this._keys[code];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'isPressed',\n\t\t\tvalue: function isPressed(code) {\n\t\t\t\treturn this._pressed[code];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'resetPressed',\n\t\t\tvalue: function resetPressed() {\n\t\t\t\tthis._pressed = [];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_stopEventIfRequired',\n\t\t\tvalue: function _stopEventIfRequired(e) {\n\t\t\t\tif (this._stopDomEvents) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_onKeyDown',\n\t\t\tvalue: function _onKeyDown(e) {\n\t\t\t\tthis._pressed[e.keyCode] = !this.isDown(e.keyCode);\n\t\t\t\tthis._keys[e.keyCode] = true;\n\t\t\t\tthis._stopEventIfRequired(e);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_onKeyUp',\n\t\t\tvalue: function _onKeyUp(e) {\n\t\t\t\tthis._keys[e.keyCode] = false;\n\t\t\t\tthis._pressed[e.keyCode] = false;\n\t\t\t\tthis._stopEventIfRequired(e);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Attach the listeners to the mouseXXX DOM events\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: '_attachDomListeners',\n\t\t\tvalue: function _attachDomListeners() {\n\t\t\t\tvar el = this._element;\n\t\n\t\t\t\tel.addEventListener('keydown', this._onKeyDown, false);\n\t\t\t\tel.addEventListener('keyup', this._onKeyUp, false);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Attach the listeners to the mouseXXX DOM events\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: '_detachDomListeners',\n\t\t\tvalue: function _detachDomListeners() {\n\t\t\t\tvar el = this._element;\n\t\n\t\t\t\tel.removeEventListener('keydown', this._onKeyDown, false);\n\t\t\t\tel.removeEventListener('keyup', this._onKeyUp, false);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Keyboard;\n\t}(_EventEmitter3.default);\n\t\n\texports.default = Keyboard;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar EventEmitter = function () {\n\t\tfunction EventEmitter() {\n\t\t\t_classCallCheck(this, EventEmitter);\n\t\n\t\t\tthis._listeners = {};\n\t\t}\n\t\n\t\t_createClass(EventEmitter, [{\n\t\t\tkey: 'addListener',\n\t\t\tvalue: function addListener(type, listener) {\n\t\t\t\tif (typeof listener !== 'function') {\n\t\t\t\t\tthrow Error('Listener must be a function');\n\t\t\t\t}\n\t\n\t\t\t\tif (!this._listeners[type]) {\n\t\t\t\t\tthis._listeners[type] = [];\n\t\t\t\t}\n\t\n\t\t\t\tthis._listeners[type].push(listener);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'removeListener',\n\t\t\tvalue: function removeListener(type, listener) {\n\t\t\t\tif (typeof listener !== 'function') {\n\t\t\t\t\tthrow Error('Listener must be a function');\n\t\t\t\t}\n\t\n\t\t\t\tif (!this._listeners[type]) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tvar position = this._listeners[type].indexOf(listener);\n\t\n\t\t\t\tif (position !== -1) {\n\t\t\t\t\tthis._listeners[type].splice(position, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'removeAllListeners',\n\t\t\tvalue: function removeAllListeners(type) {\n\t\t\t\tif (type) {\n\t\t\t\t\tthis._listeners[type] = [];\n\t\t\t\t} else {\n\t\t\t\t\tthis._listeners = {};\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'emit',\n\t\t\tvalue: function emit(type, event) {\n\t\t\t\tif (!(this._listeners[type] && this._listeners[type].length)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tfor (var i = 0; i < this._listeners[type].length; i++) {\n\t\t\t\t\tthis._listeners[type][i].call(this, event);\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn EventEmitter;\n\t}();\n\t\n\texports.default = EventEmitter;\n\t\n\t\n\tEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/**\n\t * The implementation of the InputHandler for the touch interfaces.\n\t * Based on the touch events.\n\t */\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _InputHandlerBase2 = __webpack_require__(8);\n\t\n\tvar _InputHandlerBase3 = _interopRequireDefault(_InputHandlerBase2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar TouchInputHandler = function (_InputHandlerBase) {\n\t\t_inherits(TouchInputHandler, _InputHandlerBase);\n\t\n\t\tfunction TouchInputHandler(element) {\n\t\t\t_classCallCheck(this, TouchInputHandler);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(TouchInputHandler).call(this, element));\n\t\n\t\t\t_this._isDown = false;\n\t\t\t_this._lastInteractionCoordinates = {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0\n\t\t\t};\n\t\t\t_this._onDownDomEvent = _this._onDownDomEvent.bind(_this);\n\t\t\t_this._onUpDomEvent = _this._onUpDomEvent.bind(_this);\n\t\t\t_this._onMoveDomEvent = _this._onMoveDomEvent.bind(_this);\n\t\t\t_this.attachTo(element);\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(TouchInputHandler, [{\n\t\t\tkey: 'isDown',\n\t\t\tvalue: function isDown() {\n\t\t\t\treturn this._isDown;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getCoordinates',\n\t\t\tvalue: function getCoordinates() {\n\t\t\t\treturn this._lastInteractionCoordinates;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_attachDomListeners',\n\t\t\tvalue: function _attachDomListeners() {\n\t\t\t\tvar el = this._element;\n\t\n\t\t\t\tel.addEventListener('touchstart', this._onDownDomEvent, false);\n\t\t\t\tel.addEventListener('touchend', this._onUpDomEvent, false);\n\t\t\t\tel.addEventListener('touchcancel', this._onUpDomEvent, false);\n\t\t\t\tel.addEventListener('touchmove', this._onMoveDomEvent, false);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_detachDomListeners',\n\t\t\tvalue: function _detachDomListeners() {\n\t\t\t\tvar el = this._element;\n\t\n\t\t\t\tel.removeEventListener('touchstart', this._onDownDomEvent, false);\n\t\t\t\tel.removeEventListener('touchend', this._onUpDomEvent, false);\n\t\t\t\tel.removeEventListener('touchcancel', this._onUpDomEvent, false);\n\t\t\t\tel.removeEventListener('touchmove', this._onMoveDomEvent, false);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_onDownDomEvent',\n\t\t\tvalue: function _onDownDomEvent(e) {\n\t\t\t\tthis._lastInteractionCoordinates = this._getInputCoordinates(e);\n\t\t\t\tthis._isDown = true;\n\t\t\t\t_get(Object.getPrototypeOf(TouchInputHandler.prototype), '_onDownDomEvent', this).call(this, e);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_onUpDomEvent',\n\t\t\tvalue: function _onUpDomEvent(e) {\n\t\t\t\tthis.emit('up', {\n\t\t\t\t\tx: this._lastInteractionCoordinates.x,\n\t\t\t\t\ty: this._lastInteractionCoordinates.y,\n\t\t\t\t\tmoved: this._moving,\n\t\t\t\t\tdomEvent: e\n\t\t\t\t});\n\t\t\t\tthis._stopEventIfRequired(e);\n\t\t\t\tthis._isDown = false;\n\t\t\t\tthis._moving = false;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_onMoveDomEvent',\n\t\t\tvalue: function _onMoveDomEvent(e) {\n\t\t\t\tthis._lastInteractionCoordinates = this._getInputCoordinates(e);\n\t\t\t\t_get(Object.getPrototypeOf(TouchInputHandler.prototype), '_onMoveDomEvent', this).call(this, e);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn TouchInputHandler;\n\t}(_InputHandlerBase3.default);\n\t\n\texports.default = TouchInputHandler;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _EventEmitter2 = __webpack_require__(6);\n\t\n\tvar _EventEmitter3 = _interopRequireDefault(_EventEmitter2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * The \"abstract\" base for MouseInputHandler and TouchInputHandler. This class is not\n\t * supposed to be instantiated directly. It provides the common base for touch and\n\t * mouse input handling.\n\t *\n\t * @param element the DOM element to work with - concrete input handlers will\n\t * register as event handlers of this element. In gamedev projects the\n\t * element is usually the main canvas\n\t */\n\t\n\tvar InputHandlerBase = function (_EventEmitter) {\n\t\t_inherits(InputHandlerBase, _EventEmitter);\n\t\n\t\tfunction InputHandlerBase(element) {\n\t\t\t_classCallCheck(this, InputHandlerBase);\n\t\n\t\t\t// The DOM element, descendants will set this in attach()\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(InputHandlerBase).call(this));\n\t\n\t\t\t_this._element = null;\n\t\t\t_this._moving = false;\n\t\t\t_this._lastMoveCoordinates = null;\n\t\t\t_this._moveThreshold = 10;\n\t\t\t_this._stopDomEvents = false;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(InputHandlerBase, [{\n\t\t\tkey: 'detach',\n\t\t\tvalue: function detach() {\n\t\t\t\tif (this._element) {\n\t\t\t\t\tthis._detachDomListeners();\n\t\t\t\t\tthis._element = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'attachTo',\n\t\t\tvalue: function attachTo(el) {\n\t\t\t\tif (this._element) {\n\t\t\t\t\tthis._detachDomListeners();\n\t\t\t\t}\n\t\n\t\t\t\tthis._element = el;\n\t\t\t\tif (el) {\n\t\t\t\t\tthis._attachDomListeners();\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getMoveThreshold',\n\t\t\tvalue: function getMoveThreshold() {\n\t\t\t\treturn this._moveThreshold;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'setMoveThreshold',\n\t\t\tvalue: function setMoveThreshold(moveThreshold) {\n\t\t\t\tthis._moveThreshold = moveThreshold;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getStopDomEvents',\n\t\t\tvalue: function getStopDomEvents() {\n\t\t\t\treturn this._stopDomEvents;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'setStopDomEvents',\n\t\t\tvalue: function setStopDomEvents(stopDomEvents) {\n\t\t\t\tthis._stopDomEvents = stopDomEvents;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Listens to the \"down\" DOM events: mousedown and touchstart.\n\t   * @param e DOM Event\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: '_onDownDomEvent',\n\t\t\tvalue: function _onDownDomEvent(e) {\n\t\t\t\t// We must save this coordinates to support the moveThreshold - this\n\t\t\t\t// may be the starting point of the movement, we can't simply\n\t\t\t\tvar coords = this._lastMoveCoordinates = this._getInputCoordinates(e);\n\t\n\t\t\t\t// Emit \"down\" event - all coordinates together with the\n\t\t\t\t// original DOM event are passed to listeners\n\t\t\t\tthis.emit('down', { x: coords.x, y: coords.y, domEvent: e });\n\t\n\t\t\t\t// Usually we want to stop original the DOM events\n\t\t\t\t// from further browser processing.\n\t\t\t\tthis._stopEventIfRequired(e);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Listens to the \"up\" DOM events: mouseup and touchend. Touchend\n\t   * doesn't have any coordinates associated with it so this function\n\t   * will be overridden in TouchInputHandler\n\t   * @param e DOM Event\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: '_onUpDomEvent',\n\t\t\tvalue: function _onUpDomEvent(e) {\n\t\t\t\t// Works exactly the same way as _onDownDomEvent\n\t\t\t\tvar coords = this._getInputCoordinates(e);\n\t\n\t\t\t\tthis.emit('up', {\n\t\t\t\t\tx: coords.x,\n\t\t\t\t\ty: coords.y,\n\t\t\t\t\tmoved: this._moving,\n\t\t\t\t\tdomEvent: e\n\t\t\t\t});\n\t\n\t\t\t\tthis._stopEventIfRequired(e);\n\t\n\t\t\t\t// The interaction is ended. Reset the flag\n\t\t\t\tthis._moving = false;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Listens to the \"move\" DOM events: mousemove and touchmove.\n\t   * This function keeps track of the distance travelled since the last\n\t   * \"move\" action, besides it ignores the movement and swallows the event\n\t   * if we are still within the _moveThreshold\n\t   * @param e DOM event\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: '_onMoveDomEvent',\n\t\t\tvalue: function _onMoveDomEvent(e) {\n\t\t\t\tvar coords = this._getInputCoordinates(e);\n\t\n\t\t\t\t// Calculate deltas\n\t\t\t\tvar deltaX = coords.x - this._lastMoveCoordinates.x;\n\t\t\t\tvar deltaY = coords.y - this._lastMoveCoordinates.y;\n\t\n\t\t\t\t// Check threshold, if the distance from the initial\n\t\t\t\t// tap to the current position is more than the threshold\n\t\t\t\t// value - qualify it as a real movement\n\t\t\t\tvar deltaMove = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n\t\n\t\t\t\tif (!this._moving && deltaMove > this._moveThreshold) {\n\t\t\t\t\tthis._moving = true;\n\t\t\t\t}\n\t\n\t\t\t\t// If the current interaction is \"moving\" (we crossed the threshold already) then emit\n\t\t\t\t// the event, otherwise, just ignore the interaction.\n\t\t\t\tif (this._moving) {\n\t\t\t\t\tthis.emit('move', {\n\t\t\t\t\t\tx: coords.x,\n\t\t\t\t\t\ty: coords.y,\n\t\t\t\t\t\tdeltaX: deltaX,\n\t\t\t\t\t\tdeltaY: deltaY,\n\t\t\t\t\t\tdomEvent: e\n\t\t\t\t\t});\n\t\t\t\t\tthis._lastMoveCoordinates = coords;\n\t\t\t\t}\n\t\n\t\t\t\tthis._stopEventIfRequired(e);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_stopEventIfRequired',\n\t\t\tvalue: function _stopEventIfRequired(e) {\n\t\t\t\tif (this._stopDomEvents) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_getInputCoordinates',\n\t\t\tvalue: function _getInputCoordinates(e) {\n\t\t\t\tvar element = this._element;\n\t\t\t\tvar coords = e.targetTouches ? e.targetTouches[0] : e;\n\t\n\t\t\t\tvar x = (coords.pageX || coords.clientX + document.body.scrollLeft) - element.offsetLeft;\n\t\n\t\t\t\tvar y = (coords.pageY || coords.clientY + document.body.scrollTop) - element.offsetTop;\n\t\n\t\t\t\t// TODO: Change to destructuring\n\t\t\t\treturn {\n\t\t\t\t\tx: x,\n\t\t\t\t\ty: y\n\t\t\t\t};\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn InputHandlerBase;\n\t}(_EventEmitter3.default);\n\t\n\texports.default = InputHandlerBase;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _InputHandlerBase2 = __webpack_require__(8);\n\t\n\tvar _InputHandlerBase3 = _interopRequireDefault(_InputHandlerBase2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * The implementation of the InputHandler for the desktop\n\t * browser based on the mouse events.\n\t */\n\t\n\tvar MouseInputHandler = function (_InputHandlerBase) {\n\t\t_inherits(MouseInputHandler, _InputHandlerBase);\n\t\n\t\tfunction MouseInputHandler(element) {\n\t\t\t_classCallCheck(this, MouseInputHandler);\n\t\n\t\t\t// We need additional property to track if the\n\t\t\t// mouse is down.\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(MouseInputHandler).call(this, element));\n\t\n\t\t\t_this._mouseDown = false;\n\t\n\t\t\t// Bound functions\n\t\t\t_this._onDownDomEvent = _this._onDownDomEvent.bind(_this);\n\t\t\t_this._onUpDomEvent = _this._onUpDomEvent.bind(_this);\n\t\t\t_this._onMoveDomEvent = _this._onMoveDomEvent.bind(_this);\n\t\t\t_this._onMouseOut = _this._onMouseOut.bind(_this);\n\t\t\t_this._onHoverDomEvent = _this._onHoverDomEvent.bind(_this);\n\t\n\t\t\t_this._coords = { x: -1, y: -1 };\n\t\t\t_this.attachTo(element);\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(MouseInputHandler, [{\n\t\t\tkey: 'isDown',\n\t\t\tvalue: function isDown() {\n\t\t\t\treturn this._mouseDown;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getCoordinates',\n\t\t\tvalue: function getCoordinates() {\n\t\t\t\treturn this._coords;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Attach the listeners to the mouseXXX DOM events\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: '_attachDomListeners',\n\t\t\tvalue: function _attachDomListeners() {\n\t\t\t\tvar el = this._element;\n\t\n\t\t\t\tel.addEventListener('mousedown', this._onDownDomEvent, false);\n\t\t\t\tel.addEventListener('mouseup', this._onUpDomEvent, false);\n\t\t\t\tel.addEventListener('mousemove', this._onMoveDomEvent, false);\n\t\t\t\tel.addEventListener('mouseout', this._onMouseOut, false);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Attach the listeners to the mouseXXX DOM events\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: '_detachDomListeners',\n\t\t\tvalue: function _detachDomListeners() {\n\t\t\t\tvar el = this._element;\n\t\n\t\t\t\tel.removeEventListener('mousedown', this._onDownDomEvent, false);\n\t\t\t\tel.removeEventListener('mouseup', this._onUpDomEvent, false);\n\t\t\t\tel.removeEventListener('mousemove', this._onMoveDomEvent, false);\n\t\t\t\tel.removeEventListener('mouseout', this._onMouseOut, false);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * This method (and the next one) is overridden,\n\t   * because we have to track the state of the mouse.\n\t   * This could also be done in the separate listener.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: '_onDownDomEvent',\n\t\t\tvalue: function _onDownDomEvent(e) {\n\t\t\t\tthis._mouseDown = true;\n\t\t\t\t_get(Object.getPrototypeOf(MouseInputHandler.prototype), '_onDownDomEvent', this).call(this, e);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_onUpDomEvent',\n\t\t\tvalue: function _onUpDomEvent(e) {\n\t\t\t\tthis._mouseDown = false;\n\t\t\t\t_InputHandlerBase3.default.prototype._onUpDomEvent.call(this, e);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * We process the move event only if the mouse button is\n\t   * pressed, otherwise the DOM event is ignored.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: '_onMoveDomEvent',\n\t\t\tvalue: function _onMoveDomEvent(e) {\n\t\t\t\tif (this._mouseDown) {\n\t\t\t\t\t_get(Object.getPrototypeOf(MouseInputHandler.prototype), '_onMoveDomEvent', this).call(this, e);\n\t\t\t\t} else {\n\t\t\t\t\tthis._onHoverDomEvent(e);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Hover is for pointer-enabled interfaces. Should rename\n\t   * move -> drag\n\t   * hover -> move\n\t   *\n\t   * TODO: support deltas in hover\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: '_onHoverDomEvent',\n\t\t\tvalue: function _onHoverDomEvent(e) {\n\t\t\t\tvar coords = this._coords = this._getInputCoordinates(e);\n\t\n\t\t\t\tthis.emit('hover', {\n\t\t\t\t\tx: coords.x, y: coords.y,\n\t\t\t\t\t/* deltaX: deltaX, deltaY: deltaY, */domEvent: e\n\t\t\t\t});\n\t\t\t\tthis._stopEventIfRequired(e);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_onMouseOut',\n\t\t\tvalue: function _onMouseOut() {\n\t\t\t\tthis._mouseDown = false;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn MouseInputHandler;\n\t}(_InputHandlerBase3.default);\n\t\n\texports.default = MouseInputHandler;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar ImageManager = function () {\n\t\tfunction ImageManager() {\n\t\t\t_classCallCheck(this, ImageManager);\n\t\n\t\t\tthis._imageQueue = [];\n\t\t\tthis._images = {};\n\t\t}\n\t\n\t\t_createClass(ImageManager, [{\n\t\t\tkey: '_addImage',\n\t\t\tvalue: function _addImage(key, path) {\n\t\t\t\tthis._imageQueue.push({\n\t\t\t\t\tkey: key,\n\t\t\t\t\tpath: path\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'load',\n\t\t\tvalue: function load(images, onDone, onProgress) {\n\t\t\t\tvar noop = function noop() {};\n\t\t\t\tvar queue = this._imageQueue;\n\t\n\t\t\t\tfor (var im in images) {\n\t\t\t\t\tthis._addImage(im, images[im]);\n\t\t\t\t}\n\t\n\t\t\t\tonDone = onDone || noop;\n\t\t\t\tonProgress = onProgress || noop;\n\t\n\t\t\t\tthis._imageQueue = [];\n\t\n\t\t\t\tif (queue.length === 0) {\n\t\t\t\t\tonProgress(0, 0, null, null, true);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tvar itemCounter = {\n\t\t\t\t\tloaded: 0,\n\t\t\t\t\ttotal: queue.length\n\t\t\t\t};\n\t\n\t\t\t\tfor (var i = 0; i < queue.length; i++) {\n\t\t\t\t\tthis._loadItem(queue[i], itemCounter, onDone, onProgress);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_loadItem',\n\t\t\tvalue: function _loadItem(queueItem, itemCounter, onDone, onProgress) {\n\t\t\t\tvar self = this;\n\t\t\t\tvar img = new Image();\n\t\n\t\t\t\timg.onload = function () {\n\t\t\t\t\tself._images[queueItem.key] = img;\n\t\t\t\t\tself._onItemLoaded(queueItem, itemCounter, onDone, onProgress, true);\n\t\t\t\t};\n\t\n\t\t\t\timg.onerror = function () {\n\t\t\t\t\tself._images[queueItem.key] = self._placeholder;\n\t\t\t\t\tself._onItemLoaded(queueItem, itemCounter, onDone, onProgress, false);\n\t\t\t\t};\n\t\t\t\timg.src = queueItem.path;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_onItemLoaded',\n\t\t\tvalue: function _onItemLoaded(queueItem, itemCounter, onDone, onProgress, success) {\n\t\t\t\titemCounter.loaded++;\n\t\t\t\tonProgress(itemCounter.loaded, itemCounter.total, queueItem.key, queueItem.path, success);\n\t\n\t\t\t\tif (itemCounter.loaded === itemCounter.total) {\n\t\t\t\t\tonDone();\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'get',\n\t\t\tvalue: function get(key) {\n\t\t\t\treturn this._images[key];\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn ImageManager;\n\t}();\n\t\n\texports.default = ImageManager;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t/**\n\t * Checks if we're working with the touchscreen or with the\n\t * regular desktop browser. Used to determine, what kind of events should we use:\n\t * mouse events or touch events.\n\t */\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tfunction isTouchDevice() {\n\t  return 'ontouchstart' in document.documentElement;\n\t}\n\t\n\tfunction dist(x1, y1, x2, y2) {\n\t  return Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n\t}\n\t\n\texports.isTouchDevice = isTouchDevice;\n\texports.dist = dist;\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar GameObject = function () {\n\t\tfunction GameObject() {\n\t\t\t_classCallCheck(this, GameObject);\n\t\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._width = 0;\n\t\t\tthis._height = 0;\n\t\n\t\t\tthis._id = GameObject.uid++;\n\t\t\tthis._name = 'object_' + this._id;\n\t\n\t\t\tthis._anchorX = 0;\n\t\t\tthis._anchorY = 0;\n\t\n\t\t\tthis._rot = 0;\n\t\n\t\t\tthis._scene = null;\n\t\t\tthis._parent = null;\n\t\t\tthis._children = [];\n\t\t}\n\t\n\t\t_createClass(GameObject, [{\n\t\t\tkey: 'update',\n\t\t\tvalue: function update(fc) {\n\t\t\t\tthis._children.forEach(function (it) {\n\t\t\t\t\treturn it.update(fc);\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'draw',\n\t\t\tvalue: function draw(fc) {\n\t\t\t\tthis._children.forEach(function (it) {\n\t\t\t\t\treturn it.draw(fc);\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'addChild',\n\t\t\tvalue: function addChild(child) {\n\t\t\t\tthis._children.push(child);\n\t\t\t\tchild.setParent(this);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'removeChild',\n\t\t\tvalue: function removeChild(child) {\n\t\t\t\tvar idx = this._children.indexOf(child);\n\t\n\t\t\t\tif (idx > -1) {\n\t\t\t\t\tchild.setParent(null);\n\t\t\t\t\treturn this._children.splice(idx, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getChildren',\n\t\t\tvalue: function getChildren() {\n\t\t\t\treturn this._children;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'setParent',\n\t\t\tvalue: function setParent(parent) {\n\t\t\t\tthis._parent = parent;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'setScene',\n\t\t\tvalue: function setScene(scene) {\n\t\t\t\tthis._scene = scene;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getScene',\n\t\t\tvalue: function getScene() {\n\t\t\t\treturn this._scene;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getParent',\n\t\t\tvalue: function getParent() {\n\t\t\t\treturn this._parent;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getId',\n\t\t\tvalue: function getId() {\n\t\t\t\treturn this._id;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getName',\n\t\t\tvalue: function getName() {\n\t\t\t\treturn this._name;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'setName',\n\t\t\tvalue: function setName() {\n\t\t\t\treturn this._name;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'setPos',\n\t\t\tvalue: function setPos(x, y) {\n\t\t\t\tthis._x = x;\n\t\t\t\tthis._y = y;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'setSize',\n\t\t\tvalue: function setSize(w, h) {\n\t\t\t\tthis._width = w;\n\t\t\t\tthis._height = h;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getWidth',\n\t\t\tvalue: function getWidth() {\n\t\t\t\treturn this._width;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getHeight',\n\t\t\tvalue: function getHeight() {\n\t\t\t\treturn this._height;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'move',\n\t\t\tvalue: function move(dx, dy) {\n\t\t\t\tthis._x += dx;\n\t\t\t\tthis._y += dy;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getPos',\n\t\t\tvalue: function getPos() {\n\t\t\t\treturn {\n\t\t\t\t\tx: this._x,\n\t\t\t\t\ty: this._y\n\t\t\t\t};\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getTop',\n\t\t\tvalue: function getTop() {\n\t\t\t\treturn this._y;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getBottom',\n\t\t\tvalue: function getBottom() {\n\t\t\t\treturn this._y + this._height;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getLeft',\n\t\t\tvalue: function getLeft() {\n\t\t\t\treturn this._x;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getRight',\n\t\t\tvalue: function getRight() {\n\t\t\t\treturn this._x + this._width;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'detach',\n\t\t\tvalue: function detach() {\n\t\t\t\tif (!this._parent) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tthis._parent.removeChild(this);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn GameObject;\n\t}();\n\t// should be static\n\t\n\t\n\texports.default = GameObject;\n\tGameObject.uid = 1;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _GameObject2 = __webpack_require__(12);\n\t\n\tvar _GameObject3 = _interopRequireDefault(_GameObject2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar GameScene = function (_GameObject) {\n\t\t_inherits(GameScene, _GameObject);\n\t\n\t\tfunction GameScene() {\n\t\t\t_classCallCheck(this, GameScene);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(GameScene).call(this));\n\t\n\t\t\t_this._gameContext = null;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(GameScene, [{\n\t\t\tkey: 'init',\n\t\t\tvalue: function init(gameContext) {\n\t\t\t\tthis._gameContext = gameContext;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'addChild',\n\t\t\tvalue: function addChild(child) {\n\t\t\t\t_get(Object.getPrototypeOf(GameScene.prototype), 'addChild', this).call(this, child);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'registerObject',\n\t\t\tvalue: function registerObject(obj) {}\n\t\t}, {\n\t\t\tkey: 'deregisterObject',\n\t\t\tvalue: function deregisterObject(obj) {}\n\t\t}, {\n\t\t\tkey: 'getResource',\n\t\t\tvalue: function getResource(name) {\n\t\t\t\treturn this._gameContext.resourceManager.get(name);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn GameScene;\n\t}(_GameObject3.default);\n\t\n\texports.default = GameScene;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _Rect = __webpack_require__(3);\n\t\n\tvar _Rect2 = _interopRequireDefault(_Rect);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar MathUtils = {};\n\t\n\tMathUtils.getBoundingRectangle = function (points) {\n\t\tvar minX = Number.MAX_VALUE;\n\t\tvar minY = Number.MAX_VALUE;\n\t\tvar maxX = Number.MIN_VALUE;\n\t\tvar maxY = Number.MIN_VALUE;\n\t\n\t\tfor (var i = 0; i < points.length; i++) {\n\t\t\t// TODO Destructuring?\n\t\t\tvar x = points[i][0];\n\t\t\tvar y = points[i][1];\n\t\n\t\t\tif (x < minX) {\n\t\t\t\tminX = x;\n\t\t\t}\n\t\n\t\t\tif (x > maxX) {\n\t\t\t\tmaxX = x;\n\t\t\t}\n\t\n\t\t\tif (y < minY) {\n\t\t\t\tminY = y;\n\t\t\t}\n\t\n\t\t\tif (y > maxY) {\n\t\t\t\tmaxY = y;\n\t\t\t}\n\t\t}\n\t\n\t\tvar epsilon = Math.max(maxX - minX, maxY - minY) * 0.05;\n\t\n\t\tminX -= epsilon;\n\t\tmaxX += epsilon;\n\t\tminY -= epsilon;\n\t\tmaxY += epsilon;\n\t\treturn new _Rect2.default(minX, minY, maxX - minX, maxY - minY);\n\t};\n\t\n\t/**\n\t * http://stackoverflow.com/questions/563198\n\t */\n\t/* eslint-disable camelcase */\n\tMathUtils.linesIntersect = function (p0_x, p0_y, p1_x, p1_y, p2_x, p2_y, p3_x, p3_y) {\n\t\n\t\tvar s1_x = void 0,\n\t\t    s1_y = void 0,\n\t\t    s2_x = void 0,\n\t\t    s2_y = void 0;\n\t\n\t\ts1_x = p1_x - p0_x;\n\t\ts1_y = p1_y - p0_y;\n\t\ts2_x = p3_x - p2_x;\n\t\ts2_y = p3_y - p2_y;\n\t\n\t\tvar s = void 0,\n\t\t    t = void 0;\n\t\n\t\ts = (-s1_y * (p0_x - p2_x) + s1_x * (p0_y - p2_y)) / (-s2_x * s1_y + s1_x * s2_y);\n\t\tt = (s2_x * (p0_y - p2_y) - s2_y * (p0_x - p2_x)) / (-s2_x * s1_y + s1_x * s2_y);\n\t\n\t\tif (s >= 0 && s <= 1 && t >= 0 && t <= 1) {\n\t\t\treturn [p0_x + t * s1_x, p0_y + t * s1_y];\n\t\t}\n\t\n\t\treturn null;\n\t};\n\t/* eslint-enable camelcase */\n\t\n\tMathUtils.sign = function (number) {\n\t\treturn number > 0 ? 1 : number === 0 ? 0 : -1;\n\t};\n\t\n\tMathUtils.pointInsidePolygon = function (px, py, polygon, rayX, rayY) {\n\t\tif (rayX === undefined || rayY === undefined) {\n\t\t\tvar rect = MathUtils.getBoundingRectangle(polygon);\n\t\n\t\t\trayX = rect.x + rect.width;\n\t\t\trayY = py;\n\t\t}\n\t\n\t\tvar intersectCount = 0;\n\t\n\t\tfor (var i = 0; i < polygon.length; i++) {\n\t\t\tvar polyX0 = polygon[i][0];\n\t\t\tvar polyY0 = polygon[i][1];\n\t\t\tvar polyX1 = i + 1 === polygon.length ? polygon[0][0] : polygon[i + 1][0];\n\t\t\tvar polyY1 = i + 1 === polygon.length ? polygon[0][1] : polygon[i + 1][1];\n\t\n\t\t\tif (MathUtils.linesIntersect(px, py, rayX, rayY, polyX0, polyY0, polyX1, polyY1)) {\n\t\t\t\tintersectCount++;\n\t\t\t}\n\t\t}\n\t\treturn intersectCount % 2 === 1;\n\t};\n\t\n\t// Can be probably optimized by checking that the both points are on one\n\t// \"side\" of the poly\n\tMathUtils.segmentIntersectsPolygon = function (x0, y0, x1, y1, polygon) {\n\t\tfor (var i = 0; i < polygon.length; i++) {\n\t\t\tvar polyX0 = polygon[i][0];\n\t\t\tvar polyY0 = polygon[i][1];\n\t\t\tvar polyX1 = i + 1 === polygon.length ? polygon[0][0] : polygon[i + 1][0];\n\t\t\tvar polyY1 = i + 1 === polygon.length ? polygon[0][1] : polygon[i + 1][1];\n\t\n\t\t\tif (MathUtils.linesIntersect(x0, y0, x1, y1, polyX0, polyY0, polyX1, polyY1)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\t\n\tMathUtils.distance = function (x0, y0, x1, y1) {\n\t\treturn Math.sqrt((x0 - x1) * (x0 - x1) + (y0 - y1) * (y0 - y1));\n\t};\n\t\n\tMathUtils.distanceSquared = function (x0, y0, x1, y1) {\n\t\treturn (x0 - x1) * (x0 - x1) + (y0 - y1) * (y0 - y1);\n\t};\n\t\n\t// http://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment\n\tMathUtils.distanceFromPointToSegment = function (pX, pY, segStartX, segStartY, segEndX, segEndY) {\n\t\n\t\tvar lengthSquared = MathUtils.distanceSquared(segStartX, segStartY, segEndX, segEndY);\n\t\n\t\tif (lengthSquared === 0) {\n\t\t\treturn MathUtils.distance(pX, pY, segStartX, segStartY);\n\t\t}\n\t\n\t\tvar t = ((pX - segStartX) * (segEndX - segStartX) + (pY - segStartY) * (segEndY - segStartY)) / lengthSquared;\n\t\n\t\tif (t < 0) {\n\t\t\treturn MathUtils.distance(pX, pY, segStartX, segStartY);\n\t\t}\n\t\n\t\tif (t > 1) {\n\t\t\treturn MathUtils.distance(pX, pY, segEndX, segEndY);\n\t\t}\n\t\n\t\treturn MathUtils.distance(pX, pY, segStartX + t * (segEndX - segStartX), segStartY + t * (segEndY - segStartY));\n\t};\n\t\n\tMathUtils.distanceFromPointToPolygon = function (px, py, polyPoints) {\n\t\tvar minDist = MathUtils.distanceFromPointToSegment(px, py, polyPoints[polyPoints.length - 1][0], polyPoints[polyPoints.length - 1][1], polyPoints[0][0], polyPoints[0][1]);\n\t\n\t\tfor (var i = 1; i < polyPoints.length; i++) {\n\t\t\tvar dist = MathUtils.distanceFromPointToSegment(px, py, polyPoints[i - 1][0], polyPoints[i - 1][1], polyPoints[i][0], polyPoints[i][1]);\n\t\n\t\t\tif (dist < minDist) {\n\t\t\t\tminDist = dist;\n\t\t\t}\n\t\t}\n\t\n\t\treturn minDist;\n\t};\n\t\n\texports.default = MathUtils;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.TileMapOrtho = exports.TileSheet = exports.SpriteSheet = exports.Sprite = exports.Shapes = exports.Rectangle = undefined;\n\t\n\tvar _Rectangle = __webpack_require__(16);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tvar _Shapes = __webpack_require__(17);\n\t\n\tvar _Shapes2 = _interopRequireDefault(_Shapes);\n\t\n\tvar _Sprite = __webpack_require__(18);\n\t\n\tvar _Sprite2 = _interopRequireDefault(_Sprite);\n\t\n\tvar _SpriteSheet = __webpack_require__(19);\n\t\n\tvar _SpriteSheet2 = _interopRequireDefault(_SpriteSheet);\n\t\n\tvar _TileSheet = __webpack_require__(20);\n\t\n\tvar _TileSheet2 = _interopRequireDefault(_TileSheet);\n\t\n\tvar _TileMapOrtho = __webpack_require__(21);\n\t\n\tvar _TileMapOrtho2 = _interopRequireDefault(_TileMapOrtho);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.Rectangle = _Rectangle2.default;\n\texports.Shapes = _Shapes2.default;\n\texports.Sprite = _Sprite2.default;\n\texports.SpriteSheet = _SpriteSheet2.default;\n\texports.TileSheet = _TileSheet2.default;\n\texports.TileMapOrtho = _TileMapOrtho2.default;\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _GameObject2 = __webpack_require__(12);\n\t\n\tvar _GameObject3 = _interopRequireDefault(_GameObject2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Rectangle = function (_GameObject) {\n\t\t_inherits(Rectangle, _GameObject);\n\t\n\t\tfunction Rectangle() {\n\t\t\t_classCallCheck(this, Rectangle);\n\t\n\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(Rectangle).apply(this, arguments));\n\t\t}\n\t\n\t\t_createClass(Rectangle, [{\n\t\t\tkey: 'draw',\n\t\t\tvalue: function draw(fc) {\n\t\t\t\tvar gc = fc.graphContext;\n\t\n\t\t\t\tgc.fillStyle = 'green';\n\t\t\t\tgc.fillRect(this._x, this._y, 10, 10);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Rectangle;\n\t}(_GameObject3.default);\n\t\n\texports.default = Rectangle;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 17 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t/**\n\t * A number of utility methods for drawing the polygons,\n\t * agents (boids), arrows, fills, etc.\n\t */\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\tvar Shapes = {};\n\t\n\tShapes.drawMarker = function (ctx, x, y, size, lineWidth, color) {\n\t\tsize = size || 10;\n\t\tlineWidth = lineWidth || 5;\n\t\tcolor = color || 'blue';\n\t\tctx.save();\n\t\tctx.strokeStyle = color;\n\t\tctx.lineWidth = 5;\n\t\tctx.beginPath();\n\t\tctx.moveTo(x - size, y + size);\n\t\tctx.lineTo(x + size, y - size);\n\t\tctx.moveTo(x - size, y - size);\n\t\tctx.lineTo(x + size, y + size);\n\t\tctx.stroke();\n\t\tctx.restore();\n\t};\n\t\n\tShapes.drawArrow1 = function (ctx, x, y, length, offsetFromCenter, wingLength, wingDepth, angle) {\n\t\tlength = length || 50;\n\t\toffsetFromCenter = offsetFromCenter || 15;\n\t\twingLength = wingLength || 10;\n\t\twingDepth = wingDepth || 5;\n\t\tangle = angle || 0;\n\t\n\t\tctx.save();\n\t\tctx.fillStyle = 'green';\n\t\tctx.beginPath();\n\t\n\t\tif (angle) {\n\t\t\tctx.translate(x, y);\n\t\t\tctx.rotate(angle);\n\t\t\tctx.translate(-x, -y);\n\t\t}\n\t\n\t\tctx.moveTo(x + offsetFromCenter, y);\n\t\tctx.lineTo(x + offsetFromCenter - wingDepth, y - wingLength);\n\t\tctx.lineTo(x + offsetFromCenter + length, y);\n\t\tctx.lineTo(x + offsetFromCenter - wingDepth, y + wingLength);\n\t\n\t\tctx.closePath();\n\t\tctx.fill();\n\t\tctx.restore();\n\t};\n\t\n\tShapes.drawPolygon = function (ctx, points) {\n\t\tctx.save();\n\t\tctx.strokeStyle = 'lightblue';\n\t\tctx.fillStyle = 'rgba(173, 216, 230, 1)';\n\t\tctx.lineWidth = 5;\n\t\tctx.beginPath();\n\t\tctx.moveTo(points[0][0], points[0][1]);\n\t\tfor (var i = 1; i < points.length; i++) {\n\t\t\tctx.lineTo(points[i][0], points[i][1]);\n\t\t}\n\t\tctx.closePath();\n\t\tctx.fill();\n\t\tctx.stroke();\n\t\tctx.restore();\n\t};\n\t\n\tShapes.fillPolygon = function (ctx, points) {\n\t\tctx.save();\n\t\n\t\tctx.strokeStyle = 'grey';\n\t\tctx.lineWidth = 1;\n\t\n\t\tvar minX = Number.MAX_VALUE;\n\t\tvar minY = Number.MAX_VALUE;\n\t\tvar maxX = Number.MIN_VALUE;\n\t\tvar maxY = Number.MIN_VALUE;\n\t\n\t\tvar angle = Math.PI / 4;\n\t\n\t\tfor (var i = 0; i < points.length; i++) {\n\t\t\tif (points[i][0] < minX) {\n\t\t\t\tminX = points[i][0];\n\t\t\t}\n\t\n\t\t\tif (points[i][1] < minY) {\n\t\t\t\tminY = points[i][1];\n\t\t\t}\n\t\n\t\t\tif (points[i][0] > maxX) {\n\t\t\t\tmaxX = points[i][0];\n\t\t\t}\n\t\n\t\t\tif (points[i][1] > maxY) {\n\t\t\t\tmaxY = points[i][1];\n\t\t\t}\n\t\t}\n\t\n\t\tctx.beginPath();\n\t\tctx.moveTo(points[0][0], points[0][1]);\n\t\tfor (var _i = 1; _i < points.length; _i++) {\n\t\t\tctx.lineTo(points[_i][0], points[_i][1]);\n\t\t}\n\t\tctx.closePath();\n\t\tctx.clip();\n\t\n\t\tvar linesOffset = (maxY - minY) / Math.tan(angle);\n\t\n\t\tctx.beginPath();\n\t\tfor (var _i2 = minX - linesOffset; _i2 < maxX; _i2 += 15) {\n\t\t\tctx.moveTo(_i2, maxY);\n\t\t\tctx.lineTo(_i2 + linesOffset, minY);\n\t\t}\n\t\n\t\tctx.stroke();\n\t\tctx.restore();\n\t};\n\t\n\texports.default = Shapes;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _GameObject2 = __webpack_require__(12);\n\t\n\tvar _GameObject3 = _interopRequireDefault(_GameObject2);\n\t\n\tvar _Rect = __webpack_require__(3);\n\t\n\tvar _Rect2 = _interopRequireDefault(_Rect);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Sprite = function (_GameObject) {\n\t\t_inherits(Sprite, _GameObject);\n\t\n\t\tfunction Sprite(img) {\n\t\t\t_classCallCheck(this, Sprite);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Sprite).call(this));\n\t\n\t\t\t_this._img = img;\n\t\t\t_this._width = img.width;\n\t\t\t_this._height = img.height;\n\t\t\t_this._isPressed = false;\n\t\t\t_this._clicked = false;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(Sprite, [{\n\t\t\tkey: 'setSize',\n\t\t\tvalue: function setSize(widthOrFraction, height) {\n\t\n\t\t\t\tif (height === undefined) {\n\t\t\t\t\tvar fraction = widthOrFraction;\n\t\n\t\t\t\t\twidthOrFraction = this._img.width * fraction;\n\t\t\t\t\theight = this._img.height * fraction;\n\t\t\t\t}\n\t\t\t\tthis._width = widthOrFraction;\n\t\t\t\tthis._height = height;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'update',\n\t\t\tvalue: function update(fc) {}\n\t\t}, {\n\t\t\tkey: 'draw',\n\t\t\tvalue: function draw(fc) {\n\t\t\t\tvar ctx = fc.graphContext;\n\t\n\t\t\t\tctx.save();\n\t\t\t\tctx.drawImage(this._img, 0, 0, this._img.width, this._img.height, this._x, this._y, this._width, this._height);\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getBounds',\n\t\t\tvalue: function getBounds() {\n\t\t\t\treturn new _Rect2.default(this._x, this._y, this._width, this._height);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Sprite;\n\t}(_GameObject3.default);\n\t\n\texports.default = Sprite;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t/**\r\n\t *\r\n\t * @param image the image object to use for drawing\r\n\t * @param frames the array describing the frames of the sprite sheet in a format:\r\n\t * [\r\n\t *     [x, y, width, height, anchorX, anchorY] // - frame 1\r\n\t *     [x, y, width, height, anchorX, anchorY] // - frame 2\r\n\t *     ...\r\n\t * ]\r\n\t */\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar SpriteSheet = function () {\n\t\tfunction SpriteSheet(image, frames) {\n\t\t\t_classCallCheck(this, SpriteSheet);\n\t\n\t\t\tthis._image = image;\n\t\t\tthis._frames = frames;\n\t\t}\n\t\n\t\t/**\r\n\t  * Draws the frame of the sprite sheet in the given coordinates of the\r\n\t  * Context.\r\n\t  * @param ctx the context to draw at\r\n\t  * @param index the index of the frame\r\n\t  * @param x x coordinate where the anchor will appear\r\n\t  * @param y y coordinate where the anchor will appear\r\n\t  */\n\t\n\t\n\t\t_createClass(SpriteSheet, [{\n\t\t\tkey: 'drawFrame',\n\t\t\tvalue: function drawFrame(ctx, index, x, y) {\n\t\t\t\tvar frame = this._frames[index];\n\t\n\t\t\t\tif (!frame) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tctx.drawImage(this._image, frame[SpriteSheet.FRAME_X], frame[SpriteSheet.FRAME_Y], frame[SpriteSheet.FRAME_WIDTH], frame[SpriteSheet.FRAME_HEIGHT], x - frame[SpriteSheet.FRAME_ANCHOR_X], y - frame[SpriteSheet.FRAME_ANCHOR_Y], frame[SpriteSheet.FRAME_WIDTH], frame[SpriteSheet.FRAME_HEIGHT]);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn SpriteSheet;\n\t}();\n\t\n\texports.default = SpriteSheet;\n\t\n\t\n\tSpriteSheet.FRAME_X = 0;\n\tSpriteSheet.FRAME_Y = 1;\n\tSpriteSheet.FRAME_WIDTH = 2;\n\tSpriteSheet.FRAME_HEIGHT = 3;\n\tSpriteSheet.FRAME_ANCHOR_X = 4;\n\tSpriteSheet.FRAME_ANCHOR_Y = 5;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 20 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar TileSheet = function () {\n\t\tfunction TileSheet(image, w, h) {\n\t\t\t_classCallCheck(this, TileSheet);\n\t\n\t\t\tthis._image = image;\n\t\t\tthis._w = w;\n\t\t\tthis._h = h;\n\t\t\tthis._row = Math.floor(image.width / w);\n\t\t}\n\t\n\t\t_createClass(TileSheet, [{\n\t\t\tkey: 'drawTile',\n\t\t\tvalue: function drawTile(ctx, index, x, y) {\n\t\t\t\tif (index < 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tvar tx = index % this._row * this._w;\n\t\t\t\tvar ty = Math.floor(index / this._row) * this._h;\n\t\n\t\t\t\tctx.drawImage(this._image, tx, ty, this._w, this._h, x, y, this._w, this._h);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn TileSheet;\n\t}();\n\t\n\texports.default = TileSheet;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _GameObject2 = __webpack_require__(12);\n\t\n\tvar _GameObject3 = _interopRequireDefault(_GameObject2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar TileMapOrtho = function (_GameObject) {\n\t\t_inherits(TileMapOrtho, _GameObject);\n\t\n\t\tfunction TileMapOrtho(mapData, image, tileSize, viewportWidth, viewportHeight) {\n\t\t\t_classCallCheck(this, TileMapOrtho);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(TileMapOrtho).call(this));\n\t\n\t\t\t_this._mapData = mapData;\n\t\t\t_this._image = image;\n\t\t\t_this._tileSize = tileSize;\n\t\t\t_this._viewportWidth = viewportWidth;\n\t\t\t_this._viewportHeight = viewportHeight;\n\t\n\t\t\t// Coordinates of the map\n\t\t\t_this._x = 0;\n\t\t\t_this._y = 0;\n\t\n\t\t\t// Offscreen buffer\n\t\t\t_this._offCanvas = document.createElement('canvas');\n\t\t\t_this._offContext = _this._offCanvas.getContext('2d');\n\t\t\t_this._offBounds = { x: 0, y: 0, w: 0, h: 0 };\n\t\t\t_this._offDirty = true;\n\t\n\t\t\t_this._resetOffScreenCanvas();\n\t\n\t\t\t// The number of tiles in one row of the image\n\t\t\t_this._tilesPerRow = image.width / tileSize;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t/* Draws the whole map */\n\t\n\t\n\t\t_createClass(TileMapOrtho, [{\n\t\t\tkey: 'draw',\n\t\t\tvalue: function draw(fc) {\n\t\t\t\tvar ctx = fc.graphContext;\n\t\n\t\t\t\tif (this._offDirty) {\n\t\t\t\t\tthis._redrawOffscreen();\n\t\t\t\t}\n\t\n\t\t\t\tvar offCanvasX = -Math.floor(this._x) - this._offBounds.x * this._tileSize;\n\t\t\t\tvar offCanvasY = -Math.floor(this._y) - this._offBounds.y * this._tileSize;\n\t\t\t\tvar offCanvasW = Math.min(this._offCanvas.width - offCanvasX, this._viewportWidth);\n\t\t\t\tvar offCanvasH = Math.min(this._offCanvas.height - offCanvasY, this._viewportHeight);\n\t\n\t\t\t\tctx.drawImage(this._offCanvas, offCanvasX, offCanvasY, offCanvasW, offCanvasH, 0, 0, offCanvasW, offCanvasH);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'move',\n\t\t\tvalue: function move(deltaX, deltaY) {\n\t\t\t\tthis._x += deltaX;\n\t\t\t\tthis._y += deltaY;\n\t\t\t\tthis._updateOffscreenBounds();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'setViewportSize',\n\t\t\tvalue: function setViewportSize(width, height) {\n\t\t\t\tthis._viewportWidth = width;\n\t\t\t\tthis._viewportHeight = height;\n\t\t\t\tthis._resetOffScreenCanvas();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_resetOffScreenCanvas',\n\t\t\tvalue: function _resetOffScreenCanvas() {\n\t\t\t\tthis._updateOffscreenBounds();\n\t\t\t\tthis._offCanvas.width = this._offBounds.w * this._tileSize;\n\t\t\t\tthis._offCanvas.height = this._offBounds.h * this._tileSize;\n\t\t\t\tthis._offDirty = true;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_redrawOffscreen',\n\t\t\tvalue: function _redrawOffscreen() {\n\t\t\t\tvar ctx = this._offContext;\n\t\n\t\t\t\tctx.clearRect(0, 0, this._offCanvas.width, this._offCanvas.height);\n\t\n\t\t\t\tvar startX = Math.max(this._offBounds.x, 0);\n\t\t\t\tvar endX = Math.min(startX + this._offBounds.w - 1, this._mapData[0].length - 1);\n\t\n\t\t\t\tvar startY = Math.max(this._offBounds.y, 0);\n\t\t\t\tvar endY = Math.min(startY + this._offBounds.h - 1, this._mapData.length - 1);\n\t\n\t\t\t\tfor (var cellY = startY; cellY <= endY; cellY++) {\n\t\t\t\t\tfor (var cellX = startX; cellX <= endX; cellX++) {\n\t\t\t\t\t\tvar tileId = this._mapData[cellY][cellX];\n\t\n\t\t\t\t\t\tthis._drawTileAt(ctx, tileId, cellX, cellY);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._offDirty = false;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_drawTileAt',\n\t\t\tvalue: function _drawTileAt(ctx, tileId, cellX, cellY) {\n\t\n\t\t\t\t// Position of the tile inside of a tile sheet\n\t\t\t\tvar srcX = tileId % this._tilesPerRow * this._tileSize;\n\t\t\t\tvar srcY = Math.floor(tileId / this._tilesPerRow) * this._tileSize;\n\t\n\t\t\t\t// size of the tile\n\t\t\t\tvar size = this._tileSize;\n\t\n\t\t\t\t// position of the tile on the offscreen buffer\n\t\t\t\tvar destX = (cellX - this._offBounds.x) * size;\n\t\t\t\tvar destY = (cellY - this._offBounds.y) * size;\n\t\n\t\t\t\tctx.drawImage(this._image, srcX, srcY, size, size, destX, destY, size, size);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_updateOffscreenBounds',\n\t\t\tvalue: function _updateOffscreenBounds() {\n\t\t\t\tvar oldBounds = this._offBounds;\n\t\n\t\t\t\tvar newBounds = {\n\t\t\t\t\tx: Math.floor(-this._x / this._tileSize),\n\t\t\t\t\ty: Math.floor(-this._y / this._tileSize),\n\t\t\t\t\tw: Math.ceil(this._viewportWidth / this._tileSize) + 1,\n\t\t\t\t\th: Math.ceil(this._viewportHeight / this._tileSize) + 1\n\t\t\t\t};\n\t\n\t\t\t\tif (!(oldBounds.x === newBounds.x && oldBounds.y === newBounds.y && oldBounds.w === newBounds.w && oldBounds.h === newBounds.h)) {\n\t\n\t\t\t\t\tthis._offBounds = newBounds;\n\t\t\t\t\tthis._offDirty = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn TileMapOrtho;\n\t}(_GameObject3.default);\n\t\n\texports.default = TileMapOrtho;\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** draco.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap fef00140842c47f7324b\n **/","'use strict';\n\nimport Animator from './Animator';\nimport DirtyRectangleManager from './DirtyRectangleManager';\nimport Engine from './Engine';\nimport EventEmitter from './EventEmitter';\nimport GameObject from './GameObject';\nimport GameScene from './GameScene';\nimport ImageManager from './ImageManager';\nimport MathUtils from './MathUtils';\nimport Rect from './Rect';\nimport {isTouchDevice, dist} from './utils';\nimport * as ui from './ui/index';\n\nexport {Animator, DirtyRectangleManager, Engine, EventEmitter, GameObject,\n\tGameScene, ImageManager, MathUtils, Rect, isTouchDevice, dist, ui};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/index.js\n **/","'use strict';\r\n\r\n/**\r\n * This is the base class to support the animation.\r\n * @param duration - the duration of the one loop of the animation in milliseconds.\r\n * For example, for a 6-frame animation where each frame is staying on the\r\n * screen for 50 milliseconds the duration will be 300 milliseconds.\r\n *\r\n * The constructor accepts the bare minimum of parameters: the rest is set via setters:\r\n * setRepeatBehavior and setRepeatCount (see the function docs for the details)\r\n *\r\n * Animator doesn't handle the timing internally. It should be used with the external\r\n * timer. The external timer calls the update() function, passing the number of milliseconds\r\n * since the previous call as the parameter.\r\n */\r\nexport default class Animator {\r\n\tconstructor(duration) {\r\n\t\tthis._duration = duration;\r\n\r\n\t\t// total loops to do\r\n\t\tthis._repeatCount = 1;\r\n\r\n\t\t// the fraction to accelerate\r\n\t\tthis._acceleration = 0;\r\n\r\n\t\t// the fraction to decelerate\r\n\t\tthis._deceleration = 0;\r\n\r\n\t\t// How many loops were actually done\r\n\t\tthis._loopsDone = 0;\r\n\r\n\t\t// Default repeat behavior is LOOP\r\n\t\tthis._repeatBehavior = Animator.RepeatBehavior.LOOP;\r\n\r\n\t\t// Time, passed since the start of the loop\r\n\t\tthis._timeSinceLoopStart = 0;\r\n\r\n\t\t// This flag is used to indicate that the animator has already\r\n\t\t// started to work with the certain configuration of parameters (repeatCount, repeat\r\n\t\tthis._started = false;\r\n\t\tthis._running = false;\r\n\r\n\t\t// Flag to mark that this loop is going into the opposite direction\r\n\t\tthis._reverseLoop = false;\r\n\t}\r\n\r\n\t/**\r\n\t * Starts the animator. After the animator is started you can't\r\n\t * change its parameters until stop() is called.\r\n\t */\r\n\tstart() {\r\n\t\tthis._started = true;\r\n\t\tthis._running = true;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if animator is currently running\r\n\t */\r\n\tisRunning() {\r\n\t\treturn this._running;\r\n\t}\r\n\r\n\t/**\r\n\t * Stops the animator and resets the internal state. This function\r\n\t * may be called multiple times.\r\n\t */\r\n\tstop() {\r\n\t\tthis._loopsDone = 0;\r\n\t\tthis._timeSinceLoopStart = 0;\r\n\t\tthis._running = false;\r\n\t\tthis._started = false;\r\n\t};\r\n\r\n\t/**\r\n\t * Pauses the animator. The animator will ignore the updates while paused, \"freezing\"\r\n\t * the animation but not resetting its state. The animation can be then resumed\r\n\t */\r\n\tpause() {\r\n\t\tthis._running = false;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the duration of one loop of the animation\r\n\t */\r\n\tgetDuration() {\r\n\t\treturn this._duration;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the duration of one loop of the animation. Should be value >=1\r\n\t */\r\n\tsetDuration(duration) {\r\n\t\tthis._throwIfStarted();\r\n\t\tif (duration < 1) {\r\n\t\t\tthrow Error('Duration can\\'t be < 1');\r\n\t\t}\r\n\t\tthis._duration = duration;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the configured repeat count, default is 1.\r\n\t */\r\n\tgetRepeatCount() {\r\n\t\treturn this._repeatCount;\r\n\t}\r\n\r\n\t/**\r\n\t * Set the number of loops in the animation, default is 1. Valid values\r\n\t * are integers, -1 or Animator.INFINITE for infinite looping\r\n\t */\r\n\tsetRepeatCount(repeatCount) {\r\n\t\tthis._throwIfStarted();\r\n\r\n\t\tif (repeatCount < 1 && repeatCount !== Animator.INFINITE) {\r\n\t\t\tthrow Error('Repeat count must be greater than 0 or INFINITE');\r\n\t\t}\r\n\t\tthis._repeatCount = repeatCount;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the configured repeat behavior of the animator. Possible values are\r\n\t * Animator.RepeatBehavior.LOOP and Animator.RepeatBehavior.REPATE. Read the docs for\r\n\t * Animator.RepeatBehavior for the details on how they differ.\r\n\t */\r\n\tgetRepeatBehavior() {\r\n\t\treturn this._repeatBehavior;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the repeat behavior, default value is Animator.RepeatBehavior.LOOP\r\n\t * @param behavior the new repat behavior\r\n\t */\r\n\tsetRepeatBehavior(behavior) {\r\n\t\tthis._throwIfStarted();\r\n\t\tif (behavior !== Animator.RepeatBehavior.LOOP &&\r\n\t\t\t\tbehavior !== Animator.RepeatBehavior.REVERSE) {\r\n\t\t\tthrow Error('Repeat behavior should be either RepeatBehavior.LOOP' +\r\n\t\t\t\t' or RepeatBehavior.REVERSE');\r\n\t\t}\r\n\t\tthis._repeatBehavior = behavior;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current value for the acceleration, default is 0.\r\n\t */\r\n\tgetAcceleration() {\r\n\t\treturn this._acceleration;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the value for the acceleration. The value must be between 0 and 1-deceleration.\r\n\t * @param acceleration new acceleration\r\n\t */\r\n\tsetAcceleration(acceleration) {\r\n\t\tthis._throwIfStarted();\r\n\t\tif (acceleration < 0 || acceleration > 1 || acceleration > (1 - this._deceleration)) {\r\n\t\t\tthrow Error('Acceleration value must be from 0 to 1 and ' +\r\n\t\t\t\t'cannot be greater than (1 - deceleration)');\r\n\t\t}\r\n\r\n\t\tthis._acceleration = acceleration;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current value for the deceleration, default is 0.\r\n\t */\r\n\tgetDeceleration() {\r\n\t\treturn this._deceleration;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the value for the deceleraion. The value must be between 0 and 1-deceleration.\r\n\t * @param deceleration new deceleration\r\n\t */\r\n\tsetDeceleration(deceleration) {\r\n\t\tthis._throwIfStarted();\r\n\t\tif (deceleration < 0 || deceleration > 1 || deceleration > (1 - this._acceleration)) {\r\n\t\t\tthrow Error('Deceleration value must be from 0 to 1 ' +\r\n\t\t\t\t'and cannot be greater than (1 - acceleration)');\r\n\t\t}\r\n\r\n\t\tthis._deceleration = deceleration;\r\n\t}\r\n\r\n\t/**\r\n\t * In the default implementation the preprocessor takes into the account\r\n\t * only acceleration and deceleration. In more advanced implementation it might\r\n\t * use easing functions or any other more advanced transformations.\r\n\t */\r\n\t_timingEventPreprocessor(fraction) {\r\n\t\treturn this._accelerationDecelerationPreprocessor(fraction);\r\n\t}\r\n\r\n\t/**\r\n\t * Calculates the fraction with the respect to the acceleration and deceleration values.\r\n\t * See the SMIL 2.0 specification for details on this calculation. You shouldn't really dive deep\r\n\t * into the details of this particular piece of code, if you're not very curious.\r\n\t */\r\n\t_accelerationDecelerationPreprocessor(fraction) {\r\n\t\tif (this._acceleration || this._deceleration) {\r\n\t\t\tlet runRate = 1 / (1 - this._acceleration / 2 - this._deceleration / 2);\r\n\r\n\t\t\tif (fraction < this._acceleration) {\r\n\t\t\t\tfraction *= runRate * (fraction / this._acceleration) / 2;\r\n\t\t\t} else if (fraction > (1 - this._deceleration)) {\r\n\t\t\t\t// time spent in deceleration portion\r\n\t\t\t\tlet tdec = fraction - (1 - this._deceleration);\r\n\t\t\t\t// proportion of tdec to total deceleration time\r\n\t\t\t\tlet pdec = tdec / this._deceleration;\r\n\r\n\t\t\t\tfraction = runRate * (1 - (this._acceleration / 2) -\r\n\t\t\t\t\tthis._deceleration + tdec * (2 - pdec) / 2);\r\n\t\t\t} else {\r\n\t\t\t\tfraction = runRate * (fraction - (this._acceleration / 2));\r\n\t\t\t}\r\n\t\t\t// clamp fraction to [0,1] since above calculations may\r\n\t\t\t// cause rounding errors\r\n\t\t\tif (fraction < 0) {\r\n\t\t\t\tfraction = 0;\r\n\t\t\t} else if (fraction > 1) {\r\n\t\t\t\tfraction = 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn fraction;\r\n\t}\r\n\r\n\t/**\r\n\t * This function should be called by the external timer to update the state\r\n\t * of the animator.\r\n\t * @param deltaTime - time passed since the last upate. 0 is valid value.\r\n\t */\r\n\tupdate(deltaTime) {\r\n\t\t// Will return undefined\r\n\t\tif (!this._started) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// If the animator is paused we pass 0 as deltaTime - like nothing has changed\r\n\t\tif (!this._running) {\r\n\t\t\tdeltaTime = 0;\r\n\t\t}\r\n\r\n\t\tthis._timeSinceLoopStart += deltaTime;\r\n\r\n\t\t// If we exceeded the loop time, we must take care of what to do next:\r\n\t\t// adjust the direction of the animation, call hook functions etc.\r\n\t\tif (this._timeSinceLoopStart >= this._duration) {\r\n\r\n\t\t\t// Just in case, we skipped more than one loop, determine how many loops did we miss\r\n\t\t\tlet loopsSkipped = Math.floor(this._timeSinceLoopStart / this._duration);\r\n\r\n\t\t\tthis._timeSinceLoopStart %= this._duration;\r\n\r\n\t\t\t// truncate to the number of loops skipped. Even if we skipped 5 loops,\r\n\t\t\t// but there was only 3 left, we don't want to fire extra listeners.\r\n\t\t\tif (this._repeatCount !== Animator.INFINITE && loopsSkipped >\r\n\t\t\t\t\tthis._repeatCount - this._loopsDone) {\r\n\t\t\t\tloopsSkipped = this._repeatCount - this._loopsDone;\r\n\t\t\t}\r\n\r\n\t\t\t// Call the hook for each of the skipped loops\r\n\t\t\tfor (let i = 1; i <= loopsSkipped; i++) {\r\n\t\t\t\tthis._loopsDone++;\r\n\t\t\t\tthis._reverseLoop = this._repeatBehavior === Animator.RepeatBehavior.REVERSE &&\r\n\t\t\t\t\tthis._loopsDone % 2 === 1;\r\n\t\t\t\tthis._onLoopEnd(this._loopsDone);\r\n\t\t\t}\r\n\r\n\t\t\t// Check if we reached the end of the animation\r\n\t\t\tif (this._repeatCount !== Animator.INFINITE &&\r\n\t\t\t\t\tthis._loopsDone === this._repeatCount) {\r\n\t\t\t\tthis._onAnimationEnd();\r\n\t\t\t\tthis.stop();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// If this is the loop that is going backwards - reverse the fraction as well\r\n\t\tlet fraction = this._timeSinceLoopStart / this._duration;\r\n\r\n\t\tif (this._reverseLoop) {\r\n\t\t\tfraction = 1 - fraction;\r\n\t\t}\r\n\r\n\t\t// Give away for preprocessing (acceleration/deceleration, easing functions etc)\r\n\t\tfraction = this._timingEventPreprocessor(fraction);\r\n\r\n\t\t// Call update\r\n\t\tthis._onUpdate(fraction, this._loopsDone);\r\n\t\treturn fraction;\r\n\t}\r\n\r\n\t/**\r\n\t * Hook function. Override in subclass to provide the specific\r\n\t * implementation of the updates. For example, you may change the\r\n\t * active frame, adjust the coordinates or color of the object.\r\n\t *\r\n\t * @param fraction the current fraction of the animation: from 0 to 1\r\n\t * @param loopsDone how many loops done already.\r\n\t */\r\n\t_onUpdate(fraction, loopsDone) {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Hook function - called when the loop ends. Should be owerwritten in\r\n\t * subclasses if you need any extra functionality here.\r\n\t * @param loopsDone the number of loops done from the start of the animation,\r\n\t * the latest loop is included.\r\n\t */\r\n\t_onLoopEnd(loopsDone) {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Hook function - called when the animation ends to be owerwritten in\r\n\t * subclasses if you need any extra functionality here.\r\n\t */\r\n\t_onAnimationEnd() {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * This function is called to ensure that the animator is not running\r\n\t * (changing the setting of the running animator is not allowed)\r\n\t */\r\n\t_throwIfStarted() {\r\n\t\tif (this._started) {\r\n\t\t\tthrow Error('Cannot change property on the started animator');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A possible parameter to setLoopCount.\r\n */\r\nAnimator.INFINITE = -1;\r\n\r\n/**\r\n * RepeatBehavior determines what animator does after reaching the end of the loop.\r\n * If it is set to Animator.RepeatBehavior.LOOP, then the next loop will start from 0 again,\r\n * proceeding to 1. If the behavior is Animator.RepeatBehavior.REVERSE the odd loops will run\r\n * backwards - from 1 to 0. Obviously setting this parameter only makes sense when the\r\n * number of loops is more than 1.\r\n */\r\nAnimator.RepeatBehavior = {\r\n\tLOOP: 1,\r\n\tREVERSE: 2\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/Animator.js\n **/","'use strict';\n\nimport Rect from './Rect';\n\nexport default class DirtyRectangleManager {\n\n\tconstructor(allDirtyThreshold = 0.5) {\n\t\tthis._allDirtyThreshold = allDirtyThreshold;\n\t\tthis._viewport = new Rect(0, 0, 100, 100);\n\t\tthis._dirtyRect = null;\n\t\tthis._allDirty = true;\n\t\tthis.markAllDirty();\n\t}\n\n\tclear() {\n\t\tthis._dirtyRect = null;\n\t\tthis._allDirty = false;\n\t}\n\n\tmarkDirty(rect) {\n\t\tif (!(rect.width || rect.height) || this._allDirty) {\n\t\t\treturn;\n\t\t}\n\n\t\trect = this._viewport.intersection(rect);\n\n\t\tif (!rect) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._dirtyRect) {\n\t\t\tthis._dirtyRect = this._dirtyRect.convexHull(rect);\n\t\t\tif (this._dirtyRect.width * this._dirtyRect.height >\n\t\t\t\tthis._allDirtyThreshold * this._viewport.width * this._viewport.height) {\n\t\t\t\tthis.markAllDirty();\n\t\t\t}\n\t\t} else {\n\t\t\tthis._dirtyRect = this._viewport.intersection(rect);\n\t\t}\n\t}\n\n\tmarkAllDirty() {\n\t\tthis._allDirty = true;\n\t\tthis._dirtyRect = this._viewport.copy();\n\t}\n\n\tisClean() {\n\t\treturn !(this._dirtyRect);\n\t}\n\n\tisAllDirty() {\n\t\treturn this._allDirty;\n\t}\n\n\tgetDirtyRect() {\n\t\treturn this._dirtyRect;\n\t}\n\n\tsetViewport(width, height) {\n\t\tif (this._viewport.width === width && this._viewport.height === height) {\n\t\t\treturn;\n\t\t}\n\t\tthis._viewport.width = width;\n\t\tthis._viewport.height = height;\n\t\tthis.markAllDirty();\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/DirtyRectangleManager.js\n **/","'use strict';\r\n\r\n/**\r\n * TODO: refactor-out object destructuring\r\n */\r\nexport default class Rect {\r\n\r\n\tconstructor(x, y, width, height) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t}\r\n\r\n\tcopy() {\r\n\t\treturn new Rect(this.x, this.y, this.width, this.height);\r\n\t}\r\n\r\n\tequals(r2) {\r\n\t\treturn (this.x === r2.x &&\r\n\t\tthis.y === r2.y &&\r\n\t\tthis.width === r2.width &&\r\n\t\tthis.height === r2.height);\r\n\t}\r\n\r\n\ttoString() {\r\n\t\treturn (`[x=${this.x}, y=${this.y},` +\r\n\t\t\t`width=${this.width}, height=${this.height}]`);\r\n\t}\r\n\r\n\tintersects(x2, y2, w2, h2) {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet r = x2;\r\n\r\n\t\t\tx2 = r.x;\r\n\t\t\ty2 = r.y;\r\n\t\t\tw2 = r.width;\r\n\t\t\th2 = r.height;\r\n\t\t}\r\n\r\n\t\treturn (this.x <= x2 + w2 && this.x + this.width >= x2 &&\r\n\t\t\tthis.y <= y2 + h2 && this.y + this.height >= y2);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns true if the given rect fully covers the other one\r\n\t */\r\n\tcovers(x2, y2, w2, h2) {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet r = x2;\r\n\r\n\t\t\tx2 = r.x;\r\n\t\t\ty2 = r.y;\r\n\t\t\tw2 = r.width;\r\n\t\t\th2 = r.height;\r\n\t\t}\r\n\r\n\t\treturn (x2 >= this.x &&\r\n\t\t\ty2 >= this.y &&\r\n\t\t\tx2 + w2 <= this.x + this.width &&\r\n\t\t\ty2 + h2 <= this.y + this.height);\r\n\t}\r\n\r\n\t/**\r\n\t * Assumes that neither of rectangles is zero-area\r\n\t */\r\n\tconvexHull(x2, y2, w2, h2) {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet r = x2;\r\n\r\n\t\t\tx2 = r.x;\r\n\t\t\ty2 = r.y;\r\n\t\t\tw2 = r.width;\r\n\t\t\th2 = r.height;\r\n\t\t}\r\n\r\n\t\tlet x = Math.min(this.x, x2);\r\n\t\tlet y = Math.min(this.y, y2);\r\n\t\tlet width = Math.max(this.x + this.width, x2 + w2) - x;\r\n\t\tlet height = Math.max(this.y + this.height, y2 + h2) - y;\r\n\r\n\t\treturn new Rect(x, y, width, height);\r\n\t}\r\n\r\n\tintersection(x2, y2, w2, h2) {\r\n\t\tif (arguments.length === 1) {\r\n\t\t\tlet r = x2;\r\n\r\n\t\t\tx2 = r.x;\r\n\t\t\ty2 = r.y;\r\n\t\t\tw2 = r.width;\r\n\t\t\th2 = r.height;\r\n\t\t}\r\n\r\n\t\tlet x = Math.max(this.x, x2);\r\n\t\tlet y = Math.max(this.y, y2);\r\n\t\tlet width = Math.min(this.x + this.width, x2 + w2) - x;\r\n\t\tlet height = Math.min(this.y + this.height, y2 + h2) - y;\r\n\r\n\t\tif (width <= 0 || height <= 0) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn new Rect(x, y, width, height);\r\n\t}\r\n\r\n\tcontainsPoint(x, y) {\r\n\t\treturn x >= this.x && x < this.x + this.width &&\r\n\t\t\ty >= this.y && y < this.y + this.height;\r\n\t}\r\n\r\n\t/**\r\n\t * Given a rectangular grid, with the grid cell size cellW, cellH test which cells\r\n\t * are overlapped by the rectangle. cellsInRow and cellsInColumn are used only\r\n\t * to limit the coordinates (to prevent going out of bounds in arrays for example)\r\n\t *\r\n\t */\r\n\tgetOverlappingGridCells(cellW, cellH, cellsInRow, cellsInColumn) {\r\n\t\tlet rectX = Math.max(0, Math.floor(this.x / cellW));\r\n\t\tlet rectY = Math.max(0, Math.floor(this.y / cellH));\r\n\t\tlet rectWidth = Math.min(cellsInRow - rectX,\r\n\t\t\tMath.floor((this.x + this.width) / cellW) - rectX + 1);\r\n\t\tlet rectHeight = Math.min(cellsInColumn - rectY,\r\n\t\t\tMath.floor((this.y + this.height) / cellH) - rectY + 1);\r\n\r\n\t\treturn new Rect(rectX, rectY, rectWidth, rectHeight);\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/Rect.js\n **/","'use strict';\n\nimport Keyboard from './input/Keyboard';\nimport TouchInputHandler from './input/TouchInputHandler';\nimport MouseInputHandler from './input/MouseInputHandler';\nimport DirtyRectangleManager from './DirtyRectangleManager';\nimport ImageManager from './ImageManager';\nimport {isTouchDevice} from './utils';\n\nexport default class Engine {\n\n\tconstructor(id, vpWidth, vpHeight) {\n\t\tthis._canvas = document.getElementById(id);\n\t\tthis._ctx = this._canvas.getContext('2d');\n\t\tthis._scenes = {};\n\t\tthis._currentScene = null;\n\t\tthis._lastTick = Date.now();\n\t\tthis._input = isTouchDevice() ? TouchInputHandler : MouseInputHandler;\n\t\tthis._keyboard = new Keyboard(this._canvas);\n\n\t\tthis._dirtyRects = new DirtyRectangleManager();\n\t\tthis._dirtyRects.setViewport(vpWidth, vpHeight);\n\t\tthis._resourceManager = new ImageManager();\n\t\tthis._tick = this._tick.bind(this);\n\n\t\tthis._gameContext = {\n\t\t\tresourceManager: this._resourceManager,\n\t\t\twidth: this._canvas.width,\n\t\t\theight: this._canvas.height\n\t\t};\n\t}\n\n\tloadResources(resourceData, onDone) {\n\t\tthis._resourceManager.load(resourceData, onDone, function onProgress() {\n\t\t});\n\t}\n\n\tgetResource(name) {\n\t\treturn this._resourceManager.get(name);\n\t}\n\n\tscene(id, scene) {\n\t\tif (scene === undefined) {\n\t\t\tthis._useScene(id);\n\t\t} else {\n\t\t\tscene.init(this._gameContext);\n\t\t\tthis._scenes[id] = scene;\n\t\t\tif (!this._currentScene) {\n\t\t\t\tthis._useScene(id);\n\t\t\t}\n\t\t}\n\t}\n\n\tstart() {\n\t\tthis._lastTick = Date.now();\n\t\tthis._tick();\n\t}\n\n\t_tick() {\n\t\trequestAnimationFrame(this._tick);\n\n\t\t// delta time\n\t\tlet dt = Date.now() - this._lastTick;\n\n\t\tthis._lastTick = Date.now();\n\n\t\t// frame context\n\t\tlet fc = {\n\t\t\tdt: dt,\n\t\t\tinput: this._input,\n\t\t\tkeyboard: this._keyboard,\n\t\t\tgraphContext: this._ctx,\n\t\t\twidth: this._canvas.width,\n\t\t\theight: this._canvas.height,\n\t\t\tdirtyRects: this._dirtyRects\n\t\t};\n\n\t\tif (!this._currentScene) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._update(fc);\n\n\t\tif (!this._dirtyRects.isClean()) {\n\t\t\tthis._draw(fc);\n\t\t}\n\n\t\tthis._keyboard.resetPressed();\n\t}\n\n\t_update(fc) {\n\t\tthis._currentScene.update(fc);\n\t}\n\n\t_draw(fc) {\n\t\tlet rect = this._dirtyRects.getDirtyRect();\n\n\t\tthis._ctx.save();\n\t\tthis._ctx.beginPath();\n\t\tthis._ctx.rect(rect.x, rect.y, rect.width, rect.height);\n\t\tthis._ctx.clip();\n\t\tthis._currentScene.draw(fc);\n\t\tthis._dirtyRects.clear();\n\t\tthis._ctx.restore();\n\t}\n\n\t_useScene(id) {\n\t\tthis._currentScene = this._scenes[id];\n\t\tthis._dirtyRects.markAllDirty();\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/Engine.js\n **/","'use strict';\n\nimport EventEmitter from '../EventEmitter';\n\nexport default class Keyboard extends EventEmitter {\n\tconstructor(element) {\n\t\tsuper();\n\n\t\tthis._element = null;\n\t\tthis._stopDomEvents = true;\n\t\tthis._keys = [];\n\t\tthis._pressed = [];\n\n\t\tthis._onKeyDown = this._onKeyDown.bind(this);\n\t\tthis._onKeyUp = this._onKeyUp.bind(this);\n\n\t\tthis.attachTo(element);\n\t}\n\n\tdetach() {\n\t\tif (this._element) {\n\t\t\tthis._detachDomListeners();\n\t\t\tthis._element = null;\n\t\t}\n\t}\n\n\tattachTo(el) {\n\t\tif (this._element) {\n\t\t\tthis._detachDomListeners();\n\t\t}\n\n\t\tthis._element = el;\n\t\tif (el) {\n\t\t\tthis._attachDomListeners();\n\t\t}\n\t\tel.focus();\n\t}\n\n\tgetStopDomEvents() {\n\t\treturn this._stopDomEvents;\n\t}\n\n\tsetStopDomEvents(stopDomEvents) {\n\t\tthis._stopDomEvents = stopDomEvents;\n\t}\n\n\tisDown(code) {\n\t\treturn this._keys[code];\n\t}\n\n\tisPressed(code) {\n\t\treturn this._pressed[code];\n\t}\n\n\tresetPressed() {\n\t\tthis._pressed = [];\n\t}\n\n\t_stopEventIfRequired(e) {\n\t\tif (this._stopDomEvents) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t}\n\t}\n\n\t_onKeyDown(e) {\n\t\tthis._pressed[e.keyCode] = !this.isDown(e.keyCode);\n\t\tthis._keys[e.keyCode] = true;\n\t\tthis._stopEventIfRequired(e);\n\t}\n\n\t_onKeyUp(e) {\n\t\tthis._keys[e.keyCode] = false;\n\t\tthis._pressed[e.keyCode] = false;\n\t\tthis._stopEventIfRequired(e);\n\t}\n\n\t/**\n\t * Attach the listeners to the mouseXXX DOM events\n\t */\n\t_attachDomListeners() {\n\t\tlet el = this._element;\n\n\t\tel.addEventListener('keydown', this._onKeyDown, false);\n\t\tel.addEventListener('keyup', this._onKeyUp, false);\n\t}\n\n\t/**\n\t * Attach the listeners to the mouseXXX DOM events\n\t */\n\t_detachDomListeners() {\n\t\tlet el = this._element;\n\n\t\tel.removeEventListener('keydown', this._onKeyDown, false);\n\t\tel.removeEventListener('keyup', this._onKeyUp, false);\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/input/Keyboard.js\n **/","'use strict';\n\nexport default class EventEmitter {\n\tconstructor() {\n\t\tthis._listeners = {};\n\t}\n\n\taddListener(type, listener) {\n\t\tif (typeof listener !== 'function') {\n\t\t\tthrow Error('Listener must be a function');\n\t\t}\n\n\t\tif (!this._listeners[type]) {\n\t\t\tthis._listeners[type] = [];\n\t\t}\n\n\t\tthis._listeners[type].push(listener);\n\t}\n\n\tremoveListener(type, listener) {\n\t\tif (typeof listener !== 'function') {\n\t\t\tthrow Error('Listener must be a function');\n\t\t}\n\n\t\tif (!this._listeners[type]) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet position = this._listeners[type].indexOf(listener);\n\n\t\tif (position !== -1) {\n\t\t\tthis._listeners[type].splice(position, 1);\n\t\t}\n\t}\n\n\tremoveAllListeners(type) {\n\t\tif (type) {\n\t\t\tthis._listeners[type] = [];\n\t\t} else {\n\t\t\tthis._listeners = {};\n\t\t}\n\t}\n\n\temit(type, event) {\n\t\tif (!(this._listeners[type] && this._listeners[type].length)) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (let i = 0; i < this._listeners[type].length; i++) {\n\t\t\tthis._listeners[type][i].call(this, event);\n\t\t}\n\t}\n}\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/EventEmitter.js\n **/","'use strict';\n\n/**\n * The implementation of the InputHandler for the touch interfaces.\n * Based on the touch events.\n */\n\nimport InputHandlerBase from './InputHandlerBase';\n\nexport default class TouchInputHandler extends InputHandlerBase {\n\n\tconstructor(element) {\n\t\tsuper(element);\n\t\tthis._isDown = false;\n\t\tthis._lastInteractionCoordinates = {\n\t\t\tx: 0,\n\t\t\ty: 0\n\t\t};\n\t\tthis._onDownDomEvent = this._onDownDomEvent.bind(this);\n\t\tthis._onUpDomEvent = this._onUpDomEvent.bind(this);\n\t\tthis._onMoveDomEvent = this._onMoveDomEvent.bind(this);\n\t\tthis.attachTo(element);\n\t}\n\n\tisDown() {\n\t\treturn this._isDown;\n\t}\n\n\tgetCoordinates() {\n\t\treturn this._lastInteractionCoordinates;\n\t}\n\n\t_attachDomListeners() {\n\t\tlet el = this._element;\n\n\t\tel.addEventListener('touchstart', this._onDownDomEvent, false);\n\t\tel.addEventListener('touchend', this._onUpDomEvent, false);\n\t\tel.addEventListener('touchcancel', this._onUpDomEvent, false);\n\t\tel.addEventListener('touchmove', this._onMoveDomEvent, false);\n\t}\n\n\t_detachDomListeners() {\n\t\tlet el = this._element;\n\n\t\tel.removeEventListener('touchstart', this._onDownDomEvent, false);\n\t\tel.removeEventListener('touchend', this._onUpDomEvent, false);\n\t\tel.removeEventListener('touchcancel', this._onUpDomEvent, false);\n\t\tel.removeEventListener('touchmove', this._onMoveDomEvent, false);\n\t}\n\n\t_onDownDomEvent(e) {\n\t\tthis._lastInteractionCoordinates = this._getInputCoordinates(e);\n\t\tthis._isDown = true;\n\t\tsuper._onDownDomEvent(e);\n\t}\n\n\t_onUpDomEvent(e) {\n\t\tthis.emit('up', {\n\t\t\tx: this._lastInteractionCoordinates.x,\n\t\t\ty: this._lastInteractionCoordinates.y,\n\t\t\tmoved: this._moving,\n\t\t\tdomEvent: e\n\t\t});\n\t\tthis._stopEventIfRequired(e);\n\t\tthis._isDown = false;\n\t\tthis._moving = false;\n\t}\n\n\t_onMoveDomEvent(e) {\n\t\tthis._lastInteractionCoordinates = this._getInputCoordinates(e);\n\t\tsuper._onMoveDomEvent(e);\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/input/TouchInputHandler.js\n **/","'use strict';\n\nimport EventEmitter from '../EventEmitter';\n\n/**\n * The \"abstract\" base for MouseInputHandler and TouchInputHandler. This class is not\n * supposed to be instantiated directly. It provides the common base for touch and\n * mouse input handling.\n *\n * @param element the DOM element to work with - concrete input handlers will\n * register as event handlers of this element. In gamedev projects the\n * element is usually the main canvas\n */\nexport default class InputHandlerBase extends EventEmitter {\n\n\tconstructor(element) {\n\t\tsuper();\n\n\t\t// The DOM element, descendants will set this in attach()\n\t\tthis._element = null;\n\t\tthis._moving = false;\n\t\tthis._lastMoveCoordinates = null;\n\t\tthis._moveThreshold = 10;\n\t\tthis._stopDomEvents = false;\n\t}\n\n\tdetach() {\n\t\tif (this._element) {\n\t\t\tthis._detachDomListeners();\n\t\t\tthis._element = null;\n\t\t}\n\t}\n\n\tattachTo(el) {\n\t\tif (this._element) {\n\t\t\tthis._detachDomListeners();\n\t\t}\n\n\t\tthis._element = el;\n\t\tif (el) {\n\t\t\tthis._attachDomListeners();\n\t\t}\n\t}\n\n\tgetMoveThreshold() {\n\t\treturn this._moveThreshold;\n\t}\n\n\tsetMoveThreshold(moveThreshold) {\n\t\tthis._moveThreshold = moveThreshold;\n\t}\n\n\tgetStopDomEvents() {\n\t\treturn this._stopDomEvents;\n\t}\n\n\tsetStopDomEvents(stopDomEvents) {\n\t\tthis._stopDomEvents = stopDomEvents;\n\t}\n\n\t/**\n\t * Listens to the \"down\" DOM events: mousedown and touchstart.\n\t * @param e DOM Event\n\t */\n\t_onDownDomEvent(e) {\n\t\t// We must save this coordinates to support the moveThreshold - this\n\t\t// may be the starting point of the movement, we can't simply\n\t\tlet coords = this._lastMoveCoordinates = this._getInputCoordinates(e);\n\n\t\t// Emit \"down\" event - all coordinates together with the\n\t\t// original DOM event are passed to listeners\n\t\tthis.emit('down', {x: coords.x, y: coords.y, domEvent: e});\n\n\t\t// Usually we want to stop original the DOM events\n\t\t// from further browser processing.\n\t\tthis._stopEventIfRequired(e);\n\t}\n\n\t/**\n\t * Listens to the \"up\" DOM events: mouseup and touchend. Touchend\n\t * doesn't have any coordinates associated with it so this function\n\t * will be overridden in TouchInputHandler\n\t * @param e DOM Event\n\t */\n\t_onUpDomEvent(e) {\n\t\t// Works exactly the same way as _onDownDomEvent\n\t\tlet coords = this._getInputCoordinates(e);\n\n\t\tthis.emit('up', {\n\t\t\tx: coords.x,\n\t\t\ty: coords.y,\n\t\t\tmoved: this._moving,\n\t\t\tdomEvent: e\n\t\t});\n\n\t\tthis._stopEventIfRequired(e);\n\n\t\t// The interaction is ended. Reset the flag\n\t\tthis._moving = false;\n\t}\n\n\t/**\n\t * Listens to the \"move\" DOM events: mousemove and touchmove.\n\t * This function keeps track of the distance travelled since the last\n\t * \"move\" action, besides it ignores the movement and swallows the event\n\t * if we are still within the _moveThreshold\n\t * @param e DOM event\n\t */\n\t_onMoveDomEvent(e) {\n\t\tlet coords = this._getInputCoordinates(e);\n\n\t\t// Calculate deltas\n\t\tlet deltaX = coords.x - this._lastMoveCoordinates.x;\n\t\tlet deltaY = coords.y - this._lastMoveCoordinates.y;\n\n\t\t// Check threshold, if the distance from the initial\n\t\t// tap to the current position is more than the threshold\n\t\t// value - qualify it as a real movement\n\t\tlet deltaMove = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n\n\t\tif (!this._moving && deltaMove > this._moveThreshold) {\n\t\t\tthis._moving = true;\n\t\t}\n\n\t\t// If the current interaction is \"moving\" (we crossed the threshold already) then emit\n\t\t// the event, otherwise, just ignore the interaction.\n\t\tif (this._moving) {\n\t\t\tthis.emit('move', {\n\t\t\t\tx: coords.x,\n\t\t\t\ty: coords.y,\n\t\t\t\tdeltaX: deltaX,\n\t\t\t\tdeltaY: deltaY,\n\t\t\t\tdomEvent: e\n\t\t\t});\n\t\t\tthis._lastMoveCoordinates = coords;\n\t\t}\n\n\t\tthis._stopEventIfRequired(e);\n\t};\n\n\t_stopEventIfRequired(e) {\n\t\tif (this._stopDomEvents) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t}\n\t}\n\n\t_getInputCoordinates(e) {\n\t\tlet element = this._element;\n\t\tlet coords = e.targetTouches ? e.targetTouches[0] : e;\n\n\t\tlet x = (coords.pageX || coords.clientX + document.body.scrollLeft) -\n\t\t\telement.offsetLeft;\n\n\t\tlet y = (coords.pageY || coords.clientY + document.body.scrollTop) -\n\t\t\telement.offsetTop;\n\n\t\t// TODO: Change to destructuring\n\t\treturn {\n\t\t\tx: x,\n\t\t\ty: y\n\t\t};\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/input/InputHandlerBase.js\n **/","'use strict';\n\nimport InputHandlerBase from './InputHandlerBase';\n\n/**\n * The implementation of the InputHandler for the desktop\n * browser based on the mouse events.\n */\nexport default class MouseInputHandler extends InputHandlerBase {\n\n\tconstructor(element) {\n\t\tsuper(element);\n\n\t\t// We need additional property to track if the\n\t\t// mouse is down.\n\t\tthis._mouseDown = false;\n\n\t\t// Bound functions\n\t\tthis._onDownDomEvent = this._onDownDomEvent.bind(this);\n\t\tthis._onUpDomEvent = this._onUpDomEvent.bind(this);\n\t\tthis._onMoveDomEvent = this._onMoveDomEvent.bind(this);\n\t\tthis._onMouseOut = this._onMouseOut.bind(this);\n\t\tthis._onHoverDomEvent = this._onHoverDomEvent.bind(this);\n\n\t\tthis._coords = {x: -1, y: -1};\n\t\tthis.attachTo(element);\n\t}\n\n\tisDown() {\n\t\treturn this._mouseDown;\n\t}\n\n\tgetCoordinates() {\n\t\treturn this._coords;\n\t}\n\n\t/**\n\t * Attach the listeners to the mouseXXX DOM events\n\t */\n\t_attachDomListeners() {\n\t\tlet el = this._element;\n\n\t\tel.addEventListener('mousedown', this._onDownDomEvent, false);\n\t\tel.addEventListener('mouseup', this._onUpDomEvent, false);\n\t\tel.addEventListener('mousemove', this._onMoveDomEvent, false);\n\t\tel.addEventListener('mouseout', this._onMouseOut, false);\n\t}\n\n\t/**\n\t * Attach the listeners to the mouseXXX DOM events\n\t */\n\t_detachDomListeners() {\n\t\tlet el = this._element;\n\n\t\tel.removeEventListener('mousedown', this._onDownDomEvent, false);\n\t\tel.removeEventListener('mouseup', this._onUpDomEvent, false);\n\t\tel.removeEventListener('mousemove', this._onMoveDomEvent, false);\n\t\tel.removeEventListener('mouseout', this._onMouseOut, false);\n\t}\n\n\t/**\n\t * This method (and the next one) is overridden,\n\t * because we have to track the state of the mouse.\n\t * This could also be done in the separate listener.\n\t */\n\t_onDownDomEvent(e) {\n\t\tthis._mouseDown = true;\n\t\tsuper._onDownDomEvent(e);\n\t}\n\n\t_onUpDomEvent(e) {\n\t\tthis._mouseDown = false;\n\t\tInputHandlerBase.prototype._onUpDomEvent.call(this, e);\n\t}\n\n\t/**\n\t * We process the move event only if the mouse button is\n\t * pressed, otherwise the DOM event is ignored.\n\t */\n\t_onMoveDomEvent(e) {\n\t\tif (this._mouseDown) {\n\t\t\tsuper._onMoveDomEvent(e);\n\t\t} else {\n\t\t\tthis._onHoverDomEvent(e);\n\t\t}\n\t}\n\n\t/**\n\t * Hover is for pointer-enabled interfaces. Should rename\n\t * move -> drag\n\t * hover -> move\n\t *\n\t * TODO: support deltas in hover\n\t */\n\t_onHoverDomEvent(e) {\n\t\tlet coords = this._coords = this._getInputCoordinates(e);\n\n\t\tthis.emit('hover', {\n\t\t\tx: coords.x, y: coords.y,\n\t\t\t/* deltaX: deltaX, deltaY: deltaY, */ domEvent: e\n\t\t});\n\t\tthis._stopEventIfRequired(e);\n\t}\n\n\t_onMouseOut() {\n\t\tthis._mouseDown = false;\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/input/MouseInputHandler.js\n **/","'use strict';\n\nexport default class ImageManager {\n\tconstructor() {\n\t\tthis._imageQueue = [];\n\t\tthis._images = {};\n\t}\n\n\t_addImage(key, path) {\n\t\tthis._imageQueue.push({\n\t\t\tkey: key,\n\t\t\tpath: path\n\t\t});\n\t};\n\n\tload(images, onDone, onProgress) {\n\t\tlet noop = () => {};\n\t\tlet queue = this._imageQueue;\n\n\t\tfor (let im in images) {\n\t\t\tthis._addImage(im, images[im]);\n\t\t}\n\n\t\tonDone = onDone || noop;\n\t\tonProgress = onProgress || noop;\n\n\t\tthis._imageQueue = [];\n\n\t\tif (queue.length === 0) {\n\t\t\tonProgress(0, 0, null, null, true);\n\t\t\treturn;\n\t\t}\n\n\t\tlet itemCounter = {\n\t\t\tloaded: 0,\n\t\t\ttotal: queue.length\n\t\t};\n\n\t\tfor (let i = 0; i < queue.length; i++) {\n\t\t\tthis._loadItem(queue[i], itemCounter, onDone, onProgress);\n\t\t}\n\t}\n\n\t_loadItem(queueItem, itemCounter, onDone, onProgress) {\n\t\tlet self = this;\n\t\tlet img = new Image();\n\n\t\timg.onload = function () {\n\t\t\tself._images[queueItem.key] = img;\n\t\t\tself._onItemLoaded(queueItem, itemCounter,\n\t\t\t\tonDone, onProgress, true);\n\t\t};\n\n\t\timg.onerror = function () {\n\t\t\tself._images[queueItem.key] = self._placeholder;\n\t\t\tself._onItemLoaded(queueItem, itemCounter,\n\t\t\t\tonDone, onProgress, false);\n\t\t};\n\t\timg.src = queueItem.path;\n\t}\n\n\t_onItemLoaded(queueItem, itemCounter, onDone, onProgress, success) {\n\t\titemCounter.loaded++;\n\t\tonProgress(itemCounter.loaded, itemCounter.total,\n\t\t\tqueueItem.key, queueItem.path, success);\n\n\t\tif (itemCounter.loaded === itemCounter.total) {\n\t\t\tonDone();\n\t\t}\n\t}\n\n\tget(key) {\n\t\treturn this._images[key];\n\t}\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/ImageManager.js\n **/","'use strict';\n\n/**\n * Checks if we're working with the touchscreen or with the\n * regular desktop browser. Used to determine, what kind of events should we use:\n * mouse events or touch events.\n */\nfunction isTouchDevice() {\n\treturn ('ontouchstart' in document.documentElement);\n}\n\nfunction dist(x1, y1, x2, y2) {\n\treturn Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n}\n\nexport {isTouchDevice, dist};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/utils.js\n **/","'use strict';\n\nexport default class GameObject {\n\tconstructor() {\n\t\tthis._x = 0;\n\t\tthis._y = 0;\n\t\tthis._width = 0;\n\t\tthis._height = 0;\n\n\t\tthis._id = GameObject.uid++;\n\t\tthis._name = 'object_' + this._id;\n\n\t\tthis._anchorX = 0;\n\t\tthis._anchorY = 0;\n\n\t\tthis._rot = 0;\n\n\t\tthis._scene = null;\n\t\tthis._parent = null;\n\t\tthis._children = [];\n\t}\n\n\tupdate(fc) {\n\t\tthis._children.forEach(it => it.update(fc));\n\t}\n\n\tdraw(fc) {\n\t\tthis._children.forEach(it => it.draw(fc));\n\t}\n\n\taddChild(child) {\n\t\tthis._children.push(child);\n\t\tchild.setParent(this);\n\t}\n\n\tremoveChild(child) {\n\t\tlet idx = this._children.indexOf(child);\n\n\t\tif (idx > -1) {\n\t\t\tchild.setParent(null);\n\t\t\treturn this._children.splice(idx, 1);\n\t\t}\n\t}\n\n\tgetChildren() {\n\t\treturn this._children;\n\t}\n\n\tsetParent(parent) {\n\t\tthis._parent = parent;\n\t}\n\n\tsetScene(scene) {\n\t\tthis._scene = scene;\n\t}\n\n\tgetScene() {\n\t\treturn this._scene;\n\t}\n\n\tgetParent() {\n\t\treturn this._parent;\n\t}\n\n\tgetId() {\n\t\treturn this._id;\n\t}\n\n\tgetName() {\n\t\treturn this._name;\n\t}\n\n\tsetName() {\n\t\treturn this._name;\n\t}\n\n\tsetPos(x, y) {\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t}\n\n\tsetSize(w, h) {\n\t\tthis._width = w;\n\t\tthis._height = h;\n\t}\n\n\tgetWidth() {\n\t\treturn this._width;\n\t}\n\n\tgetHeight() {\n\t\treturn this._height;\n\t}\n\n\tmove(dx, dy) {\n\t\tthis._x += dx;\n\t\tthis._y += dy;\n\t}\n\n\tgetPos() {\n\t\treturn {\n\t\t\tx: this._x,\n\t\t\ty: this._y\n\t\t};\n\t}\n\n\tgetTop() {\n\t\treturn this._y;\n\t}\n\n\tgetBottom() {\n\t\treturn this._y + this._height;\n\t}\n\n\tgetLeft() {\n\t\treturn this._x;\n\t}\n\n\tgetRight() {\n\t\treturn this._x + this._width;\n\t}\n\n\tdetach() {\n\t\tif (!this._parent) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._parent.removeChild(this);\n\t}\n}\n// should be static\nGameObject.uid = 1;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/GameObject.js\n **/","'use strict';\n\nimport GameObject from './GameObject';\n\nexport default class GameScene extends GameObject {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._gameContext = null;\n\t}\n\n\tinit(gameContext) {\n\t\tthis._gameContext = gameContext;\n\t}\n\n\taddChild(child) {\n\t\tsuper.addChild(child);\n\t}\n\n\tregisterObject(obj) {\n\n\t}\n\n\tderegisterObject(obj) {\n\n\t}\n\n\tgetResource(name) {\n\t\treturn this._gameContext.resourceManager.get(name);\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/GameScene.js\n **/","'use strict';\n\nimport Rect from './Rect';\n\nlet MathUtils = {};\n\nMathUtils.getBoundingRectangle = function (points) {\n\tlet minX = Number.MAX_VALUE;\n\tlet minY = Number.MAX_VALUE;\n\tlet maxX = Number.MIN_VALUE;\n\tlet maxY = Number.MIN_VALUE;\n\n\tfor (let i = 0; i < points.length; i++) {\n\t\t// TODO Destructuring?\n\t\tlet x = points[i][0];\n\t\tlet y = points[i][1];\n\n\t\tif (x < minX) {\n\t\t\tminX = x;\n\t\t}\n\n\t\tif (x > maxX) {\n\t\t\tmaxX = x;\n\t\t}\n\n\t\tif (y < minY) {\n\t\t\tminY = y;\n\t\t}\n\n\t\tif (y > maxY) {\n\t\t\tmaxY = y;\n\t\t}\n\t}\n\n\tlet epsilon = Math.max(maxX - minX, maxY - minY) * 0.05;\n\n\tminX -= epsilon;\n\tmaxX += epsilon;\n\tminY -= epsilon;\n\tmaxY += epsilon;\n\treturn new Rect(minX, minY, maxX - minX, maxY - minY);\n};\n\n/**\n * http://stackoverflow.com/questions/563198\n */\n/* eslint-disable camelcase */\nMathUtils.linesIntersect = function (p0_x, p0_y, p1_x, p1_y, p2_x, p2_y, p3_x, p3_y) {\n\n\tlet s1_x, s1_y, s2_x, s2_y;\n\n\ts1_x = p1_x - p0_x;\n\ts1_y = p1_y - p0_y;\n\ts2_x = p3_x - p2_x;\n\ts2_y = p3_y - p2_y;\n\n\tlet s, t;\n\n\ts = (-s1_y * (p0_x - p2_x) + s1_x * (p0_y - p2_y)) / (-s2_x * s1_y + s1_x * s2_y);\n\tt = (s2_x * (p0_y - p2_y) - s2_y * (p0_x - p2_x)) / (-s2_x * s1_y + s1_x * s2_y);\n\n\tif (s >= 0 && s <= 1 && t >= 0 && t <= 1) {\n\t\treturn [p0_x + (t * s1_x), p0_y + (t * s1_y)];\n\t}\n\n\treturn null;\n};\n/* eslint-enable camelcase */\n\nMathUtils.sign = function (number) {\n\treturn number > 0 ? 1 : number === 0 ? 0 : -1;\n};\n\nMathUtils.pointInsidePolygon = function (px, py, polygon, rayX, rayY) {\n\tif ((rayX === undefined || rayY === undefined)) {\n\t\tlet rect = MathUtils.getBoundingRectangle(polygon);\n\n\t\trayX = rect.x + rect.width;\n\t\trayY = py;\n\t}\n\n\tlet intersectCount = 0;\n\n\tfor (let i = 0; i < polygon.length; i++) {\n\t\tlet polyX0 = polygon[i][0];\n\t\tlet polyY0 = polygon[i][1];\n\t\tlet polyX1 = i + 1 === polygon.length ? polygon[0][0] : polygon[i + 1][0];\n\t\tlet polyY1 = i + 1 === polygon.length ? polygon[0][1] : polygon[i + 1][1];\n\n\t\tif (MathUtils.linesIntersect(px, py, rayX, rayY, polyX0, polyY0, polyX1, polyY1)) {\n\t\t\tintersectCount++;\n\t\t}\n\t}\n\treturn intersectCount % 2 === 1;\n};\n\n// Can be probably optimized by checking that the both points are on one\n// \"side\" of the poly\nMathUtils.segmentIntersectsPolygon = function (x0, y0, x1, y1, polygon) {\n\tfor (let i = 0; i < polygon.length; i++) {\n\t\tlet polyX0 = polygon[i][0];\n\t\tlet polyY0 = polygon[i][1];\n\t\tlet polyX1 = i + 1 === polygon.length ? polygon[0][0] : polygon[i + 1][0];\n\t\tlet polyY1 = i + 1 === polygon.length ? polygon[0][1] : polygon[i + 1][1];\n\n\t\tif (MathUtils.linesIntersect(x0, y0, x1, y1, polyX0, polyY0, polyX1, polyY1)) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nMathUtils.distance = function (x0, y0, x1, y1) {\n\treturn Math.sqrt((x0 - x1) * (x0 - x1) + (y0 - y1) * (y0 - y1));\n};\n\nMathUtils.distanceSquared = function (x0, y0, x1, y1) {\n\treturn (x0 - x1) * (x0 - x1) + (y0 - y1) * (y0 - y1);\n};\n\n// http://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment\nMathUtils.distanceFromPointToSegment = function (pX, pY, segStartX, segStartY, segEndX, segEndY) {\n\n\tlet lengthSquared = MathUtils.distanceSquared(segStartX, segStartY, segEndX, segEndY);\n\n\tif (lengthSquared === 0) {\n\t\treturn MathUtils.distance(pX, pY, segStartX, segStartY);\n\t}\n\n\tlet t = ((pX - segStartX) * (segEndX - segStartX) +\n\t\t(pY - segStartY) * (segEndY - segStartY)) / lengthSquared;\n\n\tif (t < 0) {\n\t\treturn MathUtils.distance(pX, pY, segStartX, segStartY);\n\t}\n\n\tif (t > 1) {\n\t\treturn MathUtils.distance(pX, pY, segEndX, segEndY);\n\t}\n\n\treturn MathUtils.distance(pX, pY,\n\t\tsegStartX + t * (segEndX - segStartX),\n\t\tsegStartY + t * (segEndY - segStartY));\n};\n\nMathUtils.distanceFromPointToPolygon = function (px, py, polyPoints) {\n\tlet minDist = MathUtils.distanceFromPointToSegment(px, py,\n\t\tpolyPoints[polyPoints.length - 1][0], polyPoints[polyPoints.length - 1][1],\n\t\tpolyPoints[0][0], polyPoints[0][1]);\n\n\tfor (let i = 1; i < polyPoints.length; i++) {\n\t\tlet dist = MathUtils.distanceFromPointToSegment(px, py,\n\t\t\tpolyPoints[i - 1][0], polyPoints[i - 1][1],\n\t\t\tpolyPoints[i][0], polyPoints[i][1]);\n\n\t\tif (dist < minDist) {\n\t\t\tminDist = dist;\n\t\t}\n\t}\n\n\treturn minDist;\n};\n\nexport default MathUtils;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/MathUtils.js\n **/","'use strict';\n\nimport Rectangle from './Rectangle';\nimport Shapes from './Shapes';\nimport Sprite from './Sprite';\nimport SpriteSheet from './SpriteSheet';\nimport TileSheet from './TileSheet';\nimport TileMapOrtho from './map/TileMapOrtho';\n\nexport {Rectangle, Shapes, Sprite, SpriteSheet, TileSheet, TileMapOrtho};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/ui/index.js\n **/","'use strict';\n\nimport GameObject from '../GameObject';\n\nexport default class Rectangle extends GameObject {\n\n\tdraw(fc) {\n\t\tlet gc = fc.graphContext;\n\n\t\tgc.fillStyle = 'green';\n\t\tgc.fillRect(this._x, this._y, 10, 10);\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/ui/Rectangle.js\n **/","'use strict';\n\n/**\n * A number of utility methods for drawing the polygons,\n * agents (boids), arrows, fills, etc.\n */\nlet Shapes = {};\n\nShapes.drawMarker = function (ctx, x, y, size, lineWidth, color) {\n\tsize = size || 10;\n\tlineWidth = lineWidth || 5;\n\tcolor = color || 'blue';\n\tctx.save();\n\tctx.strokeStyle = color;\n\tctx.lineWidth = 5;\n\tctx.beginPath();\n\tctx.moveTo(x - size, y + size);\n\tctx.lineTo(x + size, y - size);\n\tctx.moveTo(x - size, y - size);\n\tctx.lineTo(x + size, y + size);\n\tctx.stroke();\n\tctx.restore();\n};\n\nShapes.drawArrow1 = function (ctx, x, y, length, offsetFromCenter, wingLength, wingDepth, angle) {\n\tlength = length || 50;\n\toffsetFromCenter = offsetFromCenter || 15;\n\twingLength = wingLength || 10;\n\twingDepth = wingDepth || 5;\n\tangle = angle || 0;\n\n\tctx.save();\n\tctx.fillStyle = 'green';\n\tctx.beginPath();\n\n\tif (angle) {\n\t\tctx.translate(x, y);\n\t\tctx.rotate(angle);\n\t\tctx.translate(-x, -y);\n\t}\n\n\tctx.moveTo(x + offsetFromCenter, y);\n\tctx.lineTo(x + offsetFromCenter - wingDepth, y - wingLength);\n\tctx.lineTo(x + offsetFromCenter + length, y);\n\tctx.lineTo(x + offsetFromCenter - wingDepth, y + wingLength);\n\n\tctx.closePath();\n\tctx.fill();\n\tctx.restore();\n};\n\nShapes.drawPolygon = function (ctx, points) {\n\tctx.save();\n\tctx.strokeStyle = 'lightblue';\n\tctx.fillStyle = 'rgba(173, 216, 230, 1)';\n\tctx.lineWidth = 5;\n\tctx.beginPath();\n\tctx.moveTo(points[0][0], points[0][1]);\n\tfor (let i = 1; i < points.length; i++) {\n\t\tctx.lineTo(points[i][0], points[i][1]);\n\t}\n\tctx.closePath();\n\tctx.fill();\n\tctx.stroke();\n\tctx.restore();\n};\n\nShapes.fillPolygon = function (ctx, points) {\n\tctx.save();\n\n\tctx.strokeStyle = 'grey';\n\tctx.lineWidth = 1;\n\n\tlet minX = Number.MAX_VALUE;\n\tlet minY = Number.MAX_VALUE;\n\tlet maxX = Number.MIN_VALUE;\n\tlet maxY = Number.MIN_VALUE;\n\n\tlet angle = Math.PI / 4;\n\n\tfor (let i = 0; i < points.length; i++) {\n\t\tif (points[i][0] < minX) {\n\t\t\tminX = points[i][0];\n\t\t}\n\n\t\tif (points[i][1] < minY) {\n\t\t\tminY = points[i][1];\n\t\t}\n\n\t\tif (points[i][0] > maxX) {\n\t\t\tmaxX = points[i][0];\n\t\t}\n\n\t\tif (points[i][1] > maxY) {\n\t\t\tmaxY = points[i][1];\n\t\t}\n\t}\n\n\tctx.beginPath();\n\tctx.moveTo(points[0][0], points[0][1]);\n\tfor (let i = 1; i < points.length; i++) {\n\t\tctx.lineTo(points[i][0], points[i][1]);\n\t}\n\tctx.closePath();\n\tctx.clip();\n\n\tlet linesOffset = (maxY - minY) / Math.tan(angle);\n\n\tctx.beginPath();\n\tfor (let i = minX - linesOffset; i < maxX; i += 15) {\n\t\tctx.moveTo(i, maxY);\n\t\tctx.lineTo(i + linesOffset, minY);\n\t}\n\n\tctx.stroke();\n\tctx.restore();\n};\n\nexport default Shapes;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/ui/Shapes.js\n **/","'use strict';\n\nimport GameObject from '../GameObject';\nimport Rect from '../Rect';\n\nexport default class Sprite extends GameObject {\n\n\tconstructor(img) {\n\t\tsuper();\n\t\tthis._img = img;\n\t\tthis._width = img.width;\n\t\tthis._height = img.height;\n\t\tthis._isPressed = false;\n\t\tthis._clicked = false;\n\t}\n\n\tsetSize(widthOrFraction, height) {\n\n\t\tif (height === undefined) {\n\t\t\tlet fraction = widthOrFraction;\n\n\t\t\twidthOrFraction = this._img.width * fraction;\n\t\t\theight = this._img.height * fraction;\n\t\t}\n\t\tthis._width = widthOrFraction;\n\t\tthis._height = height;\n\t}\n\n\tupdate(fc) {\n\n\t}\n\n\tdraw(fc) {\n\t\tlet ctx = fc.graphContext;\n\n\t\tctx.save();\n\t\tctx.drawImage(this._img, 0, 0,\n\t\t\tthis._img.width, this._img.height, this._x, this._y,\n\t\t\tthis._width, this._height);\n\t\tctx.restore();\n\t}\n\n\tgetBounds() {\n\t\treturn new Rect(this._x, this._y, this._width, this._height);\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/ui/Sprite.js\n **/","'use strict';\r\n\r\n/**\r\n *\r\n * @param image the image object to use for drawing\r\n * @param frames the array describing the frames of the sprite sheet in a format:\r\n * [\r\n *     [x, y, width, height, anchorX, anchorY] // - frame 1\r\n *     [x, y, width, height, anchorX, anchorY] // - frame 2\r\n *     ...\r\n * ]\r\n */\r\n\r\nexport default class SpriteSheet {\r\n\tconstructor(image, frames) {\r\n\t\tthis._image = image;\r\n\t\tthis._frames = frames;\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the frame of the sprite sheet in the given coordinates of the\r\n\t * Context.\r\n\t * @param ctx the context to draw at\r\n\t * @param index the index of the frame\r\n\t * @param x x coordinate where the anchor will appear\r\n\t * @param y y coordinate where the anchor will appear\r\n\t */\r\n\tdrawFrame(ctx, index, x, y) {\r\n\t\tlet frame = this._frames[index];\r\n\r\n\t\tif (!frame) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tctx.drawImage(this._image, frame[SpriteSheet.FRAME_X], frame[SpriteSheet.FRAME_Y],\r\n\t\t\tframe[SpriteSheet.FRAME_WIDTH], frame[SpriteSheet.FRAME_HEIGHT],\r\n\t\t\tx - frame[SpriteSheet.FRAME_ANCHOR_X], y - frame[SpriteSheet.FRAME_ANCHOR_Y],\r\n\t\t\tframe[SpriteSheet.FRAME_WIDTH], frame[SpriteSheet.FRAME_HEIGHT]);\r\n\t};\r\n}\r\n\r\nSpriteSheet.FRAME_X = 0;\r\nSpriteSheet.FRAME_Y = 1;\r\nSpriteSheet.FRAME_WIDTH = 2;\r\nSpriteSheet.FRAME_HEIGHT = 3;\r\nSpriteSheet.FRAME_ANCHOR_X = 4;\r\nSpriteSheet.FRAME_ANCHOR_Y = 5;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/ui/SpriteSheet.js\n **/","'use strict';\n\nexport default class TileSheet {\n\tconstructor(image, w, h) {\n\t\tthis._image = image;\n\t\tthis._w = w;\n\t\tthis._h = h;\n\t\tthis._row = Math.floor(image.width / w);\n\t}\n\n\tdrawTile(ctx, index, x, y) {\n\t\tif (index < 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet tx = (index % this._row) * this._w;\n\t\tlet ty = Math.floor(index / this._row) * this._h;\n\n\t\tctx.drawImage(this._image, tx, ty, this._w, this._h, x, y, this._w, this._h);\n\t};\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/ui/TileSheet.js\n **/","'use strict';\n\nimport GameObject from '../../GameObject';\n\nexport default class TileMapOrtho extends GameObject {\n\n\tconstructor(mapData, image, tileSize, viewportWidth, viewportHeight) {\n\t\tsuper();\n\t\tthis._mapData = mapData;\n\t\tthis._image = image;\n\t\tthis._tileSize = tileSize;\n\t\tthis._viewportWidth = viewportWidth;\n\t\tthis._viewportHeight = viewportHeight;\n\n\t\t// Coordinates of the map\n\t\tthis._x = 0;\n\t\tthis._y = 0;\n\n\t\t// Offscreen buffer\n\t\tthis._offCanvas = document.createElement('canvas');\n\t\tthis._offContext = this._offCanvas.getContext('2d');\n\t\tthis._offBounds = {x: 0, y: 0, w: 0, h: 0};\n\t\tthis._offDirty = true;\n\n\t\tthis._resetOffScreenCanvas();\n\n\t\t// The number of tiles in one row of the image\n\t\tthis._tilesPerRow = image.width / tileSize;\n\t}\n\n\t/* Draws the whole map */\n\tdraw(fc) {\n\t\tlet ctx = fc.graphContext;\n\n\t\tif (this._offDirty) {\n\t\t\tthis._redrawOffscreen();\n\t\t}\n\n\t\tlet offCanvasX = -Math.floor(this._x) - this._offBounds.x * this._tileSize;\n\t\tlet offCanvasY = -Math.floor(this._y) - this._offBounds.y * this._tileSize;\n\t\tlet offCanvasW = Math.min(this._offCanvas.width - offCanvasX, this._viewportWidth);\n\t\tlet offCanvasH = Math.min(this._offCanvas.height - offCanvasY, this._viewportHeight);\n\n\t\tctx.drawImage(this._offCanvas, offCanvasX, offCanvasY, offCanvasW, offCanvasH,\n\t\t\t0, 0, offCanvasW, offCanvasH);\n\t}\n\n\tmove(deltaX, deltaY) {\n\t\tthis._x += deltaX;\n\t\tthis._y += deltaY;\n\t\tthis._updateOffscreenBounds();\n\t}\n\n\tsetViewportSize(width, height) {\n\t\tthis._viewportWidth = width;\n\t\tthis._viewportHeight = height;\n\t\tthis._resetOffScreenCanvas();\n\t}\n\n\t_resetOffScreenCanvas() {\n\t\tthis._updateOffscreenBounds();\n\t\tthis._offCanvas.width = this._offBounds.w * this._tileSize;\n\t\tthis._offCanvas.height = this._offBounds.h * this._tileSize;\n\t\tthis._offDirty = true;\n\t}\n\n\t_redrawOffscreen() {\n\t\tlet ctx = this._offContext;\n\n\t\tctx.clearRect(0, 0, this._offCanvas.width, this._offCanvas.height);\n\n\t\tlet startX = Math.max(this._offBounds.x, 0);\n\t\tlet endX = Math.min(startX + this._offBounds.w - 1, this._mapData[0].length - 1);\n\n\t\tlet startY = Math.max(this._offBounds.y, 0);\n\t\tlet endY = Math.min(startY + this._offBounds.h - 1, this._mapData.length - 1);\n\n\t\tfor (let cellY = startY; cellY <= endY; cellY++) {\n\t\t\tfor (let cellX = startX; cellX <= endX; cellX++) {\n\t\t\t\tlet tileId = this._mapData[cellY][cellX];\n\n\t\t\t\tthis._drawTileAt(ctx, tileId, cellX, cellY);\n\t\t\t}\n\t\t}\n\t\tthis._offDirty = false;\n\t}\n\n\t_drawTileAt(ctx, tileId, cellX, cellY) {\n\n\t\t// Position of the tile inside of a tile sheet\n\t\tlet srcX = (tileId % this._tilesPerRow) * this._tileSize;\n\t\tlet srcY = Math.floor(tileId / this._tilesPerRow) * this._tileSize;\n\n\t\t// size of the tile\n\t\tlet size = this._tileSize;\n\n\t\t// position of the tile on the offscreen buffer\n\t\tlet destX = (cellX - this._offBounds.x) * size;\n\t\tlet destY = (cellY - this._offBounds.y) * size;\n\n\t\tctx.drawImage(this._image, srcX, srcY, size, size, destX, destY, size, size);\n\t}\n\n\t_updateOffscreenBounds() {\n\t\tlet oldBounds = this._offBounds;\n\n\t\tlet newBounds = {\n\t\t\tx: Math.floor(-this._x / this._tileSize),\n\t\t\ty: Math.floor(-this._y / this._tileSize),\n\t\t\tw: Math.ceil(this._viewportWidth / this._tileSize) + 1,\n\t\t\th: Math.ceil(this._viewportHeight / this._tileSize) + 1\n\t\t};\n\n\t\tif (!(oldBounds.x === newBounds.x &&\n\t\t\toldBounds.y === newBounds.y &&\n\t\t\toldBounds.w === newBounds.w &&\n\t\t\toldBounds.h === newBounds.h)) {\n\n\t\t\tthis._offBounds = newBounds;\n\t\t\tthis._offDirty = true;\n\t\t}\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/ui/map/TileMapOrtho.js\n **/"],"sourceRoot":""}