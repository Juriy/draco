!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("draco",[],e):"object"==typeof exports?exports.draco=e():t.draco=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.ui=e.dist=e.isTouchDevice=e.Rect=e.MathUtils=e.ImageManager=e.GameScene=e.GameObject=e.EventEmitter=e.Engine=e.DirtyRectangleManager=e.Animator=void 0;var o=n(1),i=a(o),u=n(2),s=a(u),l=n(4),c=a(l),h=n(6),f=a(h),M=n(12),d=a(M),v=n(11),_=a(v),p=n(24),m=a(p),y=n(25),x=a(y),D=n(3),S=a(D),b=n(23),I=n(26),w=r(I);e.Animator=i["default"],e.DirtyRectangleManager=s["default"],e.Engine=c["default"],e.EventEmitter=f["default"],e.GameObject=d["default"],e.GameScene=_["default"],e.ImageManager=m["default"],e.MathUtils=x["default"],e.Rect=S["default"],e.isTouchDevice=b.isTouchDevice,e.dist=b.dist,e.ui=w},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(e){n(this,t),this._duration=e,this._repeatCount=1,this._acceleration=0,this._deceleration=0,this._loopsDone=0,this._repeatBehavior=t.RepeatBehavior.LOOP,this._timeSinceLoopStart=0,this._started=!1,this._running=!1,this._reverseLoop=!1}return r(t,[{key:"start",value:function(){this._started=!0,this._running=!0}},{key:"isRunning",value:function(){return this._running}},{key:"stop",value:function(){this._loopsDone=0,this._timeSinceLoopStart=0,this._running=!1,this._started=!1}},{key:"pause",value:function(){this._running=!1}},{key:"getDuration",value:function(){return this._duration}},{key:"setDuration",value:function(t){if(this._throwIfStarted(),1>t)throw Error("Duration can't be < 1");this._duration=t}},{key:"getRepeatCount",value:function(){return this._repeatCount}},{key:"setRepeatCount",value:function(e){if(this._throwIfStarted(),1>e&&e!==t.INFINITE)throw Error("Repeat count must be greater than 0 or INFINITE");this._repeatCount=e}},{key:"getRepeatBehavior",value:function(){return this._repeatBehavior}},{key:"setRepeatBehavior",value:function(e){if(this._throwIfStarted(),e!==t.RepeatBehavior.LOOP&&e!==t.RepeatBehavior.REVERSE)throw Error("Repeat behavior should be either RepeatBehavior.LOOP or RepeatBehavior.REVERSE");this._repeatBehavior=e}},{key:"getAcceleration",value:function(){return this._acceleration}},{key:"setAcceleration",value:function(t){if(this._throwIfStarted(),0>t||t>1||t>1-this._deceleration)throw Error("Acceleration value must be from 0 to 1 and cannot be greater than (1 - deceleration)");this._acceleration=t}},{key:"getDeceleration",value:function(){return this._deceleration}},{key:"setDeceleration",value:function(t){if(this._throwIfStarted(),0>t||t>1||t>1-this._acceleration)throw Error("Deceleration value must be from 0 to 1 and cannot be greater than (1 - acceleration)");this._deceleration=t}},{key:"_timingEventPreprocessor",value:function(t){return this._accelerationDecelerationPreprocessor(t)}},{key:"_accelerationDecelerationPreprocessor",value:function(t){if(this._acceleration||this._deceleration){var e=1/(1-this._acceleration/2-this._deceleration/2);if(t<this._acceleration)t*=e*(t/this._acceleration)/2;else if(t>1-this._deceleration){var n=t-(1-this._deceleration),r=n/this._deceleration;t=e*(1-this._acceleration/2-this._deceleration+n*(2-r)/2)}else t=e*(t-this._acceleration/2);0>t?t=0:t>1&&(t=1)}return t}},{key:"update",value:function(e){if(!this._started)return!1;if(this._running||(e=0),this._timeSinceLoopStart+=e,this._timeSinceLoopStart>=this._duration){var n=Math.floor(this._timeSinceLoopStart/this._duration);this._timeSinceLoopStart%=this._duration,this._repeatCount!==t.INFINITE&&n>this._repeatCount-this._loopsDone&&(n=this._repeatCount-this._loopsDone);for(var r=1;n>=r;r++)this._loopsDone++,this._reverseLoop=this._repeatBehavior===t.RepeatBehavior.REVERSE&&this._loopsDone%2===1,this._onLoopEnd(this._loopsDone);if(this._repeatCount!==t.INFINITE&&this._loopsDone===this._repeatCount)return this._onAnimationEnd(),this.stop(),!1}var a=this._timeSinceLoopStart/this._duration;return this._reverseLoop&&(a=1-a),a=this._timingEventPreprocessor(a),this._onUpdate(a,this._loopsDone),a}},{key:"_onUpdate",value:function(t,e){}},{key:"_onLoopEnd",value:function(t){}},{key:"_onAnimationEnd",value:function(){}},{key:"_throwIfStarted",value:function(){if(this._started)throw Error("Cannot change property on the started animator")}}]),t}();e["default"]=a,a.INFINITE=-1,a.RepeatBehavior={LOOP:1,REVERSE:2},t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(3),u=r(i),s=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?.5:arguments[0];a(this,t),this._allDirtyThreshold=e,this._viewport=new u["default"](0,0,100,100),this._dirtyRect=null,this._allDirty=!0,this.markAllDirty()}return o(t,[{key:"clear",value:function(){this._dirtyRect=null,this._allDirty=!1}},{key:"markDirty",value:function(t){!t.width&&!t.height||this._allDirty||(t=this._viewport.intersection(t),t&&(this._dirtyRect?(this._dirtyRect=this._dirtyRect.convexHull(t),this._dirtyRect.width*this._dirtyRect.height>this._allDirtyThreshold*this._viewport.width*this._viewport.height&&this.markAllDirty()):this._dirtyRect=this._viewport.intersection(t)))}},{key:"markAllDirty",value:function(){this._allDirty=!0,this._dirtyRect=this._viewport.copy()}},{key:"isClean",value:function(){return!this._dirtyRect}},{key:"isAllDirty",value:function(){return this._allDirty}},{key:"getDirtyRect",value:function(){return this._dirtyRect}},{key:"setViewport",value:function(t,e){this._viewport.width===t&&this._viewport.height===e||(this._viewport.width=t,this._viewport.height=e,this.markAllDirty())}}]),t}();e["default"]=s,t.exports=e["default"]},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(e,r,a,o){n(this,t),this.x=e,this.y=r,this.width=a,this.height=o}return r(t,[{key:"copy",value:function(){return new t(this.x,this.y,this.width,this.height)}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}},{key:"toString",value:function(){return"[x="+this.x+", y="+this.y+","+("width="+this.width+", height="+this.height+"]")}},{key:"intersects",value:function(t,e,n,r){if(1===arguments.length){var a=t;t=a.x,e=a.y,n=a.width,r=a.height}return this.x<=t+n&&this.x+this.width>=t&&this.y<=e+r&&this.y+this.height>=e}},{key:"covers",value:function(t,e,n,r){if(1===arguments.length){var a=t;t=a.x,e=a.y,n=a.width,r=a.height}return t>=this.x&&e>=this.y&&t+n<=this.x+this.width&&e+r<=this.y+this.height}},{key:"convexHull",value:function(e,n,r,a){if(1===arguments.length){var o=e;e=o.x,n=o.y,r=o.width,a=o.height}var i=Math.min(this.x,e),u=Math.min(this.y,n),s=Math.max(this.x+this.width,e+r)-i,l=Math.max(this.y+this.height,n+a)-u;return new t(i,u,s,l)}},{key:"intersection",value:function(e,n,r,a){if(1===arguments.length){var o=e;e=o.x,n=o.y,r=o.width,a=o.height}var i=Math.max(this.x,e),u=Math.max(this.y,n),s=Math.min(this.x+this.width,e+r)-i,l=Math.min(this.y+this.height,n+a)-u;return 0>=s||0>=l?null:new t(i,u,s,l)}},{key:"containsPoint",value:function(t,e){return t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}},{key:"getOverlappingGridCells",value:function(e,n,r,a){var o=Math.max(0,Math.floor(this.x/e)),i=Math.max(0,Math.floor(this.y/n)),u=Math.min(r-o,Math.floor((this.x+this.width)/e)-o+1),s=Math.min(a-i,Math.floor((this.y+this.height)/n)-i+1);return new t(o,i,u,s)}}]),t}();e["default"]=a,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(5),u=r(i),s=n(7),l=r(s),c=n(9),h=r(c),f=n(2),M=r(f),d=n(10),v=r(d),_=n(11),p=r(_),m=n(23),y=function(){function t(e,n,r){a(this,t);var o=this._canvas=this._getCanvasElement(e);void 0!==n&&void 0!==r||(n=o.width,r=o.height),this._ctx=o.getContext("2d"),this._scenes={},this._currentScene=null,this._lastTick=Date.now(),this._input=(0,m.isTouchDevice)()?l["default"]:h["default"],this._keyboard=new u["default"](o),this._dirtyRects=new M["default"],this._dirtyRects.setViewport(n,r),this._resourceManager=new v["default"],this._tick=this._tick.bind(this),this._gameContext={resourceManager:this._resourceManager,width:o.width,height:o.height},this._initDefaultScene()}return o(t,[{key:"loadResources",value:function(t){return this._resourceManager.load(t)}},{key:"getResource",value:function(t){return this._resourceManager.get(t)}},{key:"getScene",value:function(){return this._currentScene}},{key:"runScene",value:function(t){if(!this._scenes.hasOwnProperty(t))throw Error("Could not find scene ["+t+"] to run");this._currentScene=this._scenes[t],this._dirtyRects.markAllDirty()}},{key:"addScene",value:function(t,e){e.init(this._gameContext),this._scenes[t]=e,this._currentScene||this.runScene(t)}},{key:"scene",value:function(t,e){void 0===e?this.runScene(t):this.addScene(t,e)}},{key:"start",value:function(){this._lastTick=Date.now(),this._tick()}},{key:"_tick",value:function(){requestAnimationFrame(this._tick);var t=Date.now()-this._lastTick;this._lastTick=Date.now();var e={dt:t,input:this._input,keyboard:this._keyboard,graphContext:this._ctx,width:this._canvas.width,height:this._canvas.height,dirtyRects:this._dirtyRects};this._currentScene&&(this._update(e),this._dirtyRects.isClean()||this._draw(e),this._keyboard.resetPressed())}},{key:"_update",value:function(t){this._currentScene.update(t)}},{key:"_draw",value:function(t){var e=this._dirtyRects.getDirtyRect();this._ctx.save(),this._ctx.beginPath(),this._ctx.rect(e.x,e.y,e.width,e.height),this._ctx.clip(),this._currentScene.draw(t),this._dirtyRects.clear(),this._ctx.restore()}},{key:"_initDefaultScene",value:function(){this.addScene("default",new p["default"])}},{key:"_getCanvasElement",value:function(t){if("string"==typeof t)return document.getElementById(t);if(t instanceof HTMLCanvasElement)return t;throw Error("Could not find <canvas> element to attach to Enine")}}]),t}();e["default"]=y,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(6),l=r(s),c=function(t){function e(t){a(this,e);var n=o(this,Object.getPrototypeOf(e).call(this));return n._element=null,n._stopDomEvents=!0,n._keys=[],n._pressed=[],n._onKeyDown=n._onKeyDown.bind(n),n._onKeyUp=n._onKeyUp.bind(n),n.attachTo(t),n}return i(e,t),u(e,[{key:"detach",value:function(){this._element&&(this._detachDomListeners(),this._element=null)}},{key:"attachTo",value:function(t){this._element&&this._detachDomListeners(),this._element=t,t&&this._attachDomListeners(),t.focus()}},{key:"getStopDomEvents",value:function(){return this._stopDomEvents}},{key:"setStopDomEvents",value:function(t){this._stopDomEvents=t}},{key:"isDown",value:function(t){return this._keys[t]}},{key:"isPressed",value:function(t){return this._pressed[t]}},{key:"resetPressed",value:function(){this._pressed=[]}},{key:"_stopEventIfRequired",value:function(t){this._stopDomEvents&&(t.stopPropagation(),t.preventDefault())}},{key:"_onKeyDown",value:function(t){this._pressed[t.keyCode]=!this.isDown(t.keyCode),this._keys[t.keyCode]=!0,this._stopEventIfRequired(t)}},{key:"_onKeyUp",value:function(t){this._keys[t.keyCode]=!1,this._pressed[t.keyCode]=!1,this._stopEventIfRequired(t)}},{key:"_attachDomListeners",value:function(){var t=this._element;t.addEventListener("keydown",this._onKeyDown,!1),t.addEventListener("keyup",this._onKeyUp,!1)}},{key:"_detachDomListeners",value:function(){var t=this._element;t.removeEventListener("keydown",this._onKeyDown,!1),t.removeEventListener("keyup",this._onKeyUp,!1)}}]),e}(l["default"]);e["default"]=c,t.exports=e["default"]},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(){n(this,t),this._listeners={}}return r(t,[{key:"addListener",value:function(t,e){if("function"!=typeof e)throw Error("Listener must be a function");this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)}},{key:"removeListener",value:function(t,e){if("function"!=typeof e)throw Error("Listener must be a function");if(this._listeners[t]){var n=this._listeners[t].indexOf(e);-1!==n&&this._listeners[t].splice(n,1)}}},{key:"removeAllListeners",value:function(t){t?this._listeners[t]=[]:this._listeners={}}},{key:"emit",value:function(t,e){if(this._listeners[t]&&this._listeners[t].length)for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)}}]),t}();e["default"]=a,a.prototype.on=a.prototype.addListener,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function f(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:f(a,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},l=n(8),c=r(l),h=function(t){function e(t){a(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t));return n._isDown=!1,n._lastInteractionCoordinates={x:0,y:0},n._onDownDomEvent=n._onDownDomEvent.bind(n),n._onUpDomEvent=n._onUpDomEvent.bind(n),n._onMoveDomEvent=n._onMoveDomEvent.bind(n),n.attachTo(t),n}return i(e,t),u(e,[{key:"isDown",value:function(){return this._isDown}},{key:"getCoordinates",value:function(){return this._lastInteractionCoordinates}},{key:"_attachDomListeners",value:function(){var t=this._element;t.addEventListener("touchstart",this._onDownDomEvent,!1),t.addEventListener("touchend",this._onUpDomEvent,!1),t.addEventListener("touchcancel",this._onUpDomEvent,!1),t.addEventListener("touchmove",this._onMoveDomEvent,!1)}},{key:"_detachDomListeners",value:function(){var t=this._element;t.removeEventListener("touchstart",this._onDownDomEvent,!1),t.removeEventListener("touchend",this._onUpDomEvent,!1),t.removeEventListener("touchcancel",this._onUpDomEvent,!1),t.removeEventListener("touchmove",this._onMoveDomEvent,!1)}},{key:"_onDownDomEvent",value:function(t){this._lastInteractionCoordinates=this._getInputCoordinates(t),this._isDown=!0,s(Object.getPrototypeOf(e.prototype),"_onDownDomEvent",this).call(this,t)}},{key:"_onUpDomEvent",value:function(t){this.emit("up",{x:this._lastInteractionCoordinates.x,y:this._lastInteractionCoordinates.y,moved:this._moving,domEvent:t}),this._stopEventIfRequired(t),this._isDown=!1,this._moving=!1}},{key:"_onMoveDomEvent",value:function(t){this._lastInteractionCoordinates=this._getInputCoordinates(t),s(Object.getPrototypeOf(e.prototype),"_onMoveDomEvent",this).call(this,t)}}]),e}(c["default"]);e["default"]=h,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(6),l=r(s),c=function(t){function e(t){a(this,e);var n=o(this,Object.getPrototypeOf(e).call(this));return n._element=null,n._moving=!1,n._lastMoveCoordinates=null,n._moveThreshold=10,n._stopDomEvents=!1,n}return i(e,t),u(e,[{key:"detach",value:function(){this._element&&(this._detachDomListeners(),this._element=null)}},{key:"attachTo",value:function(t){this._element&&this._detachDomListeners(),this._element=t,t&&this._attachDomListeners()}},{key:"getMoveThreshold",value:function(){return this._moveThreshold}},{key:"setMoveThreshold",value:function(t){this._moveThreshold=t}},{key:"getStopDomEvents",value:function(){return this._stopDomEvents}},{key:"setStopDomEvents",value:function(t){this._stopDomEvents=t}},{key:"_onDownDomEvent",value:function(t){var e=this._lastMoveCoordinates=this._getInputCoordinates(t);this.emit("down",{x:e.x,y:e.y,domEvent:t}),this._stopEventIfRequired(t)}},{key:"_onUpDomEvent",value:function(t){var e=this._getInputCoordinates(t);this.emit("up",{x:e.x,y:e.y,moved:this._moving,domEvent:t}),this._stopEventIfRequired(t),this._moving=!1}},{key:"_onMoveDomEvent",value:function(t){var e=this._getInputCoordinates(t),n=e.x-this._lastMoveCoordinates.x,r=e.y-this._lastMoveCoordinates.y,a=Math.sqrt(n*n+r*r);!this._moving&&a>this._moveThreshold&&(this._moving=!0),this._moving&&(this.emit("move",{x:e.x,y:e.y,deltaX:n,deltaY:r,domEvent:t}),this._lastMoveCoordinates=e),this._stopEventIfRequired(t)}},{key:"_stopEventIfRequired",value:function(t){this._stopDomEvents&&(t.stopPropagation(),t.preventDefault())}},{key:"_getInputCoordinates",value:function(t){var e=this._element,n=t.targetTouches?t.targetTouches[0]:t,r=(n.pageX||n.clientX+document.body.scrollLeft)-e.offsetLeft,a=(n.pageY||n.clientY+document.body.scrollTop)-e.offsetTop;return{x:r,y:a}}}]),e}(l["default"]);e["default"]=c,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function f(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:f(a,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},l=n(8),c=r(l),h=function(t){function e(t){a(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t));return n._mouseDown=!1,n._onDownDomEvent=n._onDownDomEvent.bind(n),n._onUpDomEvent=n._onUpDomEvent.bind(n),n._onMoveDomEvent=n._onMoveDomEvent.bind(n),n._onMouseOut=n._onMouseOut.bind(n),n._onHoverDomEvent=n._onHoverDomEvent.bind(n),n._coords={x:-1,y:-1},n.attachTo(t),n}return i(e,t),u(e,[{key:"isDown",value:function(){return this._mouseDown}},{key:"getCoordinates",value:function(){return this._coords}},{key:"_attachDomListeners",value:function(){var t=this._element;t.addEventListener("mousedown",this._onDownDomEvent,!1),t.addEventListener("mouseup",this._onUpDomEvent,!1),t.addEventListener("mousemove",this._onMoveDomEvent,!1),t.addEventListener("mouseout",this._onMouseOut,!1)}},{key:"_detachDomListeners",value:function(){var t=this._element;t.removeEventListener("mousedown",this._onDownDomEvent,!1),t.removeEventListener("mouseup",this._onUpDomEvent,!1),t.removeEventListener("mousemove",this._onMoveDomEvent,!1),t.removeEventListener("mouseout",this._onMouseOut,!1)}},{key:"_onDownDomEvent",value:function(t){this._mouseDown=!0,s(Object.getPrototypeOf(e.prototype),"_onDownDomEvent",this).call(this,t)}},{key:"_onUpDomEvent",value:function(t){this._mouseDown=!1,c["default"].prototype._onUpDomEvent.call(this,t)}},{key:"_onMoveDomEvent",value:function(t){this._mouseDown?s(Object.getPrototypeOf(e.prototype),"_onMoveDomEvent",this).call(this,t):this._onHoverDomEvent(t)}},{key:"_onHoverDomEvent",value:function(t){var e=this._coords=this._getInputCoordinates(t);this.emit("hover",{x:e.x,y:e.y,domEvent:t}),this._stopEventIfRequired(t)}},{key:"_onMouseOut",value:function(){this._mouseDown=!1}}]),e}(c["default"]);e["default"]=h,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(6),l=r(s),c=function(t){function e(){a(this,e);var t=o(this,Object.getPrototypeOf(e).call(this));return t._store={},t}return i(e,t),u(e,[{key:"load",value:function(t){var e=this,n=0,r=0,a=function(t){return"jpg"===t||"png"===t},o=function(t){return"json"===t},i=function(t){return function(){r++,r===n&&t()}},u=function(t,n,r){return function(){e._store[t]=n,r()}},s=function(t,n,r){return function(){e._store[t]=n.response,r()}},l=function(t,n,r){return function(){e._store[t]=JSON.parse(n.responseText),r()}},c=function(e,r){return function(c){var h=t[c],f=h.split(".").pop();if(n++,a(f)){var M=new Image;M.src=h,M.onload=u(c,M,i(e)),M.onerror=r}else{var d=new XMLHttpRequest;o(f)?d.addEventListener("load",l(c,d,i(e))):(d.responseType="arraybuffer",d.addEventListener("load",s(c,d,i(e)))),d.addEventListener("error",r),d.open("GET",h),d.send()}}};return new Promise(function(e,n){var r=Object.getOwnPropertyNames(t);r.forEach(c(e,n))})}},{key:"get",value:function(t){return this._store[t]}}]),e}(l["default"]);e["default"]=c,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function f(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:f(a,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},l=n(12),c=r(l),h=function(t){function e(){a(this,e);var t=o(this,Object.getPrototypeOf(e).call(this));return t._gameContext=null,t._clearColor="#6296A6",t._ignoreDirtyRectangles=!0,t}return i(e,t),u(e,[{key:"init",value:function(t){this._gameContext=t}},{key:"update",value:function(t){s(Object.getPrototypeOf(e.prototype),"update",this).call(this,t),this._ignoreDirtyRectangles&&t.dirtyRects.markAllDirty()}},{key:"draw",value:function(t){var n=t.graphContext;n.save(),this._clearColor&&(n.fillStyle=this._clearColor,n.fillRect(0,0,t.width,t.height)),s(Object.getPrototypeOf(e.prototype),"draw",this).call(this,t),n.restore()}},{key:"addChild",value:function(t){s(Object.getPrototypeOf(e.prototype),"addChild",this).call(this,t)}},{key:"registerObject",value:function(t){}},{key:"deregisterObject",value:function(t){}},{key:"getResource",value:function(t){return this._gameContext.resourceManager.get(t)}},{key:"setClearColor",value:function(t){this._clearColor=t}},{key:"setIgnoreDirtyRectanges",value:function(t){this._ignoreDirtyRectangles=t}}]),e}(c["default"]);e["default"]=h,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(3),u=r(i),s=n(13),l=function(){function t(){a(this,t),this._x=0,this._y=0,this._width=0,this._height=0,this._id=t.uid++,this._name="object_"+this._id,this._anchorX=0,this._anchorY=0,this._rot=0,this._scaleX=1,this._scaleY=1,this._scene=null,this._parent=null,this._children=[]}return o(t,[{key:"update",value:function(t){this._children.forEach(function(e){return e.update(t)})}},{key:"draw",value:function(t){var e=t.graphContext;e.save(),this._applyTransforms(e),this._renderSelf(t),this._children.forEach(function(e){return e.draw(t)}),e.restore()}},{key:"_renderSelf",value:function(t){}},{key:"_applyTransforms",value:function(t){var e=this._anchorX*this._width,n=this._anchorY*this._height;t.translate(this._x,this._y),t.translate(e,n),t.rotate(this._rot),t.scale(this._scaleX,this._scaleY),t.translate(-e,-n)}},{key:"beforeAddedToParent",value:function(){}},{key:"afterAddedToParent",value:function(){}},{key:"beforeRemovedFromParent",value:function(){}},{key:"afterRemovedFromParent",value:function(){}},{key:"addChild",value:function(e){if(!e instanceof t)throw Error("Child must be a GameObject");e.beforeAddedToParent(),this._children.push(e),e.setParent(this),e.afterAddedToParent()}},{key:"removeChild",value:function(t){var e=this._children.indexOf(t);if(e>-1){t.beforeRemovedFromParent(),t.setParent(null);var n=this._children.splice(e,1);return t.afterRemovedFromParent(),n}}},{key:"getChildren",value:function(){return this._children}},{key:"setParent",value:function(t){this._parent=t}},{key:"setScene",value:function(t){this._scene=t}},{key:"getScene",value:function(){return this._scene}},{key:"getParent",value:function(){return this._parent}},{key:"getId",value:function(){return this._id}},{key:"getName",value:function(){return this._name}},{key:"setName",value:function(){return this._name}},{key:"setX",value:function(t){this._x=t}},{key:"setY",value:function(t){this._y=t}},{key:"setPos",value:function(t,e){this.move(t-this._x,e-this._y)}},{key:"setSize",value:function(t,e){this._width=t,this._height=e}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"move",value:function(t,e){this._x+=t,this._y+=e}},{key:"getPos",value:function(){return{x:this._x,y:this._y}}},{key:"setRot",value:function(t){this._rot=t}},{key:"rotateBy",value:function(t){this._rot+=t}},{key:"getRot",value:function(){return this._rot}},{key:"setScale",value:function(t,e){void 0===e&&(e=t),this._scaleX=t,this._scaleY=e}},{key:"scaleBy",value:function(t){this._scale*=t}},{key:"getScale",value:function(){return{x:this._scaleX,y:this._scaleY}}},{key:"getScaleX",value:function(){return this._scaleX}},{key:"getScaleY",value:function(){return this._scaleY}},{key:"getAnchor",value:function(){return{x:this._anchorX,y:this._anchorY}}},{key:"setAnchor",value:function(t,e){this._anchorX=t,this._anchorY=e}},{key:"getBoundingBox",value:function(){
return new u["default"](this._x,this._y,this._width,this._height)}},{key:"getAbsoluteBoundingBox",value:function(){var t=this.getAbsoluteMatrix(),e=s.vec2.fromValues(0,0),n=s.vec2.fromValues(this._width,0),r=s.vec2.fromValues(this._width,this._height),a=s.vec2.fromValues(0,this._height);return s.vec2.transformMat2d(e,e,t),s.vec2.transformMat2d(n,n,t),s.vec2.transformMat2d(r,r,t),s.vec2.transformMat2d(a,a,t),[{x:e[0],y:e[1]},{x:n[0],y:n[1]},{x:r[0],y:r[1]},{x:a[0],y:a[1]}]}},{key:"getAbsoluteChildrenBoundingBox",value:function(){var t=Number.MAX_VALUE,e=Number.MIN_VALUE,n=Number.MAX_VALUE,r=Number.MIN_VALUE,a=this.getAbsoluteBoundingBox();return this._children.forEach(function(t){var e=t.getAbsoluteChildrenBoundingBox();a.push({x:e.x,y:e.y}),a.push({x:e.x+e.width,y:e.y}),a.push({x:e.x+e.width,y:e.y+e.height}),a.push({x:e.x,y:e.y+e.height})}),a.forEach(function(a){a.x<t&&(t=a.x),a.x>e&&(e=a.x),a.y<n&&(n=a.y),a.y>r&&(r=a.y)}),new u["default"](t,n,e-t,r-n)}},{key:"getRelativeMatrix",value:function(){var t=s.mat2d.create(),e=this._anchorX*this._width,n=this._anchorY*this._height;return s.mat2d.translate(t,t,s.vec2.fromValues(this._x,this._y)),s.mat2d.translate(t,t,s.vec2.fromValues(e,n)),s.mat2d.rotate(t,t,this._rot),s.mat2d.scale(t,t,s.vec2.fromValues(this._scaleX,this._scaleY)),s.mat2d.translate(t,t,s.vec2.fromValues(-e,-n)),t}},{key:"getAbsoluteMatrix",value:function(){var t=this.getParent(),e=this.getRelativeMatrix();if(null===t)return e;var n=t.getAbsoluteMatrix(),r=s.mat2d.multiply(s.mat2d.create(),n,e);return r}},{key:"detach",value:function(){this._parent&&this._parent.removeChild(this)}},{key:"getAbsoluteTranslation",value:function(){var t=this.getAbsoluteMatrix();return[t[4],t[5]]}},{key:"getAbsoluteRotation",value:function(){var t=this.getAbsoluteMatrix();return-Math.atan2(-t[1],t[0])}},{key:"getAbsoluteScale",value:function(){var t=this.getAbsoluteMatrix(),e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);t[0]<0&&(e*=-1);var n=Math.sqrt(t[3]*t[3]+t[4]*t[4]);return t[4]<0&&(n*=-1),[e,n]}}]),t}();e["default"]=l,l.uid=1,t.exports=e["default"]},function(t,e,n){e.glMatrix=n(14),e.mat2=n(15),e.mat2d=n(16),e.mat3=n(17),e.mat4=n(18),e.quat=n(19),e.vec2=n(22),e.vec3=n(20),e.vec4=n(21)},function(t,e){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.ENABLE_SIMD=!1,n.SIMD_AVAILABLE=n.ARRAY_TYPE===Float32Array&&"SIMD"in this,n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE,n.setMatrixArrayType=function(t){n.ARRAY_TYPE=t};var r=Math.PI/180;n.toRadian=function(t){return t*r},n.equals=function(t,e){return Math.abs(t-e)<=n.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},t.exports=n},function(t,e,n){var r=n(14),a={};a.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},a.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},a.fromValues=function(t,e,n,a){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=a,o},a.set=function(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t},a.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},a.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*o-a*r;return i?(i=1/i,t[0]=o*i,t[1]=-r*i,t[2]=-a*i,t[3]=n*i,t):null},a.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},a.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},a.multiply=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],s=n[1],l=n[2],c=n[3];return t[0]=r*u+o*s,t[1]=a*u+i*s,t[2]=r*l+o*c,t[3]=a*l+i*c,t},a.mul=a.multiply,a.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+o*u,t[1]=a*s+i*u,t[2]=r*-u+o*s,t[3]=a*-u+i*s,t},a.scale=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],s=n[1];return t[0]=r*u,t[1]=a*u,t[2]=o*s,t[3]=i*s,t},a.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},a.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},a.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},a.sub=a.subtract,a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=e[0],s=e[1],l=e[2],c=e[3];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-s)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-c)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},a.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},a.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},t.exports=a},function(t,e,n){var r=n(14),a={};a.create=function(){var t=new r.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},a.clone=function(t){var e=new r.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},a.fromValues=function(t,e,n,a,o,i){var u=new r.ARRAY_TYPE(6);return u[0]=t,u[1]=e,u[2]=n,u[3]=a,u[4]=o,u[5]=i,u},a.set=function(t,e,n,r,a,o,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t},a.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=n*o-r*a;return s?(s=1/s,t[0]=o*s,t[1]=-r*s,t[2]=-a*s,t[3]=n*s,t[4]=(a*u-o*i)*s,t[5]=(r*i-n*u)*s,t):null},a.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},a.multiply=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=n[0],c=n[1],h=n[2],f=n[3],M=n[4],d=n[5];return t[0]=r*l+o*c,t[1]=a*l+i*c,t[2]=r*h+o*f,t[3]=a*h+i*f,t[4]=r*M+o*d+u,t[5]=a*M+i*d+s,t},a.mul=a.multiply,a.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=Math.sin(n),c=Math.cos(n);return t[0]=r*c+o*l,t[1]=a*c+i*l,t[2]=r*-l+o*c,t[3]=a*-l+i*c,t[4]=u,t[5]=s,t},a.scale=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=n[0],c=n[1];return t[0]=r*l,t[1]=a*l,t[2]=o*c,t[3]=i*c,t[4]=u,t[5]=s,t},a.translate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=n[0],c=n[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=r*l+o*c+u,t[5]=a*l+i*c+s,t},a.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},a.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},a.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=e[0],c=e[1],h=e[2],f=e[3],M=e[4],d=e[5];return Math.abs(n-l)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(o-h)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(i-f)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(u-M)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(s-d)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))},t.exports=a},function(t,e,n){var r=n(14),a={};a.create=function(){var t=new r.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},a.clone=function(t){var e=new r.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},a.fromValues=function(t,e,n,a,o,i,u,s,l){var c=new r.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=a,c[4]=o,c[5]=i,c[6]=u,c[7]=s,c[8]=l,c},a.set=function(t,e,n,r,a,o,i,u,s,l){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=l,t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},a.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],l=e[7],c=e[8],h=c*i-u*l,f=-c*o+u*s,M=l*o-i*s,d=n*h+r*f+a*M;return d?(d=1/d,t[0]=h*d,t[1]=(-c*r+a*l)*d,t[2]=(u*r-a*i)*d,t[3]=f*d,t[4]=(c*n-a*s)*d,t[5]=(-u*n+a*o)*d,t[6]=M*d,t[7]=(-l*n+r*s)*d,t[8]=(i*n-r*o)*d,t):null},a.adjoint=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],l=e[7],c=e[8];return t[0]=i*c-u*l,t[1]=a*l-r*c,t[2]=r*u-a*i,t[3]=u*s-o*c,t[4]=n*c-a*s,t[5]=a*o-n*u,t[6]=o*l-i*s,t[7]=r*s-n*l,t[8]=n*i-r*o,t},a.determinant=function(t){var e=t[0],n=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],l=t[8];return e*(l*o-i*s)+n*(-l*a+i*u)+r*(s*a-o*u)},a.multiply=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=e[6],c=e[7],h=e[8],f=n[0],M=n[1],d=n[2],v=n[3],_=n[4],p=n[5],m=n[6],y=n[7],x=n[8];return t[0]=f*r+M*i+d*l,t[1]=f*a+M*u+d*c,t[2]=f*o+M*s+d*h,t[3]=v*r+_*i+p*l,t[4]=v*a+_*u+p*c,t[5]=v*o+_*s+p*h,t[6]=m*r+y*i+x*l,t[7]=m*a+y*u+x*c,t[8]=m*o+y*s+x*h,t},a.mul=a.multiply,a.translate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=e[6],c=e[7],h=e[8],f=n[0],M=n[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=s,t[6]=f*r+M*i+l,t[7]=f*a+M*u+c,t[8]=f*o+M*s+h,t},a.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=e[6],c=e[7],h=e[8],f=Math.sin(n),M=Math.cos(n);return t[0]=M*r+f*i,t[1]=M*a+f*u,t[2]=M*o+f*s,t[3]=M*i-f*r,t[4]=M*u-f*a,t[5]=M*s-f*o,t[6]=l,t[7]=c,t[8]=h,t},a.scale=function(t,e,n){var r=n[0],a=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},a.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},a.fromQuat=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n+n,u=r+r,s=a+a,l=n*i,c=r*i,h=r*u,f=a*i,M=a*u,d=a*s,v=o*i,_=o*u,p=o*s;return t[0]=1-h-d,t[3]=c-p,t[6]=f+_,t[1]=c+p,t[4]=1-l-d,t[7]=M-v,t[2]=f-_,t[5]=M+v,t[8]=1-l-h,t},a.normalFromMat4=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],l=e[7],c=e[8],h=e[9],f=e[10],M=e[11],d=e[12],v=e[13],_=e[14],p=e[15],m=n*u-r*i,y=n*s-a*i,x=n*l-o*i,D=r*s-a*u,S=r*l-o*u,b=a*l-o*s,I=c*v-h*d,w=c*_-f*d,g=c*p-M*d,F=h*_-f*v,E=h*p-M*v,O=f*p-M*_,P=m*O-y*E+x*F+D*g-S*w+b*I;return P?(P=1/P,t[0]=(u*O-s*E+l*F)*P,t[1]=(s*g-i*O-l*w)*P,t[2]=(i*E-u*g+l*I)*P,t[3]=(a*E-r*O-o*F)*P,t[4]=(n*O-a*g+o*w)*P,t[5]=(r*g-n*E-o*I)*P,t[6]=(v*b-_*S+p*D)*P,t[7]=(_*x-d*b-p*y)*P,t[8]=(d*S-v*x+p*m)*P,t):null},a.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},a.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],h=t[8],f=e[0],M=e[1],d=e[2],v=e[3],_=e[4],p=e[5],m=t[6],y=e[7],x=e[8];return Math.abs(n-f)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(a-M)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(o-d)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-v)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(u-_)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(s-p)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(l-m)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(c-y)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(h-x)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(x))},t.exports=a},function(t,e,n){var r=n(14),a={scalar:{},SIMD:{}};a.create=function(){var t=new r.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.clone=function(t){var e=new r.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.fromValues=function(t,e,n,a,o,i,u,s,l,c,h,f,M,d,v,_){var p=new r.ARRAY_TYPE(16);return p[0]=t,p[1]=e,p[2]=n,p[3]=a,p[4]=o,p[5]=i,p[6]=u,p[7]=s,p[8]=l,p[9]=c,p[10]=h,p[11]=f,p[12]=M,p[13]=d,p[14]=v,p[15]=_,p},a.set=function(t,e,n,r,a,o,i,u,s,l,c,h,f,M,d,v,_){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=l,t[9]=c,t[10]=h,t[11]=f,t[12]=M,t[13]=d,t[14]=v,t[15]=_,t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.scalar.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],a=e[3],o=e[6],i=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},a.SIMD.transpose=function(t,e){var n,r,a,o,i,u,s,l,c,h;return n=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12),i=SIMD.Float32x4.shuffle(n,r,0,1,4,5),u=SIMD.Float32x4.shuffle(a,o,0,1,4,5),s=SIMD.Float32x4.shuffle(i,u,0,2,4,6),l=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,0,s),SIMD.Float32x4.store(t,4,l),i=SIMD.Float32x4.shuffle(n,r,2,3,6,7),u=SIMD.Float32x4.shuffle(a,o,2,3,6,7),c=SIMD.Float32x4.shuffle(i,u,0,2,4,6),h=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,8,c),SIMD.Float32x4.store(t,12,h),t},a.transpose=r.USE_SIMD?a.SIMD.transpose:a.scalar.transpose,a.scalar.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],l=e[7],c=e[8],h=e[9],f=e[10],M=e[11],d=e[12],v=e[13],_=e[14],p=e[15],m=n*u-r*i,y=n*s-a*i,x=n*l-o*i,D=r*s-a*u,S=r*l-o*u,b=a*l-o*s,I=c*v-h*d,w=c*_-f*d,g=c*p-M*d,F=h*_-f*v,E=h*p-M*v,O=f*p-M*_,P=m*O-y*E+x*F+D*g-S*w+b*I;return P?(P=1/P,t[0]=(u*O-s*E+l*F)*P,t[1]=(a*E-r*O-o*F)*P,t[2]=(v*b-_*S+p*D)*P,t[3]=(f*S-h*b-M*D)*P,t[4]=(s*g-i*O-l*w)*P,t[5]=(n*O-a*g+o*w)*P,t[6]=(_*x-d*b-p*y)*P,t[7]=(c*b-f*x+M*y)*P,t[8]=(i*E-u*g+l*I)*P,t[9]=(r*g-n*E-o*I)*P,t[10]=(d*S-v*x+p*m)*P,t[11]=(h*x-c*S-M*m)*P,t[12]=(u*w-i*F-s*I)*P,t[13]=(n*F-r*w+a*I)*P,t[14]=(v*y-d*D-_*m)*P,t[15]=(c*D-h*y+f*m)*P,t):null},a.SIMD.invert=function(t,e){var n,r,a,o,i,u,s,l,c,h,f=SIMD.Float32x4.load(e,0),M=SIMD.Float32x4.load(e,4),d=SIMD.Float32x4.load(e,8),v=SIMD.Float32x4.load(e,12);return i=SIMD.Float32x4.shuffle(f,M,0,1,4,5),r=SIMD.Float32x4.shuffle(d,v,0,1,4,5),n=SIMD.Float32x4.shuffle(i,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,i,1,3,5,7),i=SIMD.Float32x4.shuffle(f,M,2,3,6,7),o=SIMD.Float32x4.shuffle(d,v,2,3,6,7),a=SIMD.Float32x4.shuffle(i,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,i,1,3,5,7),i=SIMD.Float32x4.mul(a,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.mul(r,i),s=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),u),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),i=SIMD.Float32x4.mul(r,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),u),c=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(r,2,3,0,1),o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),u),l=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(a,i)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.mul(n,r),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),l),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),c),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(a,i)),i=SIMD.Float32x4.mul(n,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(a,i)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),l),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),s),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.mul(n,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),s),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),c),h=SIMD.Float32x4.mul(n,u),h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,2,3,0,1),h),h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,1,0,3,2),h),i=SIMD.Float32x4.reciprocalApproximation(h),h=SIMD.Float32x4.sub(SIMD.Float32x4.add(i,i),SIMD.Float32x4.mul(h,SIMD.Float32x4.mul(i,i))),(h=SIMD.Float32x4.swizzle(h,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(h,u)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(h,s)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(h,l)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(h,c)),t):null},a.invert=r.USE_SIMD?a.SIMD.invert:a.scalar.invert,a.scalar.adjoint=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],l=e[7],c=e[8],h=e[9],f=e[10],M=e[11],d=e[12],v=e[13],_=e[14],p=e[15];return t[0]=u*(f*p-M*_)-h*(s*p-l*_)+v*(s*M-l*f),t[1]=-(r*(f*p-M*_)-h*(a*p-o*_)+v*(a*M-o*f)),t[2]=r*(s*p-l*_)-u*(a*p-o*_)+v*(a*l-o*s),t[3]=-(r*(s*M-l*f)-u*(a*M-o*f)+h*(a*l-o*s)),t[4]=-(i*(f*p-M*_)-c*(s*p-l*_)+d*(s*M-l*f)),t[5]=n*(f*p-M*_)-c*(a*p-o*_)+d*(a*M-o*f),t[6]=-(n*(s*p-l*_)-i*(a*p-o*_)+d*(a*l-o*s)),t[7]=n*(s*M-l*f)-i*(a*M-o*f)+c*(a*l-o*s),t[8]=i*(h*p-M*v)-c*(u*p-l*v)+d*(u*M-l*h),t[9]=-(n*(h*p-M*v)-c*(r*p-o*v)+d*(r*M-o*h)),t[10]=n*(u*p-l*v)-i*(r*p-o*v)+d*(r*l-o*u),t[11]=-(n*(u*M-l*h)-i*(r*M-o*h)+c*(r*l-o*u)),t[12]=-(i*(h*_-f*v)-c*(u*_-s*v)+d*(u*f-s*h)),t[13]=n*(h*_-f*v)-c*(r*_-a*v)+d*(r*f-a*h),t[14]=-(n*(u*_-s*v)-i*(r*_-a*v)+d*(r*s-a*u)),t[15]=n*(u*f-s*h)-i*(r*f-a*h)+c*(r*s-a*u),t},a.SIMD.adjoint=function(t,e){var n,r,a,o,i,u,s,l,c,h,f,M,d,n=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12);return c=SIMD.Float32x4.shuffle(n,r,0,1,4,5),u=SIMD.Float32x4.shuffle(a,o,0,1,4,5),i=SIMD.Float32x4.shuffle(c,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,c,1,3,5,7),c=SIMD.Float32x4.shuffle(n,r,2,3,6,7),l=SIMD.Float32x4.shuffle(a,o,2,3,6,7),s=SIMD.Float32x4.shuffle(c,l,0,2,4,6),l=SIMD.Float32x4.shuffle(l,c,1,3,5,7),c=SIMD.Float32x4.mul(s,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.mul(u,c),f=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),h),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.mul(u,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),h),d=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,c)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,3,0,1),l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),s=SIMD.Float32x4.swizzle(s,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),h),M=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,c)),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),c=SIMD.Float32x4.mul(i,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),M),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),d),c=SIMD.Float32x4.swizzle(c,2,3,0,1),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),M),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(s,c)),c=SIMD.Float32x4.mul(i,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(s,c)),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),M),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),f),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.mul(i,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),f),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,c)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),d),SIMD.Float32x4.store(t,0,h),SIMD.Float32x4.store(t,4,f),SIMD.Float32x4.store(t,8,M),SIMD.Float32x4.store(t,12,d),t},a.adjoint=r.USE_SIMD?a.SIMD.adjoint:a.scalar.adjoint,a.determinant=function(t){var e=t[0],n=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],l=t[8],c=t[9],h=t[10],f=t[11],M=t[12],d=t[13],v=t[14],_=t[15],p=e*i-n*o,m=e*u-r*o,y=e*s-a*o,x=n*u-r*i,D=n*s-a*i,S=r*s-a*u,b=l*d-c*M,I=l*v-h*M,w=l*_-f*M,g=c*v-h*d,F=c*_-f*d,E=h*_-f*v;return p*E-m*F+y*g+x*w-D*I+S*b},a.SIMD.multiply=function(t,e,n){var r=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),u=SIMD.Float32x4.load(n,0),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),i))));SIMD.Float32x4.store(t,0,s);var l=SIMD.Float32x4.load(n,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),i))));SIMD.Float32x4.store(t,4,c);var h=SIMD.Float32x4.load(n,8),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),i))));SIMD.Float32x4.store(t,8,f);var M=SIMD.Float32x4.load(n,12),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,3,3,3,3),i))));return SIMD.Float32x4.store(t,12,d),t},a.scalar.multiply=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=e[6],c=e[7],h=e[8],f=e[9],M=e[10],d=e[11],v=e[12],_=e[13],p=e[14],m=e[15],y=n[0],x=n[1],D=n[2],S=n[3];return t[0]=y*r+x*u+D*h+S*v,t[1]=y*a+x*s+D*f+S*_,t[2]=y*o+x*l+D*M+S*p,t[3]=y*i+x*c+D*d+S*m,y=n[4],x=n[5],D=n[6],S=n[7],t[4]=y*r+x*u+D*h+S*v,t[5]=y*a+x*s+D*f+S*_,t[6]=y*o+x*l+D*M+S*p,t[7]=y*i+x*c+D*d+S*m,y=n[8],x=n[9],D=n[10],S=n[11],t[8]=y*r+x*u+D*h+S*v,t[9]=y*a+x*s+D*f+S*_,t[10]=y*o+x*l+D*M+S*p,t[11]=y*i+x*c+D*d+S*m,y=n[12],x=n[13],D=n[14],S=n[15],t[12]=y*r+x*u+D*h+S*v,t[13]=y*a+x*s+D*f+S*_,t[14]=y*o+x*l+D*M+S*p,t[15]=y*i+x*c+D*d+S*m,t},a.multiply=r.USE_SIMD?a.SIMD.multiply:a.scalar.multiply,a.mul=a.multiply,a.scalar.translate=function(t,e,n){var r,a,o,i,u,s,l,c,h,f,M,d,v=n[0],_=n[1],p=n[2];return e===t?(t[12]=e[0]*v+e[4]*_+e[8]*p+e[12],t[13]=e[1]*v+e[5]*_+e[9]*p+e[13],t[14]=e[2]*v+e[6]*_+e[10]*p+e[14],t[15]=e[3]*v+e[7]*_+e[11]*p+e[15]):(r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=e[6],c=e[7],h=e[8],f=e[9],M=e[10],d=e[11],t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=s,t[6]=l,t[7]=c,t[8]=h,t[9]=f,t[10]=M,t[11]=d,t[12]=r*v+u*_+h*p+e[12],t[13]=a*v+s*_+f*p+e[13],t[14]=o*v+l*_+M*p+e[14],t[15]=i*v+c*_+d*p+e[15]),t},a.SIMD.translate=function(t,e,n){var r=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),u=SIMD.Float32x4(n[0],n[1],n[2],0);e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(u,0,0,0,0)),a=SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(u,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,2,2,2,2));var s=SIMD.Float32x4.add(r,SIMD.Float32x4.add(a,SIMD.Float32x4.add(o,i)));return SIMD.Float32x4.store(t,12,s),t},a.translate=r.USE_SIMD?a.SIMD.translate:a.scalar.translate,a.scalar.scale=function(t,e,n){var r=n[0],a=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.SIMD.scale=function(t,e,n){var r,a,o,i=SIMD.Float32x4(n[0],n[1],n[2],0);return r=SIMD.Float32x4.load(e,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(i,0,0,0,0))),a=SIMD.Float32x4.load(e,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(i,1,1,1,1))),o=SIMD.Float32x4.load(e,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,2,2,2,2))),t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.scale=r.USE_SIMD?a.SIMD.scale:a.scalar.scale,a.rotate=function(t,e,n,a){var o,i,u,s,l,c,h,f,M,d,v,_,p,m,y,x,D,S,b,I,w,g,F,E,O=a[0],P=a[1],k=a[2],R=Math.sqrt(O*O+P*P+k*k);return Math.abs(R)<r.EPSILON?null:(R=1/R,O*=R,P*=R,k*=R,o=Math.sin(n),i=Math.cos(n),u=1-i,s=e[0],l=e[1],c=e[2],h=e[3],f=e[4],M=e[5],d=e[6],v=e[7],_=e[8],p=e[9],m=e[10],y=e[11],x=O*O*u+i,D=P*O*u+k*o,S=k*O*u-P*o,b=O*P*u-k*o,I=P*P*u+i,w=k*P*u+O*o,g=O*k*u+P*o,F=P*k*u-O*o,E=k*k*u+i,t[0]=s*x+f*D+_*S,t[1]=l*x+M*D+p*S,t[2]=c*x+d*D+m*S,t[3]=h*x+v*D+y*S,t[4]=s*b+f*I+_*w,t[5]=l*b+M*I+p*w,t[6]=c*b+d*I+m*w,t[7]=h*b+v*I+y*w,t[8]=s*g+f*F+_*E,t[9]=l*g+M*F+p*E,t[10]=c*g+d*F+m*E,t[11]=h*g+v*F+y*E,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},a.scalar.rotateX=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[4],i=e[5],u=e[6],s=e[7],l=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*a+l*r,t[5]=i*a+c*r,t[6]=u*a+h*r,t[7]=s*a+f*r,t[8]=l*a-o*r,t[9]=c*a-i*r,t[10]=h*a-u*r,t[11]=f*a-s*r,t},a.SIMD.rotateX=function(t,e,n){var r=SIMD.Float32x4.splat(Math.sin(n)),a=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),SIMD.Float32x4.mul(o,r))),t},a.rotateX=r.USE_SIMD?a.SIMD.rotateX:a.scalar.rotateX,a.scalar.rotateY=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[0],i=e[1],u=e[2],s=e[3],l=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a-l*r,t[1]=i*a-c*r,t[2]=u*a-h*r,t[3]=s*a-f*r,t[8]=o*r+l*a,t[9]=i*r+c*a,t[10]=u*r+h*a,t[11]=s*r+f*a,t},a.SIMD.rotateY=function(t,e,n){var r=SIMD.Float32x4.splat(Math.sin(n)),a=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(i,a))),t},a.rotateY=r.USE_SIMD?a.SIMD.rotateY:a.scalar.rotateY,a.scalar.rotateZ=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[0],i=e[1],u=e[2],s=e[3],l=e[4],c=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a+l*r,t[1]=i*a+c*r,t[2]=u*a+h*r,t[3]=s*a+f*r,t[4]=l*a-o*r,t[5]=c*a-i*r,t[6]=h*a-u*r,t[7]=f*a-s*r,t},a.SIMD.rotateZ=function(t,e,n){var r=SIMD.Float32x4.splat(Math.sin(n)),a=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),SIMD.Float32x4.mul(o,r))),t},a.rotateZ=r.USE_SIMD?a.SIMD.rotateZ:a.scalar.rotateZ,a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromRotation=function(t,e,n){var a,o,i,u=n[0],s=n[1],l=n[2],c=Math.sqrt(u*u+s*s+l*l);return Math.abs(c)<r.EPSILON?null:(c=1/c,u*=c,s*=c,l*=c,a=Math.sin(e),o=Math.cos(e),i=1-o,t[0]=u*u*i+o,t[1]=s*u*i+l*a,t[2]=l*u*i-s*a,t[3]=0,t[4]=u*s*i-l*a,t[5]=s*s*i+o,t[6]=l*s*i+u*a,t[7]=0,t[8]=u*l*i+s*a,t[9]=s*l*i-u*a,t[10]=l*l*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},a.fromXRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromYRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);
return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromZRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromRotationTranslation=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=r+r,s=a+a,l=o+o,c=r*u,h=r*s,f=r*l,M=a*s,d=a*l,v=o*l,_=i*u,p=i*s,m=i*l;return t[0]=1-(M+v),t[1]=h+m,t[2]=f-p,t[3]=0,t[4]=h-m,t[5]=1-(c+v),t[6]=d+_,t[7]=0,t[8]=f+p,t[9]=d-_,t[10]=1-(c+M),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},a.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},a.getRotation=function(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},a.fromRotationTranslationScale=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3],s=a+a,l=o+o,c=i+i,h=a*s,f=a*l,M=a*c,d=o*l,v=o*c,_=i*c,p=u*s,m=u*l,y=u*c,x=r[0],D=r[1],S=r[2];return t[0]=(1-(d+_))*x,t[1]=(f+y)*x,t[2]=(M-m)*x,t[3]=0,t[4]=(f-y)*D,t[5]=(1-(h+_))*D,t[6]=(v+p)*D,t[7]=0,t[8]=(M+m)*S,t[9]=(v-p)*S,t[10]=(1-(h+d))*S,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},a.fromRotationTranslationScaleOrigin=function(t,e,n,r,a){var o=e[0],i=e[1],u=e[2],s=e[3],l=o+o,c=i+i,h=u+u,f=o*l,M=o*c,d=o*h,v=i*c,_=i*h,p=u*h,m=s*l,y=s*c,x=s*h,D=r[0],S=r[1],b=r[2],I=a[0],w=a[1],g=a[2];return t[0]=(1-(v+p))*D,t[1]=(M+x)*D,t[2]=(d-y)*D,t[3]=0,t[4]=(M-x)*S,t[5]=(1-(f+p))*S,t[6]=(_+m)*S,t[7]=0,t[8]=(d+y)*b,t[9]=(_-m)*b,t[10]=(1-(f+v))*b,t[11]=0,t[12]=n[0]+I-(t[0]*I+t[4]*w+t[8]*g),t[13]=n[1]+w-(t[1]*I+t[5]*w+t[9]*g),t[14]=n[2]+g-(t[2]*I+t[6]*w+t[10]*g),t[15]=1,t},a.fromQuat=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n+n,u=r+r,s=a+a,l=n*i,c=r*i,h=r*u,f=a*i,M=a*u,d=a*s,v=o*i,_=o*u,p=o*s;return t[0]=1-h-d,t[1]=c+p,t[2]=f-_,t[3]=0,t[4]=c-p,t[5]=1-l-d,t[6]=M+v,t[7]=0,t[8]=f+_,t[9]=M-v,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.frustum=function(t,e,n,r,a,o,i){var u=1/(n-e),s=1/(a-r),l=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(a+r)*s,t[10]=(i+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*l,t[15]=0,t},a.perspective=function(t,e,n,r,a){var o=1/Math.tan(e/2),i=1/(r-a);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+r)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*r*i,t[15]=0,t},a.perspectiveFromFieldOfView=function(t,e,n,r){var a=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(i+u),l=2/(a+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-((i-u)*s*.5),t[9]=(a-o)*l*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},a.ortho=function(t,e,n,r,a,o,i){var u=1/(e-n),s=1/(r-a),l=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*u,t[13]=(a+r)*s,t[14]=(i+o)*l,t[15]=1,t},a.lookAt=function(t,e,n,o){var i,u,s,l,c,h,f,M,d,v,_=e[0],p=e[1],m=e[2],y=o[0],x=o[1],D=o[2],S=n[0],b=n[1],I=n[2];return Math.abs(_-S)<r.EPSILON&&Math.abs(p-b)<r.EPSILON&&Math.abs(m-I)<r.EPSILON?a.identity(t):(f=_-S,M=p-b,d=m-I,v=1/Math.sqrt(f*f+M*M+d*d),f*=v,M*=v,d*=v,i=x*d-D*M,u=D*f-y*d,s=y*M-x*f,v=Math.sqrt(i*i+u*u+s*s),v?(v=1/v,i*=v,u*=v,s*=v):(i=0,u=0,s=0),l=M*s-d*u,c=d*i-f*s,h=f*u-M*i,v=Math.sqrt(l*l+c*c+h*h),v?(v=1/v,l*=v,c*=v,h*=v):(l=0,c=0,h=0),t[0]=i,t[1]=l,t[2]=f,t[3]=0,t[4]=u,t[5]=c,t[6]=M,t[7]=0,t[8]=s,t[9]=h,t[10]=d,t[11]=0,t[12]=-(i*_+u*p+s*m),t[13]=-(l*_+c*p+h*m),t[14]=-(f*_+M*p+d*m),t[15]=1,t)},a.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},a.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],h=t[8],f=t[9],M=t[10],d=t[11],v=t[12],_=t[13],p=t[14],m=t[15],y=e[0],x=e[1],D=e[2],S=e[3],b=e[4],I=e[5],w=e[6],g=e[7],F=e[8],E=e[9],O=e[10],P=e[11],k=e[12],R=e[13],A=e[14],z=e[15];return Math.abs(n-y)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(a-x)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-D)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(D))&&Math.abs(i-S)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(u-b)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(s-I)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(I))&&Math.abs(l-w)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(c-g)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(h-F)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(f-E)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(M-O)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(O))&&Math.abs(d-P)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(v-k)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(k))&&Math.abs(_-R)<=r.EPSILON*Math.max(1,Math.abs(_),Math.abs(R))&&Math.abs(p-A)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(m-z)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(z))},t.exports=a},function(t,e,n){var r=n(14),a=n(17),o=n(20),i=n(21),u={};u.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.rotationTo=function(){var t=o.create(),e=o.fromValues(1,0,0),n=o.fromValues(0,1,0);return function(r,a,i){var s=o.dot(a,i);return-.999999>s?(o.cross(t,e,a),o.length(t)<1e-6&&o.cross(t,n,a),o.normalize(t,t),u.setAxisAngle(r,t,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(o.cross(t,a,i),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+s,u.normalize(r,r))}}(),u.setAxes=function(){var t=a.create();return function(e,n,r,a){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],u.normalize(e,u.fromMat3(e,t))}}(),u.clone=i.clone,u.fromValues=i.fromValues,u.copy=i.copy,u.set=i.set,u.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.setAxisAngle=function(t,e,n){n=.5*n;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t},u.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return 0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n},u.add=i.add,u.multiply=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],s=n[1],l=n[2],c=n[3];return t[0]=r*c+i*u+a*l-o*s,t[1]=a*c+i*s+o*u-r*l,t[2]=o*c+i*l+r*s-a*u,t[3]=i*c-r*u-a*s-o*l,t},u.mul=u.multiply,u.scale=i.scale,u.rotateX=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+i*u,t[1]=a*s+o*u,t[2]=o*s-a*u,t[3]=i*s-r*u,t},u.rotateY=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s-o*u,t[1]=a*s+i*u,t[2]=o*s+r*u,t[3]=i*s-a*u,t},u.rotateZ=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+a*u,t[1]=a*s-r*u,t[2]=o*s+i*u,t[3]=i*s-o*u,t},u.calculateW=function(t,e){var n=e[0],r=e[1],a=e[2];return t[0]=n,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-a*a)),t},u.dot=i.dot,u.lerp=i.lerp,u.slerp=function(t,e,n,r){var a,o,i,u,s,l=e[0],c=e[1],h=e[2],f=e[3],M=n[0],d=n[1],v=n[2],_=n[3];return o=l*M+c*d+h*v+f*_,0>o&&(o=-o,M=-M,d=-d,v=-v,_=-_),1-o>1e-6?(a=Math.acos(o),i=Math.sin(a),u=Math.sin((1-r)*a)/i,s=Math.sin(r*a)/i):(u=1-r,s=r),t[0]=u*l+s*M,t[1]=u*c+s*d,t[2]=u*h+s*v,t[3]=u*f+s*_,t},u.sqlerp=function(){var t=u.create(),e=u.create();return function(n,r,a,o,i,s){return u.slerp(t,r,i,s),u.slerp(e,a,o,s),u.slerp(n,t,e,2*s*(1-s)),n}}(),u.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*n+r*r+a*a+o*o,u=i?1/i:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-a*u,t[3]=o*u,t},u.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},u.length=i.length,u.len=u.length,u.squaredLength=i.squaredLength,u.sqrLen=u.squaredLength,u.normalize=i.normalize,u.fromMat3=function(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;n=Math.sqrt(e[3*a+a]-e[3*o+o]-e[3*i+i]+1),t[a]=.5*n,n=.5/n,t[3]=(e[3*o+i]-e[3*i+o])*n,t[o]=(e[3*o+a]+e[3*a+o])*n,t[i]=(e[3*i+a]+e[3*a+i])*n}return t},u.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},u.exactEquals=i.exactEquals,u.equals=i.equals,t.exports=u},function(t,e,n){var r=n(14),a={};a.create=function(){var t=new r.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},a.clone=function(t){var e=new r.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},a.fromValues=function(t,e,n){var a=new r.ARRAY_TYPE(3);return a[0]=t,a[1]=e,a[2]=n,a},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},a.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},a.sub=a.subtract,a.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},a.mul=a.multiply,a.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},a.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},a.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},a.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},a.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},a.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(n*n+r*r+a*a)},a.dist=a.distance,a.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return n*n+r*r+a*a},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)},a.len=a.length,a.squaredLength=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},a.normalize=function(t,e){var n=e[0],r=e[1],a=e[2],o=n*n+r*r+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},a.cross=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],s=n[2];return t[0]=a*s-o*u,t[1]=o*i-r*s,t[2]=r*u-a*i,t},a.lerp=function(t,e,n,r){var a=e[0],o=e[1],i=e[2];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t[2]=i+r*(n[2]-i),t},a.hermite=function(t,e,n,r,a,o){var i=o*o,u=i*(2*o-3)+1,s=i*(o-2)+o,l=i*(o-1),c=i*(3-2*o);return t[0]=e[0]*u+n[0]*s+r[0]*l+a[0]*c,t[1]=e[1]*u+n[1]*s+r[1]*l+a[1]*c,t[2]=e[2]*u+n[2]*s+r[2]*l+a[2]*c,t},a.bezier=function(t,e,n,r,a,o){var i=1-o,u=i*i,s=o*o,l=u*i,c=3*o*u,h=3*s*i,f=s*o;return t[0]=e[0]*l+n[0]*c+r[0]*h+a[0]*f,t[1]=e[1]*l+n[1]*c+r[1]*h+a[1]*f,t[2]=e[2]*l+n[2]*c+r[2]*h+a[2]*f,t},a.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI,a=2*r.RANDOM()-1,o=Math.sqrt(1-a*a)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=a*e,t},a.transformMat4=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[3]*r+n[7]*a+n[11]*o+n[15];return i=i||1,t[0]=(n[0]*r+n[4]*a+n[8]*o+n[12])/i,t[1]=(n[1]*r+n[5]*a+n[9]*o+n[13])/i,t[2]=(n[2]*r+n[6]*a+n[10]*o+n[14])/i,t},a.transformMat3=function(t,e,n){var r=e[0],a=e[1],o=e[2];return t[0]=r*n[0]+a*n[3]+o*n[6],t[1]=r*n[1]+a*n[4]+o*n[7],t[2]=r*n[2]+a*n[5]+o*n[8],t},a.transformQuat=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],s=n[2],l=n[3],c=l*r+u*o-s*a,h=l*a+s*r-i*o,f=l*o+i*a-u*r,M=-i*r-u*a-s*o;return t[0]=c*l+M*-i+h*-s-f*-u,t[1]=h*l+M*-u+f*-i-c*-s,t[2]=f*l+M*-s+c*-u-h*-i,t},a.rotateX=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},a.rotateY=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},a.rotateZ=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},a.forEach=function(){var t=a.create();return function(e,n,r,a,o,i){var u,s;for(n||(n=3),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,u=r;s>u;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}(),a.angle=function(t,e){var n=a.fromValues(t[0],t[1],t[2]),r=a.fromValues(e[0],e[1],e[2]);a.normalize(n,n),a.normalize(r,r);var o=a.dot(n,r);return o>1?0:Math.acos(o)},a.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=e[0],u=e[1],s=e[2];return Math.abs(n-i)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-u)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))},t.exports=a},function(t,e,n){var r=n(14),a={};a.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},a.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.fromValues=function(t,e,n,a){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=a,o},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.set=function(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},a.sub=a.subtract,a.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},a.mul=a.multiply,a.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},a.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},a.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},a.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},a.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},a.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+a*a+o*o)},a.dist=a.distance,a.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+a*a+o*o},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],n=t[1],r=t[2],a=t[3];return Math.sqrt(e*e+n*n+r*r+a*a)},a.len=a.length,a.squaredLength=function(t){var e=t[0],n=t[1],r=t[2],a=t[3];return e*e+n*n+r*r+a*a},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},a.normalize=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*n+r*r+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=n*i,t[1]=r*i,t[2]=a*i,t[3]=o*i),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},a.lerp=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t[2]=i+r*(n[2]-i),t[3]=u+r*(n[3]-u),t},a.random=function(t,e){return e=e||1,t[0]=r.RANDOM(),t[1]=r.RANDOM(),t[2]=r.RANDOM(),t[3]=r.RANDOM(),a.normalize(t,t),a.scale(t,t,e),t},a.transformMat4=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3];return t[0]=n[0]*r+n[4]*a+n[8]*o+n[12]*i,t[1]=n[1]*r+n[5]*a+n[9]*o+n[13]*i,t[2]=n[2]*r+n[6]*a+n[10]*o+n[14]*i,t[3]=n[3]*r+n[7]*a+n[11]*o+n[15]*i,t},a.transformQuat=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],s=n[2],l=n[3],c=l*r+u*o-s*a,h=l*a+s*r-i*o,f=l*o+i*a-u*r,M=-i*r-u*a-s*o;return t[0]=c*l+M*-i+h*-s-f*-u,t[1]=h*l+M*-u+f*-i-c*-s,t[2]=f*l+M*-s+c*-u-h*-i,t[3]=e[3],t},a.forEach=function(){var t=a.create();return function(e,n,r,a,o,i){var u,s;for(n||(n=4),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,u=r;s>u;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}(),a.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=e[0],s=e[1],l=e[2],c=e[3];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-s)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-c)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},t.exports=a},function(t,e,n){var r=n(14),a={};a.create=function(){var t=new r.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},a.clone=function(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},a.fromValues=function(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},a.set=function(t,e,n){return t[0]=e,t[1]=n,t},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},a.sub=a.subtract,a.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},a.mul=a.multiply,a.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},a.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},a.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},a.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},a.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},a.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)},a.dist=a.distance,a.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)},a.len=a.length,a.squaredLength=function(t){var e=t[0],n=t[1];return e*e+n*n},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},a.normalize=function(t,e){var n=e[0],r=e[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},a.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},a.lerp=function(t,e,n,r){var a=e[0],o=e[1];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t},a.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},a.transformMat2=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a,t[1]=n[1]*r+n[3]*a,t},a.transformMat2d=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a+n[4],t[1]=n[1]*r+n[3]*a+n[5],t},a.transformMat3=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[3]*a+n[6],t[1]=n[1]*r+n[4]*a+n[7],t},a.transformMat4=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[4]*a+n[12],t[1]=n[1]*r+n[5]*a+n[13],t},a.forEach=function(){var t=a.create();return function(e,n,r,a,o,i){var u,s;for(n||(n=2),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,u=r;s>u;u+=n)t[0]=e[u],t[1]=e[u+1],o(t,t,i),e[u]=t[0],e[u+1]=t[1];return e}}(),a.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},a.equals=function(t,e){var n=t[0],a=t[1],o=e[0],i=e[1];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-i)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))},t.exports=a},function(t,e){"use strict";function n(){return"ontouchstart"in document.documentElement}function r(t,e,n,r){return Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))}Object.defineProperty(e,"__esModule",{value:!0}),e.isTouchDevice=n,e.dist=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(6),l=r(s),c=function(t){function e(){a(this,e);var t=o(this,Object.getPrototypeOf(e).call(this));return t._store={},t}return i(e,t),u(e,[{key:"load",value:function(t){var e=this,n=0,r=0,a=function(t,a,o){return function(){r++,e._store[t]=a,r===n&&o()}};return new Promise(function(e,r){var o=Object.getOwnPropertyNames(t);o.forEach(function(o){var i=t[o],u=new Image;n++,u.src=i,u.onload=a(o,u,e),u.onerror=r})})}},{key:"get",value:function(t){return this._store[t]}}]),e}(l["default"]);e["default"]=c,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),o=r(a),i={};i.getBoundingRectangle=function(t){for(var e=Number.MAX_VALUE,n=Number.MAX_VALUE,r=Number.MIN_VALUE,a=Number.MIN_VALUE,i=0;i<t.length;i++){var u=t[i][0],s=t[i][1];e>u&&(e=u),u>r&&(r=u),n>s&&(n=s),s>a&&(a=s)}var l=.05*Math.max(r-e,a-n);return e-=l,r+=l,n-=l,a+=l,new o["default"](e,n,r-e,a-n)},i.linesIntersect=function(t,e,n,r,a,o,i,u){var s=void 0,l=void 0,c=void 0,h=void 0;s=n-t,l=r-e,c=i-a,h=u-o;var f=void 0,M=void 0;return f=(-l*(t-a)+s*(e-o))/(-c*l+s*h),M=(c*(e-o)-h*(t-a))/(-c*l+s*h),f>=0&&1>=f&&M>=0&&1>=M?[t+M*s,e+M*l]:null},i.sign=function(t){return t>0?1:0===t?0:-1},i.pointInsidePolygon=function(t,e,n,r,a){if(void 0===r||void 0===a){var o=i.getBoundingRectangle(n);r=o.x+o.width,a=e}for(var u=0,s=0;s<n.length;s++){var l=n[s][0],c=n[s][1],h=s+1===n.length?n[0][0]:n[s+1][0],f=s+1===n.length?n[0][1]:n[s+1][1];i.linesIntersect(t,e,r,a,l,c,h,f)&&u++}return u%2===1},i.segmentIntersectsPolygon=function(t,e,n,r,a){for(var o=0;o<a.length;o++){var u=a[o][0],s=a[o][1],l=o+1===a.length?a[0][0]:a[o+1][0],c=o+1===a.length?a[0][1]:a[o+1][1];if(i.linesIntersect(t,e,n,r,u,s,l,c))return!0}return!1},i.distance=function(t,e,n,r){return Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))},i.distanceSquared=function(t,e,n,r){return(t-n)*(t-n)+(e-r)*(e-r)},i.distanceFromPointToSegment=function(t,e,n,r,a,o){var u=i.distanceSquared(n,r,a,o);if(0===u)return i.distance(t,e,n,r);var s=((t-n)*(a-n)+(e-r)*(o-r))/u;return 0>s?i.distance(t,e,n,r):s>1?i.distance(t,e,a,o):i.distance(t,e,n+s*(a-n),r+s*(o-r))},i.distanceFromPointToPolygon=function(t,e,n){for(var r=i.distanceFromPointToSegment(t,e,n[n.length-1][0],n[n.length-1][1],n[0][0],n[0][1]),a=1;a<n.length;a++){var o=i.distanceFromPointToSegment(t,e,n[a-1][0],n[a-1][1],n[a][0],n[a][1]);r>o&&(r=o)}return r},e["default"]=i,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.TileMapOrtho=e.TileSheet=e.SpriteSheet=e.Sprite=e.Shapes=e.Rectangle=void 0;var a=n(27),o=r(a),i=n(28),u=r(i),s=n(29),l=r(s),c=n(30),h=r(c),f=n(31),M=r(f),d=n(32),v=r(d);e.Rectangle=o["default"],e.Shapes=u["default"],e.Sprite=l["default"],e.SpriteSheet=h["default"],e.TileSheet=M["default"],e.TileMapOrtho=v["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(12),l=r(s),c=function(t){function e(){return a(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return i(e,t),u(e,[{key:"draw",value:function(t){var e=t.graphContext;e.fillStyle="green",e.fillRect(this._x,this._y,10,10)}}]),e}(l["default"]);e["default"]=c,t.exports=e["default"]},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};n.drawMarker=function(t,e,n,r,a,o){r=r||10,a=a||5,o=o||"blue",t.save(),t.strokeStyle=o,t.lineWidth=5,t.beginPath(),t.moveTo(e-r,n+r),t.lineTo(e+r,n-r),t.moveTo(e-r,n-r),t.lineTo(e+r,n+r),t.stroke(),t.restore()},n.drawArrow1=function(t,e,n,r,a,o,i,u){r=r||50,a=a||15,o=o||10,i=i||5,u=u||0,t.save(),t.fillStyle="green",t.beginPath(),u&&(t.translate(e,n),t.rotate(u),t.translate(-e,-n)),t.moveTo(e+a,n),t.lineTo(e+a-i,n-o),t.lineTo(e+a+r,n),t.lineTo(e+a-i,n+o),t.closePath(),t.fill(),t.restore()},n.drawPolygon=function(t,e){t.save(),t.strokeStyle="lightblue",t.fillStyle="rgba(173, 216, 230, 1)",t.lineWidth=5,t.beginPath(),t.moveTo(e[0][0],e[0][1]);for(var n=1;n<e.length;n++)t.lineTo(e[n][0],e[n][1]);t.closePath(),t.fill(),t.stroke(),t.restore()},n.fillPolygon=function(t,e){t.save(),t.strokeStyle="grey",t.lineWidth=1;for(var n=Number.MAX_VALUE,r=Number.MAX_VALUE,a=Number.MIN_VALUE,o=Number.MIN_VALUE,i=Math.PI/4,u=0;u<e.length;u++)e[u][0]<n&&(n=e[u][0]),e[u][1]<r&&(r=e[u][1]),e[u][0]>a&&(a=e[u][0]),e[u][1]>o&&(o=e[u][1]);t.beginPath(),t.moveTo(e[0][0],e[0][1]);for(var s=1;s<e.length;s++)t.lineTo(e[s][0],e[s][1]);t.closePath(),t.clip();var l=(o-r)/Math.tan(i);t.beginPath();for(var c=n-l;a>c;c+=15)t.moveTo(c,o),t.lineTo(c+l,r);t.stroke(),t.restore()},e["default"]=n,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(12),l=r(s),c=n(3),h=r(c),f=function(t){function e(t){a(this,e);var n=o(this,Object.getPrototypeOf(e).call(this));return n._img=t,n._width=t.width,n._height=t.height,n}return i(e,t),u(e,[{key:"setSize",value:function(t,e){if(void 0===e){var n=t;t=this._img.width*n,e=this._img.height*n}this._width=t,this._height=e}},{key:"update",value:function(t){}},{key:"draw",value:function(t){var e=t.graphContext;e.save(),e.drawImage(this._img,0,0,this._img.width,this._img.height,this._x,this._y,this._width,this._height),e.restore()}},{key:"getBounds",value:function(){return new h["default"](this._x,this._y,this._width,this._height)}}]),e}(l["default"]);e["default"]=f,t.exports=e["default"]},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(e,r){n(this,t),this._image=e,this._frames=r}return r(t,[{key:"drawFrame",value:function(e,n,r,a){var o=this._frames[n];o&&e.drawImage(this._image,o[t.FRAME_X],o[t.FRAME_Y],o[t.FRAME_WIDTH],o[t.FRAME_HEIGHT],r-o[t.FRAME_ANCHOR_X],a-o[t.FRAME_ANCHOR_Y],o[t.FRAME_WIDTH],o[t.FRAME_HEIGHT])}}]),t}();e["default"]=a,a.FRAME_X=0,a.FRAME_Y=1,a.FRAME_WIDTH=2,a.FRAME_HEIGHT=3,a.FRAME_ANCHOR_X=4,a.FRAME_ANCHOR_Y=5,t.exports=e["default"]},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){
function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(e,r,a){n(this,t),this._image=e,this._w=r,this._h=a,this._row=Math.floor(e.width/r)}return r(t,[{key:"drawTile",value:function(t,e,n,r){if(!(0>e)){var a=e%this._row*this._w,o=Math.floor(e/this._row)*this._h;t.drawImage(this._image,a,o,this._w,this._h,n,r,this._w,this._h)}}}]),t}();e["default"]=a,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(12),l=r(s),c=function(t){function e(t,n,r,i,u){a(this,e);var s=o(this,Object.getPrototypeOf(e).call(this));return s._mapData=t,s._image=n,s._tileSize=r,s._viewportWidth=i,s._viewportHeight=u,s._x=0,s._y=0,s._offCanvas=document.createElement("canvas"),s._offContext=s._offCanvas.getContext("2d"),s._offBounds={x:0,y:0,w:0,h:0},s._offDirty=!0,s._resetOffScreenCanvas(),s._tilesPerRow=n.width/r,s}return i(e,t),u(e,[{key:"draw",value:function(t){var e=t.graphContext;this._offDirty&&this._redrawOffscreen();var n=-Math.floor(this._x)-this._offBounds.x*this._tileSize,r=-Math.floor(this._y)-this._offBounds.y*this._tileSize,a=Math.min(this._offCanvas.width-n,this._viewportWidth),o=Math.min(this._offCanvas.height-r,this._viewportHeight);e.drawImage(this._offCanvas,n,r,a,o,0,0,a,o)}},{key:"move",value:function(t,e){this._x+=t,this._y+=e,this._updateOffscreenBounds()}},{key:"setViewportSize",value:function(t,e){this._viewportWidth=t,this._viewportHeight=e,this._resetOffScreenCanvas()}},{key:"_resetOffScreenCanvas",value:function(){this._updateOffscreenBounds(),this._offCanvas.width=this._offBounds.w*this._tileSize,this._offCanvas.height=this._offBounds.h*this._tileSize,this._offDirty=!0}},{key:"_redrawOffscreen",value:function(){var t=this._offContext;t.clearRect(0,0,this._offCanvas.width,this._offCanvas.height);for(var e=Math.max(this._offBounds.x,0),n=Math.min(e+this._offBounds.w-1,this._mapData[0].length-1),r=Math.max(this._offBounds.y,0),a=Math.min(r+this._offBounds.h-1,this._mapData.length-1),o=r;a>=o;o++)for(var i=e;n>=i;i++){var u=this._mapData[o][i];this._drawTileAt(t,u,i,o)}this._offDirty=!1}},{key:"_drawTileAt",value:function(t,e,n,r){var a=e%this._tilesPerRow*this._tileSize,o=Math.floor(e/this._tilesPerRow)*this._tileSize,i=this._tileSize,u=(n-this._offBounds.x)*i,s=(r-this._offBounds.y)*i;t.drawImage(this._image,a,o,i,i,u,s,i,i)}},{key:"_updateOffscreenBounds",value:function(){var t=this._offBounds,e={x:Math.floor(-this._x/this._tileSize),y:Math.floor(-this._y/this._tileSize),w:Math.ceil(this._viewportWidth/this._tileSize)+1,h:Math.ceil(this._viewportHeight/this._tileSize)+1};t.x===e.x&&t.y===e.y&&t.w===e.w&&t.h===e.h||(this._offBounds=e,this._offDirty=!0)}}]),e}(l["default"]);e["default"]=c,t.exports=e["default"]}])});
//# sourceMappingURL=draco.min.js.map