!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("draco",[],e):"object"==typeof exports?exports.draco=e():t.draco=e()}(this,function(){return function(t){function e(a){if(n[a])return n[a].exports;var o=n[a]={exports:{},id:a,loaded:!1};return t[a].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.ui=e.dist=e.isTouchDevice=e.Rect=e.MathUtils=e.ImageManager=e.GameScene=e.GameObject=e.EventEmitter=e.Engine=e.DirtyRectangleManager=e.Animator=void 0;var r=n(1),i=o(r),u=n(2),s=o(u),l=n(4),h=o(l),c=n(6),f=o(c),M=n(12),d=o(M),v=n(11),_=o(v),m=n(10),p=o(m),y=n(24),D=o(y),x=n(3),S=o(x),I=n(23),b=n(25),w=a(b);e.Animator=i["default"],e.DirtyRectangleManager=s["default"],e.Engine=h["default"],e.EventEmitter=f["default"],e.GameObject=d["default"],e.GameScene=_["default"],e.ImageManager=p["default"],e.MathUtils=D["default"],e.Rect=S["default"],e.isTouchDevice=I.isTouchDevice,e.dist=I.dist,e.ui=w},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),o=function(){function t(e){n(this,t),this._duration=e,this._repeatCount=1,this._acceleration=0,this._deceleration=0,this._loopsDone=0,this._repeatBehavior=t.RepeatBehavior.LOOP,this._timeSinceLoopStart=0,this._started=!1,this._running=!1,this._reverseLoop=!1}return a(t,[{key:"start",value:function(){this._started=!0,this._running=!0}},{key:"isRunning",value:function(){return this._running}},{key:"stop",value:function(){this._loopsDone=0,this._timeSinceLoopStart=0,this._running=!1,this._started=!1}},{key:"pause",value:function(){this._running=!1}},{key:"getDuration",value:function(){return this._duration}},{key:"setDuration",value:function(t){if(this._throwIfStarted(),1>t)throw Error("Duration can't be < 1");this._duration=t}},{key:"getRepeatCount",value:function(){return this._repeatCount}},{key:"setRepeatCount",value:function(e){if(this._throwIfStarted(),1>e&&e!==t.INFINITE)throw Error("Repeat count must be greater than 0 or INFINITE");this._repeatCount=e}},{key:"getRepeatBehavior",value:function(){return this._repeatBehavior}},{key:"setRepeatBehavior",value:function(e){if(this._throwIfStarted(),e!==t.RepeatBehavior.LOOP&&e!==t.RepeatBehavior.REVERSE)throw Error("Repeat behavior should be either RepeatBehavior.LOOP or RepeatBehavior.REVERSE");this._repeatBehavior=e}},{key:"getAcceleration",value:function(){return this._acceleration}},{key:"setAcceleration",value:function(t){if(this._throwIfStarted(),0>t||t>1||t>1-this._deceleration)throw Error("Acceleration value must be from 0 to 1 and cannot be greater than (1 - deceleration)");this._acceleration=t}},{key:"getDeceleration",value:function(){return this._deceleration}},{key:"setDeceleration",value:function(t){if(this._throwIfStarted(),0>t||t>1||t>1-this._acceleration)throw Error("Deceleration value must be from 0 to 1 and cannot be greater than (1 - acceleration)");this._deceleration=t}},{key:"_timingEventPreprocessor",value:function(t){return this._accelerationDecelerationPreprocessor(t)}},{key:"_accelerationDecelerationPreprocessor",value:function(t){if(this._acceleration||this._deceleration){var e=1/(1-this._acceleration/2-this._deceleration/2);if(t<this._acceleration)t*=e*(t/this._acceleration)/2;else if(t>1-this._deceleration){var n=t-(1-this._deceleration),a=n/this._deceleration;t=e*(1-this._acceleration/2-this._deceleration+n*(2-a)/2)}else t=e*(t-this._acceleration/2);0>t?t=0:t>1&&(t=1)}return t}},{key:"update",value:function(e){if(!this._started)return!1;if(this._running||(e=0),this._timeSinceLoopStart+=e,this._timeSinceLoopStart>=this._duration){var n=Math.floor(this._timeSinceLoopStart/this._duration);this._timeSinceLoopStart%=this._duration,this._repeatCount!==t.INFINITE&&n>this._repeatCount-this._loopsDone&&(n=this._repeatCount-this._loopsDone);for(var a=1;n>=a;a++)this._loopsDone++,this._reverseLoop=this._repeatBehavior===t.RepeatBehavior.REVERSE&&this._loopsDone%2===1,this._onLoopEnd(this._loopsDone);if(this._repeatCount!==t.INFINITE&&this._loopsDone===this._repeatCount)return this._onAnimationEnd(),this.stop(),!1}var o=this._timeSinceLoopStart/this._duration;return this._reverseLoop&&(o=1-o),o=this._timingEventPreprocessor(o),this._onUpdate(o,this._loopsDone),o}},{key:"_onUpdate",value:function(t,e){}},{key:"_onLoopEnd",value:function(t){}},{key:"_onAnimationEnd",value:function(){}},{key:"_throwIfStarted",value:function(){if(this._started)throw Error("Cannot change property on the started animator")}}]),t}();e["default"]=o,o.INFINITE=-1,o.RepeatBehavior={LOOP:1,REVERSE:2},t.exports=e["default"]},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),i=n(3),u=a(i),s=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?.5:arguments[0];o(this,t),this._allDirtyThreshold=e,this._viewport=new u["default"](0,0,100,100),this._dirtyRect=null,this._allDirty=!0,this.markAllDirty()}return r(t,[{key:"clear",value:function(){this._dirtyRect=null,this._allDirty=!1}},{key:"markDirty",value:function(t){!t.width&&!t.height||this._allDirty||(t=this._viewport.intersection(t),t&&(this._dirtyRect?(this._dirtyRect=this._dirtyRect.convexHull(t),this._dirtyRect.width*this._dirtyRect.height>this._allDirtyThreshold*this._viewport.width*this._viewport.height&&this.markAllDirty()):this._dirtyRect=this._viewport.intersection(t)))}},{key:"markAllDirty",value:function(){this._allDirty=!0,this._dirtyRect=this._viewport.copy()}},{key:"isClean",value:function(){return!this._dirtyRect}},{key:"isAllDirty",value:function(){return this._allDirty}},{key:"getDirtyRect",value:function(){return this._dirtyRect}},{key:"setViewport",value:function(t,e){this._viewport.width===t&&this._viewport.height===e||(this._viewport.width=t,this._viewport.height=e,this.markAllDirty())}}]),t}();e["default"]=s,t.exports=e["default"]},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),o=function(){function t(e,a,o,r){n(this,t),this.x=e,this.y=a,this.width=o,this.height=r}return a(t,[{key:"copy",value:function(){return new t(this.x,this.y,this.width,this.height)}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}},{key:"toString",value:function(){return"[x="+this.x+", y="+this.y+","+("width="+this.width+", height="+this.height+"]")}},{key:"intersects",value:function(t,e,n,a){if(1===arguments.length){var o=t;t=o.x,e=o.y,n=o.width,a=o.height}return this.x<=t+n&&this.x+this.width>=t&&this.y<=e+a&&this.y+this.height>=e}},{key:"covers",value:function(t,e,n,a){if(1===arguments.length){var o=t;t=o.x,e=o.y,n=o.width,a=o.height}return t>=this.x&&e>=this.y&&t+n<=this.x+this.width&&e+a<=this.y+this.height}},{key:"convexHull",value:function(e,n,a,o){if(1===arguments.length){var r=e;e=r.x,n=r.y,a=r.width,o=r.height}var i=Math.min(this.x,e),u=Math.min(this.y,n),s=Math.max(this.x+this.width,e+a)-i,l=Math.max(this.y+this.height,n+o)-u;return new t(i,u,s,l)}},{key:"intersection",value:function(e,n,a,o){if(1===arguments.length){var r=e;e=r.x,n=r.y,a=r.width,o=r.height}var i=Math.max(this.x,e),u=Math.max(this.y,n),s=Math.min(this.x+this.width,e+a)-i,l=Math.min(this.y+this.height,n+o)-u;return 0>=s||0>=l?null:new t(i,u,s,l)}},{key:"containsPoint",value:function(t,e){return t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}},{key:"getOverlappingGridCells",value:function(e,n,a,o){var r=Math.max(0,Math.floor(this.x/e)),i=Math.max(0,Math.floor(this.y/n)),u=Math.min(a-r,Math.floor((this.x+this.width)/e)-r+1),s=Math.min(o-i,Math.floor((this.y+this.height)/n)-i+1);return new t(r,i,u,s)}}]),t}();e["default"]=o,t.exports=e["default"]},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),i=n(5),u=a(i),s=n(7),l=a(s),h=n(9),c=a(h),f=n(2),M=a(f),d=n(10),v=a(d),_=n(11),m=a(_),p=n(23),y=function(){function t(e,n,a){o(this,t);var r=this._canvas=this._getCanvasElement(e);void 0!==n&&void 0!==a||(n=r.width,a=r.height),this._ctx=r.getContext("2d"),this._scenes={},this._currentScene=null,this._lastTick=Date.now(),this._input=(0,p.isTouchDevice)()?l["default"]:c["default"],this._keyboard=new u["default"](r),this._dirtyRects=new M["default"],this._dirtyRects.setViewport(n,a),this._resourceManager=new v["default"],this._tick=this._tick.bind(this),this._gameContext={resourceManager:this._resourceManager,width:r.width,height:r.height},this._initDefaultScene()}return r(t,[{key:"loadResources",value:function(t,e){this._resourceManager.load(t,e,function(){})}},{key:"getResource",value:function(t){return this._resourceManager.get(t)}},{key:"getScene",value:function(){return this._currentScene}},{key:"runScene",value:function(t){if(!this._scenes.hasOwnProperty(t))throw Error("Could not find scene ["+t+"] to run");this._currentScene=this._scenes[t],this._dirtyRects.markAllDirty()}},{key:"addScene",value:function(t,e){e.init(this._gameContext),this._scenes[t]=e,this._currentScene||this.runScene(t)}},{key:"scene",value:function(t,e){void 0===e?this.runScene(t):this.addScene(t,e)}},{key:"start",value:function(){this._lastTick=Date.now(),this._tick()}},{key:"_tick",value:function(){requestAnimationFrame(this._tick);var t=Date.now()-this._lastTick;this._lastTick=Date.now();var e={dt:t,input:this._input,keyboard:this._keyboard,graphContext:this._ctx,width:this._canvas.width,height:this._canvas.height,dirtyRects:this._dirtyRects};this._currentScene&&(this._update(e),this._dirtyRects.isClean()||this._draw(e),this._keyboard.resetPressed())}},{key:"_update",value:function(t){this._currentScene.update(t)}},{key:"_draw",value:function(t){var e=this._dirtyRects.getDirtyRect();this._ctx.save(),this._ctx.beginPath(),this._ctx.rect(e.x,e.y,e.width,e.height),this._ctx.clip(),this._currentScene.draw(t),this._dirtyRects.clear(),this._ctx.restore()}},{key:"_initDefaultScene",value:function(){this.addScene("default",new m["default"])}},{key:"_getCanvasElement",value:function(t){if("string"==typeof t)return document.getElementById(t);if(t instanceof HTMLCanvasElement)return t;throw Error("Could not find <canvas> element to attach to Enine")}}]),t}();e["default"]=y,t.exports=e["default"]},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),s=n(6),l=a(s),h=function(t){function e(t){o(this,e);var n=r(this,Object.getPrototypeOf(e).call(this));return n._element=null,n._stopDomEvents=!0,n._keys=[],n._pressed=[],n._onKeyDown=n._onKeyDown.bind(n),n._onKeyUp=n._onKeyUp.bind(n),n.attachTo(t),n}return i(e,t),u(e,[{key:"detach",value:function(){this._element&&(this._detachDomListeners(),this._element=null)}},{key:"attachTo",value:function(t){this._element&&this._detachDomListeners(),this._element=t,t&&this._attachDomListeners(),t.focus()}},{key:"getStopDomEvents",value:function(){return this._stopDomEvents}},{key:"setStopDomEvents",value:function(t){this._stopDomEvents=t}},{key:"isDown",value:function(t){return this._keys[t]}},{key:"isPressed",value:function(t){return this._pressed[t]}},{key:"resetPressed",value:function(){this._pressed=[]}},{key:"_stopEventIfRequired",value:function(t){this._stopDomEvents&&(t.stopPropagation(),t.preventDefault())}},{key:"_onKeyDown",value:function(t){this._pressed[t.keyCode]=!this.isDown(t.keyCode),this._keys[t.keyCode]=!0,this._stopEventIfRequired(t)}},{key:"_onKeyUp",value:function(t){this._keys[t.keyCode]=!1,this._pressed[t.keyCode]=!1,this._stopEventIfRequired(t)}},{key:"_attachDomListeners",value:function(){var t=this._element;t.addEventListener("keydown",this._onKeyDown,!1),t.addEventListener("keyup",this._onKeyUp,!1)}},{key:"_detachDomListeners",value:function(){var t=this._element;t.removeEventListener("keydown",this._onKeyDown,!1),t.removeEventListener("keyup",this._onKeyUp,!1)}}]),e}(l["default"]);e["default"]=h,t.exports=e["default"]},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),o=function(){function t(){n(this,t),this._listeners={}}return a(t,[{key:"addListener",value:function(t,e){if("function"!=typeof e)throw Error("Listener must be a function");this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)}},{key:"removeListener",value:function(t,e){if("function"!=typeof e)throw Error("Listener must be a function");if(this._listeners[t]){var n=this._listeners[t].indexOf(e);-1!==n&&this._listeners[t].splice(n,1)}}},{key:"removeAllListeners",value:function(t){t?this._listeners[t]=[]:this._listeners={}}},{key:"emit",value:function(t,e){if(this._listeners[t]&&this._listeners[t].length)for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)}}]),t}();e["default"]=o,o.prototype.on=o.prototype.addListener,t.exports=e["default"]},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),s=function f(t,e,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:f(o,e,n)}if("value"in a)return a.value;var r=a.get;if(void 0!==r)return r.call(n)},l=n(8),h=a(l),c=function(t){function e(t){o(this,e);var n=r(this,Object.getPrototypeOf(e).call(this,t));return n._isDown=!1,n._lastInteractionCoordinates={x:0,y:0},n._onDownDomEvent=n._onDownDomEvent.bind(n),n._onUpDomEvent=n._onUpDomEvent.bind(n),n._onMoveDomEvent=n._onMoveDomEvent.bind(n),n.attachTo(t),n}return i(e,t),u(e,[{key:"isDown",value:function(){return this._isDown}},{key:"getCoordinates",value:function(){return this._lastInteractionCoordinates}},{key:"_attachDomListeners",value:function(){var t=this._element;t.addEventListener("touchstart",this._onDownDomEvent,!1),t.addEventListener("touchend",this._onUpDomEvent,!1),t.addEventListener("touchcancel",this._onUpDomEvent,!1),t.addEventListener("touchmove",this._onMoveDomEvent,!1)}},{key:"_detachDomListeners",value:function(){var t=this._element;t.removeEventListener("touchstart",this._onDownDomEvent,!1),t.removeEventListener("touchend",this._onUpDomEvent,!1),t.removeEventListener("touchcancel",this._onUpDomEvent,!1),t.removeEventListener("touchmove",this._onMoveDomEvent,!1)}},{key:"_onDownDomEvent",value:function(t){this._lastInteractionCoordinates=this._getInputCoordinates(t),this._isDown=!0,s(Object.getPrototypeOf(e.prototype),"_onDownDomEvent",this).call(this,t)}},{key:"_onUpDomEvent",value:function(t){this.emit("up",{x:this._lastInteractionCoordinates.x,y:this._lastInteractionCoordinates.y,moved:this._moving,domEvent:t}),this._stopEventIfRequired(t),this._isDown=!1,this._moving=!1}},{key:"_onMoveDomEvent",value:function(t){this._lastInteractionCoordinates=this._getInputCoordinates(t),s(Object.getPrototypeOf(e.prototype),"_onMoveDomEvent",this).call(this,t)}}]),e}(h["default"]);e["default"]=c,t.exports=e["default"]},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),s=n(6),l=a(s),h=function(t){function e(t){o(this,e);var n=r(this,Object.getPrototypeOf(e).call(this));return n._element=null,n._moving=!1,n._lastMoveCoordinates=null,n._moveThreshold=10,n._stopDomEvents=!1,n}return i(e,t),u(e,[{key:"detach",value:function(){this._element&&(this._detachDomListeners(),this._element=null)}},{key:"attachTo",value:function(t){this._element&&this._detachDomListeners(),this._element=t,t&&this._attachDomListeners()}},{key:"getMoveThreshold",value:function(){return this._moveThreshold}},{key:"setMoveThreshold",value:function(t){this._moveThreshold=t}},{key:"getStopDomEvents",value:function(){return this._stopDomEvents}},{key:"setStopDomEvents",value:function(t){this._stopDomEvents=t}},{key:"_onDownDomEvent",value:function(t){var e=this._lastMoveCoordinates=this._getInputCoordinates(t);this.emit("down",{x:e.x,y:e.y,domEvent:t}),this._stopEventIfRequired(t)}},{key:"_onUpDomEvent",value:function(t){var e=this._getInputCoordinates(t);this.emit("up",{x:e.x,y:e.y,moved:this._moving,domEvent:t}),this._stopEventIfRequired(t),this._moving=!1}},{key:"_onMoveDomEvent",value:function(t){var e=this._getInputCoordinates(t),n=e.x-this._lastMoveCoordinates.x,a=e.y-this._lastMoveCoordinates.y,o=Math.sqrt(n*n+a*a);!this._moving&&o>this._moveThreshold&&(this._moving=!0),this._moving&&(this.emit("move",{x:e.x,y:e.y,deltaX:n,deltaY:a,domEvent:t}),this._lastMoveCoordinates=e),this._stopEventIfRequired(t)}},{key:"_stopEventIfRequired",value:function(t){this._stopDomEvents&&(t.stopPropagation(),t.preventDefault())}},{key:"_getInputCoordinates",value:function(t){var e=this._element,n=t.targetTouches?t.targetTouches[0]:t,a=(n.pageX||n.clientX+document.body.scrollLeft)-e.offsetLeft,o=(n.pageY||n.clientY+document.body.scrollTop)-e.offsetTop;return{x:a,y:o}}}]),e}(l["default"]);e["default"]=h,t.exports=e["default"]},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),s=function f(t,e,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:f(o,e,n)}if("value"in a)return a.value;var r=a.get;if(void 0!==r)return r.call(n)},l=n(8),h=a(l),c=function(t){function e(t){o(this,e);var n=r(this,Object.getPrototypeOf(e).call(this,t));return n._mouseDown=!1,n._onDownDomEvent=n._onDownDomEvent.bind(n),n._onUpDomEvent=n._onUpDomEvent.bind(n),n._onMoveDomEvent=n._onMoveDomEvent.bind(n),n._onMouseOut=n._onMouseOut.bind(n),n._onHoverDomEvent=n._onHoverDomEvent.bind(n),n._coords={x:-1,y:-1},n.attachTo(t),n}return i(e,t),u(e,[{key:"isDown",value:function(){return this._mouseDown}},{key:"getCoordinates",value:function(){return this._coords}},{key:"_attachDomListeners",value:function(){var t=this._element;t.addEventListener("mousedown",this._onDownDomEvent,!1),t.addEventListener("mouseup",this._onUpDomEvent,!1),t.addEventListener("mousemove",this._onMoveDomEvent,!1),t.addEventListener("mouseout",this._onMouseOut,!1)}},{key:"_detachDomListeners",value:function(){var t=this._element;t.removeEventListener("mousedown",this._onDownDomEvent,!1),t.removeEventListener("mouseup",this._onUpDomEvent,!1),t.removeEventListener("mousemove",this._onMoveDomEvent,!1),t.removeEventListener("mouseout",this._onMouseOut,!1)}},{key:"_onDownDomEvent",value:function(t){this._mouseDown=!0,s(Object.getPrototypeOf(e.prototype),"_onDownDomEvent",this).call(this,t)}},{key:"_onUpDomEvent",value:function(t){this._mouseDown=!1,h["default"].prototype._onUpDomEvent.call(this,t)}},{key:"_onMoveDomEvent",value:function(t){this._mouseDown?s(Object.getPrototypeOf(e.prototype),"_onMoveDomEvent",this).call(this,t):this._onHoverDomEvent(t)}},{key:"_onHoverDomEvent",value:function(t){var e=this._coords=this._getInputCoordinates(t);this.emit("hover",{x:e.x,y:e.y,domEvent:t}),this._stopEventIfRequired(t)}},{key:"_onMouseOut",value:function(){this._mouseDown=!1}}]),e}(h["default"]);e["default"]=c,t.exports=e["default"]},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),o=function(){function t(){n(this,t),this._imageQueue=[],this._images={}}return a(t,[{key:"_addImage",value:function(t,e){this._imageQueue.push({key:t,path:e})}},{key:"load",value:function(t,e,n){var a=function(){},o=this._imageQueue;for(var r in t)this._addImage(r,t[r]);if(e=e||a,n=n||a,this._imageQueue=[],0===o.length)return void n(0,0,null,null,!0);for(var i={loaded:0,total:o.length},u=0;u<o.length;u++)this._loadItem(o[u],i,e,n)}},{key:"_loadItem",value:function(t,e,n,a){var o=this,r=new Image;r.onload=function(){o._images[t.key]=r,o._onItemLoaded(t,e,n,a,!0)},r.onerror=function(){o._images[t.key]=o._placeholder,o._onItemLoaded(t,e,n,a,!1)},r.src=t.path}},{key:"_onItemLoaded",value:function(t,e,n,a,o){e.loaded++,a(e.loaded,e.total,t.key,t.path,o),e.loaded===e.total&&n()}},{key:"get",value:function(t){return this._images[t]}}]),t}();e["default"]=o,t.exports=e["default"]},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),s=function f(t,e,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:f(o,e,n)}if("value"in a)return a.value;var r=a.get;if(void 0!==r)return r.call(n)},l=n(12),h=a(l),c=function(t){function e(){o(this,e);var t=r(this,Object.getPrototypeOf(e).call(this));return t._gameContext=null,t._clearColor="#6296A6",t._ignoreDirtyRectangles=!0,t}return i(e,t),u(e,[{key:"init",value:function(t){this._gameContext=t}},{key:"update",value:function(t){s(Object.getPrototypeOf(e.prototype),"update",this).call(this,t),this._ignoreDirtyRectangles&&t.dirtyRects.markAllDirty()}},{key:"draw",value:function(t){var n=t.graphContext;n.save(),this._clearColor&&(n.fillStyle=this._clearColor,n.fillRect(0,0,t.width,t.height)),s(Object.getPrototypeOf(e.prototype),"draw",this).call(this,t),n.restore()}},{key:"addChild",value:function(t){s(Object.getPrototypeOf(e.prototype),"addChild",this).call(this,t)}},{key:"registerObject",value:function(t){}},{key:"deregisterObject",value:function(t){}},{key:"getResource",value:function(t){return this._gameContext.resourceManager.get(t)}},{key:"setClearColor",value:function(t){this._clearColor=t}},{key:"setIgnoreDirtyRectanges",value:function(t){this._ignoreDirtyRectangles=t}}]),e}(h["default"]);e["default"]=c,t.exports=e["default"]},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),i=n(3),u=a(i),s=n(13),l=function(){function t(){o(this,t),this._x=0,this._y=0,this._width=0,this._height=0,this._id=t.uid++,this._name="object_"+this._id,this._anchorX=0,this._anchorY=0,this._rot=0,this._scale=1,this._relativeMatrix=s.mat3.create(),this._absoulteMatrix=s.mat3.create(),this._scene=null,this._parent=null,this._children=[]}return r(t,[{key:"update",value:function(t){this._children.forEach(function(e){return e.update(t)})}},{key:"draw",value:function(t){var e=t.graphContext;e.save(),this._applyTransforms(e),this._renderSelf(t),this._children.forEach(function(e){return e.draw(t)}),e.restore()}},{key:"_renderSelf",value:function(t){}},{key:"_applyTransforms",value:function(t){var e=this._anchorX*this._width,n=this._anchorY*this._height;t.translate(this._x-e,this._y-n),t.translate(e,n),t.rotate(this._rot),t.scale(this._scale,this._scale),t.translate(-e,-n)}},{key:"beforeAddedToParent",value:function(){}},{key:"afterAddedToParent",value:function(){}},{key:"beforeRemovedFromParent",value:function(){}},{key:"afterRemovedFromParent",value:function(){}},{key:"addChild",value:function(e){if(!e instanceof t)throw Error("Child must be a GameObject");e.beforeAddedToParent(),this._children.push(e),e.setParent(this),e.afterAddedToParent()}},{key:"removeChild",value:function(t){var e=this._children.indexOf(t);if(e>-1){t.beforeRemovedFromParent(),t.setParent(null);var n=this._children.splice(e,1);return t.afterRemovedFromParent(),n}}},{key:"getChildren",value:function(){return this._children}},{key:"setParent",value:function(t){this._parent=t}},{key:"setScene",value:function(t){this._scene=t}},{key:"getScene",value:function(){return this._scene}},{key:"getParent",value:function(){return this._parent}},{key:"getId",value:function(){return this._id}},{key:"getName",value:function(){return this._name}},{key:"setName",value:function(){return this._name}},{key:"setX",value:function(t){this._x=t}},{key:"setY",value:function(t){this._y=t}},{key:"setPos",value:function(t,e){this._x=t,this._y=e}},{key:"setSize",value:function(t,e){this._width=t,this._height=e}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"move",value:function(t,e){this._x+=t,this._y+=e}},{key:"getPos",value:function(){return{x:this._x,y:this._y}}},{key:"setRot",value:function(t){this._rot=t}},{key:"getRot",value:function(){return this._rot}},{key:"setScale",value:function(t){this._scale=t}},{key:"getScale",value:function(){return this._scale}},{key:"getAnchor",value:function(){return{x:this._anchorX,y:this._anchorY}}},{key:"setAnchor",value:function(t,e){this._anchorX=t,this._anchorY=e}},{key:"getBoundingBox",value:function(){return new u["default"](this._x,this._y,this._width,this._height)}},{key:"getAbsoluteBoundingBox",value:function(){}},{key:"detach",value:function(){this._parent&&this._parent.removeChild(this)}}]),t}();e["default"]=l,l.uid=1,t.exports=e["default"]},function(t,e,n){e.glMatrix=n(14),e.mat2=n(15),e.mat2d=n(16),e.mat3=n(17),e.mat4=n(18),e.quat=n(19),e.vec2=n(22),e.vec3=n(20),e.vec4=n(21)},function(t,e){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.ENABLE_SIMD=!1,n.SIMD_AVAILABLE=n.ARRAY_TYPE===Float32Array&&"SIMD"in this,n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE,n.setMatrixArrayType=function(t){n.ARRAY_TYPE=t};var a=Math.PI/180;n.toRadian=function(t){return t*a},n.equals=function(t,e){return Math.abs(t-e)<=n.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},t.exports=n},function(t,e,n){var a=n(14),o={};o.create=function(){var t=new a.ARRAY_TYPE(4);
return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},o.clone=function(t){var e=new a.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},o.fromValues=function(t,e,n,o){var r=new a.ARRAY_TYPE(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=o,r},o.set=function(t,e,n,a,o){return t[0]=e,t[1]=n,t[2]=a,t[3]=o,t},o.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},o.invert=function(t,e){var n=e[0],a=e[1],o=e[2],r=e[3],i=n*r-o*a;return i?(i=1/i,t[0]=r*i,t[1]=-a*i,t[2]=-o*i,t[3]=n*i,t):null},o.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},o.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},o.multiply=function(t,e,n){var a=e[0],o=e[1],r=e[2],i=e[3],u=n[0],s=n[1],l=n[2],h=n[3];return t[0]=a*u+r*s,t[1]=o*u+i*s,t[2]=a*l+r*h,t[3]=o*l+i*h,t},o.mul=o.multiply,o.rotate=function(t,e,n){var a=e[0],o=e[1],r=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=a*s+r*u,t[1]=o*s+i*u,t[2]=a*-u+r*s,t[3]=o*-u+i*s,t},o.scale=function(t,e,n){var a=e[0],o=e[1],r=e[2],i=e[3],u=n[0],s=n[1];return t[0]=a*u,t[1]=o*u,t[2]=r*s,t[3]=i*s,t},o.fromRotation=function(t,e){var n=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=n,t[2]=-n,t[3]=a,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},o.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},o.LDU=function(t,e,n,a){return t[2]=a[2]/a[0],n[0]=a[0],n[1]=a[1],n[3]=a[3]-t[2]*n[1],[t,e,n]},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},o.sub=o.subtract,o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},o.equals=function(t,e){var n=t[0],o=t[1],r=t[2],i=t[3],u=e[0],s=e[1],l=e[2],h=e[3];return Math.abs(n-u)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-s)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(r-l)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-h)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))},o.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},o.multiplyScalarAndAdd=function(t,e,n,a){return t[0]=e[0]+n[0]*a,t[1]=e[1]+n[1]*a,t[2]=e[2]+n[2]*a,t[3]=e[3]+n[3]*a,t},t.exports=o},function(t,e,n){var a=n(14),o={};o.create=function(){var t=new a.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},o.clone=function(t){var e=new a.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},o.fromValues=function(t,e,n,o,r,i){var u=new a.ARRAY_TYPE(6);return u[0]=t,u[1]=e,u[2]=n,u[3]=o,u[4]=r,u[5]=i,u},o.set=function(t,e,n,a,o,r,i){return t[0]=e,t[1]=n,t[2]=a,t[3]=o,t[4]=r,t[5]=i,t},o.invert=function(t,e){var n=e[0],a=e[1],o=e[2],r=e[3],i=e[4],u=e[5],s=n*r-a*o;return s?(s=1/s,t[0]=r*s,t[1]=-a*s,t[2]=-o*s,t[3]=n*s,t[4]=(o*u-r*i)*s,t[5]=(a*i-n*u)*s,t):null},o.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},o.multiply=function(t,e,n){var a=e[0],o=e[1],r=e[2],i=e[3],u=e[4],s=e[5],l=n[0],h=n[1],c=n[2],f=n[3],M=n[4],d=n[5];return t[0]=a*l+r*h,t[1]=o*l+i*h,t[2]=a*c+r*f,t[3]=o*c+i*f,t[4]=a*M+r*d+u,t[5]=o*M+i*d+s,t},o.mul=o.multiply,o.rotate=function(t,e,n){var a=e[0],o=e[1],r=e[2],i=e[3],u=e[4],s=e[5],l=Math.sin(n),h=Math.cos(n);return t[0]=a*h+r*l,t[1]=o*h+i*l,t[2]=a*-l+r*h,t[3]=o*-l+i*h,t[4]=u,t[5]=s,t},o.scale=function(t,e,n){var a=e[0],o=e[1],r=e[2],i=e[3],u=e[4],s=e[5],l=n[0],h=n[1];return t[0]=a*l,t[1]=o*l,t[2]=r*h,t[3]=i*h,t[4]=u,t[5]=s,t},o.translate=function(t,e,n){var a=e[0],o=e[1],r=e[2],i=e[3],u=e[4],s=e[5],l=n[0],h=n[1];return t[0]=a,t[1]=o,t[2]=r,t[3]=i,t[4]=a*l+r*h+u,t[5]=o*l+i*h+s,t},o.fromRotation=function(t,e){var n=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=n,t[2]=-n,t[3]=a,t[4]=0,t[5]=0,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},o.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},o.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t},o.sub=o.subtract,o.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},o.multiplyScalarAndAdd=function(t,e,n,a){return t[0]=e[0]+n[0]*a,t[1]=e[1]+n[1]*a,t[2]=e[2]+n[2]*a,t[3]=e[3]+n[3]*a,t[4]=e[4]+n[4]*a,t[5]=e[5]+n[5]*a,t},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},o.equals=function(t,e){var n=t[0],o=t[1],r=t[2],i=t[3],u=t[4],s=t[5],l=e[0],h=e[1],c=e[2],f=e[3],M=e[4],d=e[5];return Math.abs(n-l)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-h)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(r-c)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-f)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(u-M)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(s-d)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))},t.exports=o},function(t,e,n){var a=n(14),o={};o.create=function(){var t=new a.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},o.clone=function(t){var e=new a.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},o.fromValues=function(t,e,n,o,r,i,u,s,l){var h=new a.ARRAY_TYPE(9);return h[0]=t,h[1]=e,h[2]=n,h[3]=o,h[4]=r,h[5]=i,h[6]=u,h[7]=s,h[8]=l,h},o.set=function(t,e,n,a,o,r,i,u,s,l){return t[0]=e,t[1]=n,t[2]=a,t[3]=o,t[4]=r,t[5]=i,t[6]=u,t[7]=s,t[8]=l,t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.transpose=function(t,e){if(t===e){var n=e[1],a=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=a,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},o.invert=function(t,e){var n=e[0],a=e[1],o=e[2],r=e[3],i=e[4],u=e[5],s=e[6],l=e[7],h=e[8],c=h*i-u*l,f=-h*r+u*s,M=l*r-i*s,d=n*c+a*f+o*M;return d?(d=1/d,t[0]=c*d,t[1]=(-h*a+o*l)*d,t[2]=(u*a-o*i)*d,t[3]=f*d,t[4]=(h*n-o*s)*d,t[5]=(-u*n+o*r)*d,t[6]=M*d,t[7]=(-l*n+a*s)*d,t[8]=(i*n-a*r)*d,t):null},o.adjoint=function(t,e){var n=e[0],a=e[1],o=e[2],r=e[3],i=e[4],u=e[5],s=e[6],l=e[7],h=e[8];return t[0]=i*h-u*l,t[1]=o*l-a*h,t[2]=a*u-o*i,t[3]=u*s-r*h,t[4]=n*h-o*s,t[5]=o*r-n*u,t[6]=r*l-i*s,t[7]=a*s-n*l,t[8]=n*i-a*r,t},o.determinant=function(t){var e=t[0],n=t[1],a=t[2],o=t[3],r=t[4],i=t[5],u=t[6],s=t[7],l=t[8];return e*(l*r-i*s)+n*(-l*o+i*u)+a*(s*o-r*u)},o.multiply=function(t,e,n){var a=e[0],o=e[1],r=e[2],i=e[3],u=e[4],s=e[5],l=e[6],h=e[7],c=e[8],f=n[0],M=n[1],d=n[2],v=n[3],_=n[4],m=n[5],p=n[6],y=n[7],D=n[8];return t[0]=f*a+M*i+d*l,t[1]=f*o+M*u+d*h,t[2]=f*r+M*s+d*c,t[3]=v*a+_*i+m*l,t[4]=v*o+_*u+m*h,t[5]=v*r+_*s+m*c,t[6]=p*a+y*i+D*l,t[7]=p*o+y*u+D*h,t[8]=p*r+y*s+D*c,t},o.mul=o.multiply,o.translate=function(t,e,n){var a=e[0],o=e[1],r=e[2],i=e[3],u=e[4],s=e[5],l=e[6],h=e[7],c=e[8],f=n[0],M=n[1];return t[0]=a,t[1]=o,t[2]=r,t[3]=i,t[4]=u,t[5]=s,t[6]=f*a+M*i+l,t[7]=f*o+M*u+h,t[8]=f*r+M*s+c,t},o.rotate=function(t,e,n){var a=e[0],o=e[1],r=e[2],i=e[3],u=e[4],s=e[5],l=e[6],h=e[7],c=e[8],f=Math.sin(n),M=Math.cos(n);return t[0]=M*a+f*i,t[1]=M*o+f*u,t[2]=M*r+f*s,t[3]=M*i-f*a,t[4]=M*u-f*o,t[5]=M*s-f*r,t[6]=l,t[7]=h,t[8]=c,t},o.scale=function(t,e,n){var a=n[0],o=n[1];return t[0]=a*e[0],t[1]=a*e[1],t[2]=a*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},o.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},o.fromRotation=function(t,e){var n=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=n,t[2]=0,t[3]=-n,t[4]=a,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},o.fromQuat=function(t,e){var n=e[0],a=e[1],o=e[2],r=e[3],i=n+n,u=a+a,s=o+o,l=n*i,h=a*i,c=a*u,f=o*i,M=o*u,d=o*s,v=r*i,_=r*u,m=r*s;return t[0]=1-c-d,t[3]=h-m,t[6]=f+_,t[1]=h+m,t[4]=1-l-d,t[7]=M-v,t[2]=f-_,t[5]=M+v,t[8]=1-l-c,t},o.normalFromMat4=function(t,e){var n=e[0],a=e[1],o=e[2],r=e[3],i=e[4],u=e[5],s=e[6],l=e[7],h=e[8],c=e[9],f=e[10],M=e[11],d=e[12],v=e[13],_=e[14],m=e[15],p=n*u-a*i,y=n*s-o*i,D=n*l-r*i,x=a*s-o*u,S=a*l-r*u,I=o*l-r*s,b=h*v-c*d,w=h*_-f*d,g=h*m-M*d,F=c*_-f*v,E=c*m-M*v,O=f*m-M*_,k=p*O-y*E+D*F+x*g-S*w+I*b;return k?(k=1/k,t[0]=(u*O-s*E+l*F)*k,t[1]=(s*g-i*O-l*w)*k,t[2]=(i*E-u*g+l*b)*k,t[3]=(o*E-a*O-r*F)*k,t[4]=(n*O-o*g+r*w)*k,t[5]=(a*g-n*E-r*b)*k,t[6]=(v*I-_*S+m*x)*k,t[7]=(_*D-d*I-m*y)*k,t[8]=(d*S-v*D+m*p)*k,t):null},o.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t},o.sub=o.subtract,o.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},o.multiplyScalarAndAdd=function(t,e,n,a){return t[0]=e[0]+n[0]*a,t[1]=e[1]+n[1]*a,t[2]=e[2]+n[2]*a,t[3]=e[3]+n[3]*a,t[4]=e[4]+n[4]*a,t[5]=e[5]+n[5]*a,t[6]=e[6]+n[6]*a,t[7]=e[7]+n[7]*a,t[8]=e[8]+n[8]*a,t},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},o.equals=function(t,e){var n=t[0],o=t[1],r=t[2],i=t[3],u=t[4],s=t[5],l=t[6],h=t[7],c=t[8],f=e[0],M=e[1],d=e[2],v=e[3],_=e[4],m=e[5],p=t[6],y=e[7],D=e[8];return Math.abs(n-f)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(o-M)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(r-d)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-v)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(u-_)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(s-m)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(l-p)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(p))&&Math.abs(h-y)<=a.EPSILON*Math.max(1,Math.abs(h),Math.abs(y))&&Math.abs(c-D)<=a.EPSILON*Math.max(1,Math.abs(c),Math.abs(D))},t.exports=o},function(t,e,n){var a=n(14),o={scalar:{},SIMD:{}};o.create=function(){var t=new a.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.clone=function(t){var e=new a.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.fromValues=function(t,e,n,o,r,i,u,s,l,h,c,f,M,d,v,_){var m=new a.ARRAY_TYPE(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=o,m[4]=r,m[5]=i,m[6]=u,m[7]=s,m[8]=l,m[9]=h,m[10]=c,m[11]=f,m[12]=M,m[13]=d,m[14]=v,m[15]=_,m},o.set=function(t,e,n,a,o,r,i,u,s,l,h,c,f,M,d,v,_){return t[0]=e,t[1]=n,t[2]=a,t[3]=o,t[4]=r,t[5]=i,t[6]=u,t[7]=s,t[8]=l,t[9]=h,t[10]=c,t[11]=f,t[12]=M,t[13]=d,t[14]=v,t[15]=_,t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.scalar.transpose=function(t,e){if(t===e){var n=e[1],a=e[2],o=e[3],r=e[6],i=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=a,t[9]=r,t[11]=e[14],t[12]=o,t[13]=i,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},o.SIMD.transpose=function(t,e){var n,a,o,r,i,u,s,l,h,c;return n=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),r=SIMD.Float32x4.load(e,12),i=SIMD.Float32x4.shuffle(n,a,0,1,4,5),u=SIMD.Float32x4.shuffle(o,r,0,1,4,5),s=SIMD.Float32x4.shuffle(i,u,0,2,4,6),l=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,0,s),SIMD.Float32x4.store(t,4,l),i=SIMD.Float32x4.shuffle(n,a,2,3,6,7),u=SIMD.Float32x4.shuffle(o,r,2,3,6,7),h=SIMD.Float32x4.shuffle(i,u,0,2,4,6),c=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,8,h),SIMD.Float32x4.store(t,12,c),t},o.transpose=a.USE_SIMD?o.SIMD.transpose:o.scalar.transpose,o.scalar.invert=function(t,e){var n=e[0],a=e[1],o=e[2],r=e[3],i=e[4],u=e[5],s=e[6],l=e[7],h=e[8],c=e[9],f=e[10],M=e[11],d=e[12],v=e[13],_=e[14],m=e[15],p=n*u-a*i,y=n*s-o*i,D=n*l-r*i,x=a*s-o*u,S=a*l-r*u,I=o*l-r*s,b=h*v-c*d,w=h*_-f*d,g=h*m-M*d,F=c*_-f*v,E=c*m-M*v,O=f*m-M*_,k=p*O-y*E+D*F+x*g-S*w+I*b;return k?(k=1/k,t[0]=(u*O-s*E+l*F)*k,t[1]=(o*E-a*O-r*F)*k,t[2]=(v*I-_*S+m*x)*k,t[3]=(f*S-c*I-M*x)*k,t[4]=(s*g-i*O-l*w)*k,t[5]=(n*O-o*g+r*w)*k,t[6]=(_*D-d*I-m*y)*k,t[7]=(h*I-f*D+M*y)*k,t[8]=(i*E-u*g+l*b)*k,t[9]=(a*g-n*E-r*b)*k,t[10]=(d*S-v*D+m*p)*k,t[11]=(c*D-h*S-M*p)*k,t[12]=(u*w-i*F-s*b)*k,t[13]=(n*F-a*w+o*b)*k,t[14]=(v*y-d*x-_*p)*k,t[15]=(h*x-c*y+f*p)*k,t):null},o.SIMD.invert=function(t,e){var n,a,o,r,i,u,s,l,h,c,f=SIMD.Float32x4.load(e,0),M=SIMD.Float32x4.load(e,4),d=SIMD.Float32x4.load(e,8),v=SIMD.Float32x4.load(e,12);return i=SIMD.Float32x4.shuffle(f,M,0,1,4,5),a=SIMD.Float32x4.shuffle(d,v,0,1,4,5),n=SIMD.Float32x4.shuffle(i,a,0,2,4,6),a=SIMD.Float32x4.shuffle(a,i,1,3,5,7),i=SIMD.Float32x4.shuffle(f,M,2,3,6,7),r=SIMD.Float32x4.shuffle(d,v,2,3,6,7),o=SIMD.Float32x4.shuffle(i,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,i,1,3,5,7),i=SIMD.Float32x4.mul(o,r),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.mul(a,i),s=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),u),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),i=SIMD.Float32x4.mul(a,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),u),h=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(r,i)),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,2,3,0,1),r),i=SIMD.Float32x4.swizzle(i,1,0,3,2),o=SIMD.Float32x4.swizzle(o,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),u),l=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,i)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.mul(n,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),l),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),h),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),l),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(o,i)),i=SIMD.Float32x4.mul(n,r),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,i)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),l),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),s),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(a,i)),i=SIMD.Float32x4.mul(n,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),s),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(a,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(r,i)),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),h),c=SIMD.Float32x4.mul(n,u),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,2,3,0,1),c),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,1,0,3,2),c),i=SIMD.Float32x4.reciprocalApproximation(c),c=SIMD.Float32x4.sub(SIMD.Float32x4.add(i,i),SIMD.Float32x4.mul(c,SIMD.Float32x4.mul(i,i))),(c=SIMD.Float32x4.swizzle(c,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(c,u)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(c,s)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(c,l)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(c,h)),t):null},o.invert=a.USE_SIMD?o.SIMD.invert:o.scalar.invert,o.scalar.adjoint=function(t,e){var n=e[0],a=e[1],o=e[2],r=e[3],i=e[4],u=e[5],s=e[6],l=e[7],h=e[8],c=e[9],f=e[10],M=e[11],d=e[12],v=e[13],_=e[14],m=e[15];return t[0]=u*(f*m-M*_)-c*(s*m-l*_)+v*(s*M-l*f),t[1]=-(a*(f*m-M*_)-c*(o*m-r*_)+v*(o*M-r*f)),t[2]=a*(s*m-l*_)-u*(o*m-r*_)+v*(o*l-r*s),t[3]=-(a*(s*M-l*f)-u*(o*M-r*f)+c*(o*l-r*s)),t[4]=-(i*(f*m-M*_)-h*(s*m-l*_)+d*(s*M-l*f)),t[5]=n*(f*m-M*_)-h*(o*m-r*_)+d*(o*M-r*f),t[6]=-(n*(s*m-l*_)-i*(o*m-r*_)+d*(o*l-r*s)),t[7]=n*(s*M-l*f)-i*(o*M-r*f)+h*(o*l-r*s),t[8]=i*(c*m-M*v)-h*(u*m-l*v)+d*(u*M-l*c),t[9]=-(n*(c*m-M*v)-h*(a*m-r*v)+d*(a*M-r*c)),t[10]=n*(u*m-l*v)-i*(a*m-r*v)+d*(a*l-r*u),t[11]=-(n*(u*M-l*c)-i*(a*M-r*c)+h*(a*l-r*u)),t[12]=-(i*(c*_-f*v)-h*(u*_-s*v)+d*(u*f-s*c)),t[13]=n*(c*_-f*v)-h*(a*_-o*v)+d*(a*f-o*c),t[14]=-(n*(u*_-s*v)-i*(a*_-o*v)+d*(a*s-o*u)),t[15]=n*(u*f-s*c)-i*(a*f-o*c)+h*(a*s-o*u),t},o.SIMD.adjoint=function(t,e){var n,a,o,r,i,u,s,l,h,c,f,M,d,n=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),r=SIMD.Float32x4.load(e,12);return h=SIMD.Float32x4.shuffle(n,a,0,1,4,5),u=SIMD.Float32x4.shuffle(o,r,0,1,4,5),i=SIMD.Float32x4.shuffle(h,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,h,1,3,5,7),h=SIMD.Float32x4.shuffle(n,a,2,3,6,7),l=SIMD.Float32x4.shuffle(o,r,2,3,6,7),s=SIMD.Float32x4.shuffle(h,l,0,2,4,6),l=SIMD.Float32x4.shuffle(l,h,1,3,5,7),h=SIMD.Float32x4.mul(s,l),h=SIMD.Float32x4.swizzle(h,1,0,3,2),c=SIMD.Float32x4.mul(u,h),f=SIMD.Float32x4.mul(i,h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,h),c),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,h),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),h=SIMD.Float32x4.mul(u,s),h=SIMD.Float32x4.swizzle(h,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,h),c),d=SIMD.Float32x4.mul(i,h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(l,h)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,h),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),h=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,3,0,1),l),h=SIMD.Float32x4.swizzle(h,1,0,3,2),s=SIMD.Float32x4.swizzle(s,2,3,0,1),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,h),c),M=SIMD.Float32x4.mul(i,h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(s,h)),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,h),M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),h=SIMD.Float32x4.mul(i,u),h=SIMD.Float32x4.swizzle(h,1,0,3,2),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,h),M),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,h),d),h=SIMD.Float32x4.swizzle(h,2,3,0,1),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,h),M),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(s,h)),h=SIMD.Float32x4.mul(i,l),h=SIMD.Float32x4.swizzle(h,1,0,3,2),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(s,h)),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,h),M),h=SIMD.Float32x4.swizzle(h,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,h),f),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(u,h)),h=SIMD.Float32x4.mul(i,s),h=SIMD.Float32x4.swizzle(h,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,h),f),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(u,h)),h=SIMD.Float32x4.swizzle(h,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,h)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,h),d),SIMD.Float32x4.store(t,0,c),SIMD.Float32x4.store(t,4,f),SIMD.Float32x4.store(t,8,M),SIMD.Float32x4.store(t,12,d),t},o.adjoint=a.USE_SIMD?o.SIMD.adjoint:o.scalar.adjoint,o.determinant=function(t){var e=t[0],n=t[1],a=t[2],o=t[3],r=t[4],i=t[5],u=t[6],s=t[7],l=t[8],h=t[9],c=t[10],f=t[11],M=t[12],d=t[13],v=t[14],_=t[15],m=e*i-n*r,p=e*u-a*r,y=e*s-o*r,D=n*u-a*i,x=n*s-o*i,S=a*s-o*u,I=l*d-h*M,b=l*v-c*M,w=l*_-f*M,g=h*v-c*d,F=h*_-f*d,E=c*_-f*v;return m*E-p*F+y*g+D*w-x*b+S*I},o.SIMD.multiply=function(t,e,n){var a=SIMD.Float32x4.load(e,0),o=SIMD.Float32x4.load(e,4),r=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),u=SIMD.Float32x4.load(n,0),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),r),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),i))));SIMD.Float32x4.store(t,0,s);var l=SIMD.Float32x4.load(n,4),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),r),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),i))));SIMD.Float32x4.store(t,4,h);var c=SIMD.Float32x4.load(n,8),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),r),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),i))));SIMD.Float32x4.store(t,8,f);var M=SIMD.Float32x4.load(n,12),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,0,0,0,0),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,2,2,2,2),r),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,3,3,3,3),i))));return SIMD.Float32x4.store(t,12,d),t},o.scalar.multiply=function(t,e,n){var a=e[0],o=e[1],r=e[2],i=e[3],u=e[4],s=e[5],l=e[6],h=e[7],c=e[8],f=e[9],M=e[10],d=e[11],v=e[12],_=e[13],m=e[14],p=e[15],y=n[0],D=n[1],x=n[2],S=n[3];return t[0]=y*a+D*u+x*c+S*v,t[1]=y*o+D*s+x*f+S*_,t[2]=y*r+D*l+x*M+S*m,t[3]=y*i+D*h+x*d+S*p,y=n[4],D=n[5],x=n[6],S=n[7],t[4]=y*a+D*u+x*c+S*v,t[5]=y*o+D*s+x*f+S*_,t[6]=y*r+D*l+x*M+S*m,t[7]=y*i+D*h+x*d+S*p,y=n[8],D=n[9],x=n[10],S=n[11],t[8]=y*a+D*u+x*c+S*v,t[9]=y*o+D*s+x*f+S*_,t[10]=y*r+D*l+x*M+S*m,t[11]=y*i+D*h+x*d+S*p,y=n[12],D=n[13],x=n[14],S=n[15],t[12]=y*a+D*u+x*c+S*v,t[13]=y*o+D*s+x*f+S*_,t[14]=y*r+D*l+x*M+S*m,t[15]=y*i+D*h+x*d+S*p,t},o.multiply=a.USE_SIMD?o.SIMD.multiply:o.scalar.multiply,o.mul=o.multiply,o.scalar.translate=function(t,e,n){var a,o,r,i,u,s,l,h,c,f,M,d,v=n[0],_=n[1],m=n[2];return e===t?(t[12]=e[0]*v+e[4]*_+e[8]*m+e[12],t[13]=e[1]*v+e[5]*_+e[9]*m+e[13],t[14]=e[2]*v+e[6]*_+e[10]*m+e[14],t[15]=e[3]*v+e[7]*_+e[11]*m+e[15]):(a=e[0],o=e[1],r=e[2],i=e[3],u=e[4],s=e[5],l=e[6],h=e[7],c=e[8],f=e[9],M=e[10],d=e[11],t[0]=a,t[1]=o,t[2]=r,t[3]=i,t[4]=u,t[5]=s,t[6]=l,t[7]=h,t[8]=c,t[9]=f,t[10]=M,t[11]=d,t[12]=a*v+u*_+c*m+e[12],t[13]=o*v+s*_+f*m+e[13],t[14]=r*v+l*_+M*m+e[14],t[15]=i*v+h*_+d*m+e[15]),t},o.SIMD.translate=function(t,e,n){var a=SIMD.Float32x4.load(e,0),o=SIMD.Float32x4.load(e,4),r=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),u=SIMD.Float32x4(n[0],n[1],n[2],0);e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),a=SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(u,0,0,0,0)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,1,1,1,1)),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(u,2,2,2,2));var s=SIMD.Float32x4.add(a,SIMD.Float32x4.add(o,SIMD.Float32x4.add(r,i)));return SIMD.Float32x4.store(t,12,s),t},o.translate=a.USE_SIMD?o.SIMD.translate:o.scalar.translate,o.scalar.scale=function(t,e,n){var a=n[0],o=n[1],r=n[2];return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.SIMD.scale=function(t,e,n){var a,o,r,i=SIMD.Float32x4(n[0],n[1],n[2],0);return a=SIMD.Float32x4.load(e,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(i,0,0,0,0))),o=SIMD.Float32x4.load(e,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,1,1,1,1))),r=SIMD.Float32x4.load(e,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(i,2,2,2,2))),t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.scale=a.USE_SIMD?o.SIMD.scale:o.scalar.scale,o.rotate=function(t,e,n,o){var r,i,u,s,l,h,c,f,M,d,v,_,m,p,y,D,x,S,I,b,w,g,F,E,O=o[0],k=o[1],P=o[2],R=Math.sqrt(O*O+k*k+P*P);return Math.abs(R)<a.EPSILON?null:(R=1/R,O*=R,k*=R,P*=R,r=Math.sin(n),i=Math.cos(n),u=1-i,s=e[0],l=e[1],h=e[2],c=e[3],f=e[4],M=e[5],d=e[6],v=e[7],_=e[8],m=e[9],p=e[10],y=e[11],D=O*O*u+i,x=k*O*u+P*r,S=P*O*u-k*r,I=O*k*u-P*r,b=k*k*u+i,w=P*k*u+O*r,g=O*P*u+k*r,F=k*P*u-O*r,E=P*P*u+i,t[0]=s*D+f*x+_*S,t[1]=l*D+M*x+m*S,t[2]=h*D+d*x+p*S,t[3]=c*D+v*x+y*S,t[4]=s*I+f*b+_*w,t[5]=l*I+M*b+m*w,t[6]=h*I+d*b+p*w,t[7]=c*I+v*b+y*w,t[8]=s*g+f*F+_*E,t[9]=l*g+M*F+m*E,t[10]=h*g+d*F+p*E,t[11]=c*g+v*F+y*E,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},o.scalar.rotateX=function(t,e,n){var a=Math.sin(n),o=Math.cos(n),r=e[4],i=e[5],u=e[6],s=e[7],l=e[8],h=e[9],c=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*o+l*a,t[5]=i*o+h*a,t[6]=u*o+c*a,t[7]=s*o+f*a,t[8]=l*o-r*a,t[9]=h*o-i*a,t[10]=c*o-u*a,t[11]=f*o-s*a,t},o.SIMD.rotateX=function(t,e,n){var a=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var r=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(r,o),SIMD.Float32x4.mul(i,a))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(r,a))),t},o.rotateX=a.USE_SIMD?o.SIMD.rotateX:o.scalar.rotateX,o.scalar.rotateY=function(t,e,n){var a=Math.sin(n),o=Math.cos(n),r=e[0],i=e[1],u=e[2],s=e[3],l=e[8],h=e[9],c=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*o-l*a,t[1]=i*o-h*a,t[2]=u*o-c*a,t[3]=s*o-f*a,t[8]=r*a+l*o,t[9]=i*a+h*o,t[10]=u*a+c*o,t[11]=s*a+f*o,t},o.SIMD.rotateY=function(t,e,n){var a=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var r=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,o),SIMD.Float32x4.mul(i,a))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),SIMD.Float32x4.mul(i,o))),t},o.rotateY=a.USE_SIMD?o.SIMD.rotateY:o.scalar.rotateY,o.scalar.rotateZ=function(t,e,n){var a=Math.sin(n),o=Math.cos(n),r=e[0],i=e[1],u=e[2],s=e[3],l=e[4],h=e[5],c=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*o+l*a,t[1]=i*o+h*a,t[2]=u*o+c*a,t[3]=s*o+f*a,t[4]=l*o-r*a,t[5]=h*o-i*a,t[6]=c*o-u*a,t[7]=f*o-s*a,t},o.SIMD.rotateZ=function(t,e,n){var a=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var r=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(r,o),SIMD.Float32x4.mul(i,a))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(r,a))),t},o.rotateZ=a.USE_SIMD?o.SIMD.rotateZ:o.scalar.rotateZ,o.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromRotation=function(t,e,n){var o,r,i,u=n[0],s=n[1],l=n[2],h=Math.sqrt(u*u+s*s+l*l);return Math.abs(h)<a.EPSILON?null:(h=1/h,u*=h,s*=h,l*=h,o=Math.sin(e),r=Math.cos(e),i=1-r,t[0]=u*u*i+r,t[1]=s*u*i+l*o,t[2]=l*u*i-s*o,t[3]=0,t[4]=u*s*i-l*o,t[5]=s*s*i+r,t[6]=l*s*i+u*o,t[7]=0,t[8]=u*l*i+s*o,t[9]=s*l*i-u*o,t[10]=l*l*i+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},o.fromXRotation=function(t,e){var n=Math.sin(e),a=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromYRotation=function(t,e){var n=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromZRotation=function(t,e){var n=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromRotationTranslation=function(t,e,n){var a=e[0],o=e[1],r=e[2],i=e[3],u=a+a,s=o+o,l=r+r,h=a*u,c=a*s,f=a*l,M=o*s,d=o*l,v=r*l,_=i*u,m=i*s,p=i*l;return t[0]=1-(M+v),t[1]=c+p,t[2]=f-m,t[3]=0,t[4]=c-p,t[5]=1-(h+v),t[6]=d+_,t[7]=0,t[8]=f+m,t[9]=d-_,t[10]=1-(h+M),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},o.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},o.getRotation=function(t,e){var n=e[0]+e[5]+e[10],a=0;return n>0?(a=2*Math.sqrt(n+1),t[3]=.25*a,t[0]=(e[6]-e[9])/a,t[1]=(e[8]-e[2])/a,t[2]=(e[1]-e[4])/a):e[0]>e[5]&e[0]>e[10]?(a=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/a,t[0]=.25*a,t[1]=(e[1]+e[4])/a,t[2]=(e[8]+e[2])/a):e[5]>e[10]?(a=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/a,t[0]=(e[1]+e[4])/a,t[1]=.25*a,t[2]=(e[6]+e[9])/a):(a=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/a,t[0]=(e[8]+e[2])/a,t[1]=(e[6]+e[9])/a,t[2]=.25*a),t},o.fromRotationTranslationScale=function(t,e,n,a){var o=e[0],r=e[1],i=e[2],u=e[3],s=o+o,l=r+r,h=i+i,c=o*s,f=o*l,M=o*h,d=r*l,v=r*h,_=i*h,m=u*s,p=u*l,y=u*h,D=a[0],x=a[1],S=a[2];return t[0]=(1-(d+_))*D,t[1]=(f+y)*D,t[2]=(M-p)*D,t[3]=0,t[4]=(f-y)*x,t[5]=(1-(c+_))*x,t[6]=(v+m)*x,t[7]=0,t[8]=(M+p)*S,t[9]=(v-m)*S,t[10]=(1-(c+d))*S,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},o.fromRotationTranslationScaleOrigin=function(t,e,n,a,o){var r=e[0],i=e[1],u=e[2],s=e[3],l=r+r,h=i+i,c=u+u,f=r*l,M=r*h,d=r*c,v=i*h,_=i*c,m=u*c,p=s*l,y=s*h,D=s*c,x=a[0],S=a[1],I=a[2],b=o[0],w=o[1],g=o[2];return t[0]=(1-(v+m))*x,t[1]=(M+D)*x,t[2]=(d-y)*x,t[3]=0,t[4]=(M-D)*S,t[5]=(1-(f+m))*S,t[6]=(_+p)*S,t[7]=0,t[8]=(d+y)*I,t[9]=(_-p)*I,t[10]=(1-(f+v))*I,t[11]=0,t[12]=n[0]+b-(t[0]*b+t[4]*w+t[8]*g),t[13]=n[1]+w-(t[1]*b+t[5]*w+t[9]*g),t[14]=n[2]+g-(t[2]*b+t[6]*w+t[10]*g),t[15]=1,t},o.fromQuat=function(t,e){var n=e[0],a=e[1],o=e[2],r=e[3],i=n+n,u=a+a,s=o+o,l=n*i,h=a*i,c=a*u,f=o*i,M=o*u,d=o*s,v=r*i,_=r*u,m=r*s;return t[0]=1-c-d,t[1]=h+m,t[2]=f-_,t[3]=0,t[4]=h-m,t[5]=1-l-d,t[6]=M+v,t[7]=0,t[8]=f+_,t[9]=M-v,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.frustum=function(t,e,n,a,o,r,i){var u=1/(n-e),s=1/(o-a),l=1/(r-i);return t[0]=2*r*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*s,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(o+a)*s,t[10]=(i+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*r*2*l,t[15]=0,t},o.perspective=function(t,e,n,a,o){var r=1/Math.tan(e/2),i=1/(a-o);return t[0]=r/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,
t[9]=0,t[10]=(o+a)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*o*a*i,t[15]=0,t},o.perspectiveFromFieldOfView=function(t,e,n,a){var o=Math.tan(e.upDegrees*Math.PI/180),r=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(i+u),l=2/(o+r);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-((i-u)*s*.5),t[9]=(o-r)*l*.5,t[10]=a/(n-a),t[11]=-1,t[12]=0,t[13]=0,t[14]=a*n/(n-a),t[15]=0,t},o.ortho=function(t,e,n,a,o,r,i){var u=1/(e-n),s=1/(a-o),l=1/(r-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*u,t[13]=(o+a)*s,t[14]=(i+r)*l,t[15]=1,t},o.lookAt=function(t,e,n,r){var i,u,s,l,h,c,f,M,d,v,_=e[0],m=e[1],p=e[2],y=r[0],D=r[1],x=r[2],S=n[0],I=n[1],b=n[2];return Math.abs(_-S)<a.EPSILON&&Math.abs(m-I)<a.EPSILON&&Math.abs(p-b)<a.EPSILON?o.identity(t):(f=_-S,M=m-I,d=p-b,v=1/Math.sqrt(f*f+M*M+d*d),f*=v,M*=v,d*=v,i=D*d-x*M,u=x*f-y*d,s=y*M-D*f,v=Math.sqrt(i*i+u*u+s*s),v?(v=1/v,i*=v,u*=v,s*=v):(i=0,u=0,s=0),l=M*s-d*u,h=d*i-f*s,c=f*u-M*i,v=Math.sqrt(l*l+h*h+c*c),v?(v=1/v,l*=v,h*=v,c*=v):(l=0,h=0,c=0),t[0]=i,t[1]=l,t[2]=f,t[3]=0,t[4]=u,t[5]=h,t[6]=M,t[7]=0,t[8]=s,t[9]=c,t[10]=d,t[11]=0,t[12]=-(i*_+u*m+s*p),t[13]=-(l*_+h*m+c*p),t[14]=-(f*_+M*m+d*p),t[15]=1,t)},o.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t},o.sub=o.subtract,o.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},o.multiplyScalarAndAdd=function(t,e,n,a){return t[0]=e[0]+n[0]*a,t[1]=e[1]+n[1]*a,t[2]=e[2]+n[2]*a,t[3]=e[3]+n[3]*a,t[4]=e[4]+n[4]*a,t[5]=e[5]+n[5]*a,t[6]=e[6]+n[6]*a,t[7]=e[7]+n[7]*a,t[8]=e[8]+n[8]*a,t[9]=e[9]+n[9]*a,t[10]=e[10]+n[10]*a,t[11]=e[11]+n[11]*a,t[12]=e[12]+n[12]*a,t[13]=e[13]+n[13]*a,t[14]=e[14]+n[14]*a,t[15]=e[15]+n[15]*a,t},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},o.equals=function(t,e){var n=t[0],o=t[1],r=t[2],i=t[3],u=t[4],s=t[5],l=t[6],h=t[7],c=t[8],f=t[9],M=t[10],d=t[11],v=t[12],_=t[13],m=t[14],p=t[15],y=e[0],D=e[1],x=e[2],S=e[3],I=e[4],b=e[5],w=e[6],g=e[7],F=e[8],E=e[9],O=e[10],k=e[11],P=e[12],R=e[13],A=e[14],z=e[15];return Math.abs(n-y)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(o-D)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(D))&&Math.abs(r-x)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(i-S)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(u-I)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(s-b)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(l-w)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(h-g)<=a.EPSILON*Math.max(1,Math.abs(h),Math.abs(g))&&Math.abs(c-F)<=a.EPSILON*Math.max(1,Math.abs(c),Math.abs(F))&&Math.abs(f-E)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(M-O)<=a.EPSILON*Math.max(1,Math.abs(M),Math.abs(O))&&Math.abs(d-k)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(v-P)<=a.EPSILON*Math.max(1,Math.abs(v),Math.abs(P))&&Math.abs(_-R)<=a.EPSILON*Math.max(1,Math.abs(_),Math.abs(R))&&Math.abs(m-A)<=a.EPSILON*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(p-z)<=a.EPSILON*Math.max(1,Math.abs(p),Math.abs(z))},t.exports=o},function(t,e,n){var a=n(14),o=n(17),r=n(20),i=n(21),u={};u.create=function(){var t=new a.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.rotationTo=function(){var t=r.create(),e=r.fromValues(1,0,0),n=r.fromValues(0,1,0);return function(a,o,i){var s=r.dot(o,i);return-.999999>s?(r.cross(t,e,o),r.length(t)<1e-6&&r.cross(t,n,o),r.normalize(t,t),u.setAxisAngle(a,t,Math.PI),a):s>.999999?(a[0]=0,a[1]=0,a[2]=0,a[3]=1,a):(r.cross(t,o,i),a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=1+s,u.normalize(a,a))}}(),u.setAxes=function(){var t=o.create();return function(e,n,a,o){return t[0]=a[0],t[3]=a[1],t[6]=a[2],t[1]=o[0],t[4]=o[1],t[7]=o[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],u.normalize(e,u.fromMat3(e,t))}}(),u.clone=i.clone,u.fromValues=i.fromValues,u.copy=i.copy,u.set=i.set,u.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.setAxisAngle=function(t,e,n){n=.5*n;var a=Math.sin(n);return t[0]=a*e[0],t[1]=a*e[1],t[2]=a*e[2],t[3]=Math.cos(n),t},u.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),a=Math.sin(n/2);return 0!=a?(t[0]=e[0]/a,t[1]=e[1]/a,t[2]=e[2]/a):(t[0]=1,t[1]=0,t[2]=0),n},u.add=i.add,u.multiply=function(t,e,n){var a=e[0],o=e[1],r=e[2],i=e[3],u=n[0],s=n[1],l=n[2],h=n[3];return t[0]=a*h+i*u+o*l-r*s,t[1]=o*h+i*s+r*u-a*l,t[2]=r*h+i*l+a*s-o*u,t[3]=i*h-a*u-o*s-r*l,t},u.mul=u.multiply,u.scale=i.scale,u.rotateX=function(t,e,n){n*=.5;var a=e[0],o=e[1],r=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=a*s+i*u,t[1]=o*s+r*u,t[2]=r*s-o*u,t[3]=i*s-a*u,t},u.rotateY=function(t,e,n){n*=.5;var a=e[0],o=e[1],r=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=a*s-r*u,t[1]=o*s+i*u,t[2]=r*s+a*u,t[3]=i*s-o*u,t},u.rotateZ=function(t,e,n){n*=.5;var a=e[0],o=e[1],r=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=a*s+o*u,t[1]=o*s-a*u,t[2]=r*s+i*u,t[3]=i*s-r*u,t},u.calculateW=function(t,e){var n=e[0],a=e[1],o=e[2];return t[0]=n,t[1]=a,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-a*a-o*o)),t},u.dot=i.dot,u.lerp=i.lerp,u.slerp=function(t,e,n,a){var o,r,i,u,s,l=e[0],h=e[1],c=e[2],f=e[3],M=n[0],d=n[1],v=n[2],_=n[3];return r=l*M+h*d+c*v+f*_,0>r&&(r=-r,M=-M,d=-d,v=-v,_=-_),1-r>1e-6?(o=Math.acos(r),i=Math.sin(o),u=Math.sin((1-a)*o)/i,s=Math.sin(a*o)/i):(u=1-a,s=a),t[0]=u*l+s*M,t[1]=u*h+s*d,t[2]=u*c+s*v,t[3]=u*f+s*_,t},u.sqlerp=function(){var t=u.create(),e=u.create();return function(n,a,o,r,i,s){return u.slerp(t,a,i,s),u.slerp(e,o,r,s),u.slerp(n,t,e,2*s*(1-s)),n}}(),u.invert=function(t,e){var n=e[0],a=e[1],o=e[2],r=e[3],i=n*n+a*a+o*o+r*r,u=i?1/i:0;return t[0]=-n*u,t[1]=-a*u,t[2]=-o*u,t[3]=r*u,t},u.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},u.length=i.length,u.len=u.length,u.squaredLength=i.squaredLength,u.sqrLen=u.squaredLength,u.normalize=i.normalize,u.fromMat3=function(t,e){var n,a=e[0]+e[4]+e[8];if(a>0)n=Math.sqrt(a+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var r=(o+1)%3,i=(o+2)%3;n=Math.sqrt(e[3*o+o]-e[3*r+r]-e[3*i+i]+1),t[o]=.5*n,n=.5/n,t[3]=(e[3*r+i]-e[3*i+r])*n,t[r]=(e[3*r+o]+e[3*o+r])*n,t[i]=(e[3*i+o]+e[3*o+i])*n}return t},u.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},u.exactEquals=i.exactEquals,u.equals=i.equals,t.exports=u},function(t,e,n){var a=n(14),o={};o.create=function(){var t=new a.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},o.clone=function(t){var e=new a.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},o.fromValues=function(t,e,n){var o=new a.ARRAY_TYPE(3);return o[0]=t,o[1]=e,o[2]=n,o},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.set=function(t,e,n,a){return t[0]=e,t[1]=n,t[2]=a,t},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},o.sub=o.subtract,o.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},o.mul=o.multiply,o.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},o.div=o.divide,o.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},o.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},o.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},o.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},o.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},o.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},o.scaleAndAdd=function(t,e,n,a){return t[0]=e[0]+n[0]*a,t[1]=e[1]+n[1]*a,t[2]=e[2]+n[2]*a,t},o.distance=function(t,e){var n=e[0]-t[0],a=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(n*n+a*a+o*o)},o.dist=o.distance,o.squaredDistance=function(t,e){var n=e[0]-t[0],a=e[1]-t[1],o=e[2]-t[2];return n*n+a*a+o*o},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],n=t[1],a=t[2];return Math.sqrt(e*e+n*n+a*a)},o.len=o.length,o.squaredLength=function(t){var e=t[0],n=t[1],a=t[2];return e*e+n*n+a*a},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},o.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},o.normalize=function(t,e){var n=e[0],a=e[1],o=e[2],r=n*n+a*a+o*o;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},o.cross=function(t,e,n){var a=e[0],o=e[1],r=e[2],i=n[0],u=n[1],s=n[2];return t[0]=o*s-r*u,t[1]=r*i-a*s,t[2]=a*u-o*i,t},o.lerp=function(t,e,n,a){var o=e[0],r=e[1],i=e[2];return t[0]=o+a*(n[0]-o),t[1]=r+a*(n[1]-r),t[2]=i+a*(n[2]-i),t},o.hermite=function(t,e,n,a,o,r){var i=r*r,u=i*(2*r-3)+1,s=i*(r-2)+r,l=i*(r-1),h=i*(3-2*r);return t[0]=e[0]*u+n[0]*s+a[0]*l+o[0]*h,t[1]=e[1]*u+n[1]*s+a[1]*l+o[1]*h,t[2]=e[2]*u+n[2]*s+a[2]*l+o[2]*h,t},o.bezier=function(t,e,n,a,o,r){var i=1-r,u=i*i,s=r*r,l=u*i,h=3*r*u,c=3*s*i,f=s*r;return t[0]=e[0]*l+n[0]*h+a[0]*c+o[0]*f,t[1]=e[1]*l+n[1]*h+a[1]*c+o[1]*f,t[2]=e[2]*l+n[2]*h+a[2]*c+o[2]*f,t},o.random=function(t,e){e=e||1;var n=2*a.RANDOM()*Math.PI,o=2*a.RANDOM()-1,r=Math.sqrt(1-o*o)*e;return t[0]=Math.cos(n)*r,t[1]=Math.sin(n)*r,t[2]=o*e,t},o.transformMat4=function(t,e,n){var a=e[0],o=e[1],r=e[2],i=n[3]*a+n[7]*o+n[11]*r+n[15];return i=i||1,t[0]=(n[0]*a+n[4]*o+n[8]*r+n[12])/i,t[1]=(n[1]*a+n[5]*o+n[9]*r+n[13])/i,t[2]=(n[2]*a+n[6]*o+n[10]*r+n[14])/i,t},o.transformMat3=function(t,e,n){var a=e[0],o=e[1],r=e[2];return t[0]=a*n[0]+o*n[3]+r*n[6],t[1]=a*n[1]+o*n[4]+r*n[7],t[2]=a*n[2]+o*n[5]+r*n[8],t},o.transformQuat=function(t,e,n){var a=e[0],o=e[1],r=e[2],i=n[0],u=n[1],s=n[2],l=n[3],h=l*a+u*r-s*o,c=l*o+s*a-i*r,f=l*r+i*o-u*a,M=-i*a-u*o-s*r;return t[0]=h*l+M*-i+c*-s-f*-u,t[1]=c*l+M*-u+f*-i-h*-s,t[2]=f*l+M*-s+h*-u-c*-i,t},o.rotateX=function(t,e,n,a){var o=[],r=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],r[0]=o[0],r[1]=o[1]*Math.cos(a)-o[2]*Math.sin(a),r[2]=o[1]*Math.sin(a)+o[2]*Math.cos(a),t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t},o.rotateY=function(t,e,n,a){var o=[],r=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],r[0]=o[2]*Math.sin(a)+o[0]*Math.cos(a),r[1]=o[1],r[2]=o[2]*Math.cos(a)-o[0]*Math.sin(a),t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t},o.rotateZ=function(t,e,n,a){var o=[],r=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],r[0]=o[0]*Math.cos(a)-o[1]*Math.sin(a),r[1]=o[0]*Math.sin(a)+o[1]*Math.cos(a),r[2]=o[2],t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t},o.forEach=function(){var t=o.create();return function(e,n,a,o,r,i){var u,s;for(n||(n=3),a||(a=0),s=o?Math.min(o*n+a,e.length):e.length,u=a;s>u;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],r(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}(),o.angle=function(t,e){var n=o.fromValues(t[0],t[1],t[2]),a=o.fromValues(e[0],e[1],e[2]);o.normalize(n,n),o.normalize(a,a);var r=o.dot(n,a);return r>1?0:Math.acos(r)},o.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},o.equals=function(t,e){var n=t[0],o=t[1],r=t[2],i=e[0],u=e[1],s=e[2];return Math.abs(n-i)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(o-u)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(r-s)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))},t.exports=o},function(t,e,n){var a=n(14),o={};o.create=function(){var t=new a.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},o.clone=function(t){var e=new a.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.fromValues=function(t,e,n,o){var r=new a.ARRAY_TYPE(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=o,r},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.set=function(t,e,n,a,o){return t[0]=e,t[1]=n,t[2]=a,t[3]=o,t},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},o.sub=o.subtract,o.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},o.mul=o.multiply,o.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t},o.div=o.divide,o.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},o.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},o.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},o.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},o.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},o.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},o.scaleAndAdd=function(t,e,n,a){return t[0]=e[0]+n[0]*a,t[1]=e[1]+n[1]*a,t[2]=e[2]+n[2]*a,t[3]=e[3]+n[3]*a,t},o.distance=function(t,e){var n=e[0]-t[0],a=e[1]-t[1],o=e[2]-t[2],r=e[3]-t[3];return Math.sqrt(n*n+a*a+o*o+r*r)},o.dist=o.distance,o.squaredDistance=function(t,e){var n=e[0]-t[0],a=e[1]-t[1],o=e[2]-t[2],r=e[3]-t[3];return n*n+a*a+o*o+r*r},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],n=t[1],a=t[2],o=t[3];return Math.sqrt(e*e+n*n+a*a+o*o)},o.len=o.length,o.squaredLength=function(t){var e=t[0],n=t[1],a=t[2],o=t[3];return e*e+n*n+a*a+o*o},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},o.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},o.normalize=function(t,e){var n=e[0],a=e[1],o=e[2],r=e[3],i=n*n+a*a+o*o+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=n*i,t[1]=a*i,t[2]=o*i,t[3]=r*i),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},o.lerp=function(t,e,n,a){var o=e[0],r=e[1],i=e[2],u=e[3];return t[0]=o+a*(n[0]-o),t[1]=r+a*(n[1]-r),t[2]=i+a*(n[2]-i),t[3]=u+a*(n[3]-u),t},o.random=function(t,e){return e=e||1,t[0]=a.RANDOM(),t[1]=a.RANDOM(),t[2]=a.RANDOM(),t[3]=a.RANDOM(),o.normalize(t,t),o.scale(t,t,e),t},o.transformMat4=function(t,e,n){var a=e[0],o=e[1],r=e[2],i=e[3];return t[0]=n[0]*a+n[4]*o+n[8]*r+n[12]*i,t[1]=n[1]*a+n[5]*o+n[9]*r+n[13]*i,t[2]=n[2]*a+n[6]*o+n[10]*r+n[14]*i,t[3]=n[3]*a+n[7]*o+n[11]*r+n[15]*i,t},o.transformQuat=function(t,e,n){var a=e[0],o=e[1],r=e[2],i=n[0],u=n[1],s=n[2],l=n[3],h=l*a+u*r-s*o,c=l*o+s*a-i*r,f=l*r+i*o-u*a,M=-i*a-u*o-s*r;return t[0]=h*l+M*-i+c*-s-f*-u,t[1]=c*l+M*-u+f*-i-h*-s,t[2]=f*l+M*-s+h*-u-c*-i,t[3]=e[3],t},o.forEach=function(){var t=o.create();return function(e,n,a,o,r,i){var u,s;for(n||(n=4),a||(a=0),s=o?Math.min(o*n+a,e.length):e.length,u=a;s>u;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],r(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}(),o.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},o.equals=function(t,e){var n=t[0],o=t[1],r=t[2],i=t[3],u=e[0],s=e[1],l=e[2],h=e[3];return Math.abs(n-u)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-s)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(r-l)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-h)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))},t.exports=o},function(t,e,n){var a=n(14),o={};o.create=function(){var t=new a.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},o.clone=function(t){var e=new a.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},o.fromValues=function(t,e){var n=new a.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},o.set=function(t,e,n){return t[0]=e,t[1]=n,t},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},o.sub=o.subtract,o.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},o.mul=o.multiply,o.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},o.div=o.divide,o.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},o.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},o.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},o.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},o.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},o.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},o.scaleAndAdd=function(t,e,n,a){return t[0]=e[0]+n[0]*a,t[1]=e[1]+n[1]*a,t},o.distance=function(t,e){var n=e[0]-t[0],a=e[1]-t[1];return Math.sqrt(n*n+a*a)},o.dist=o.distance,o.squaredDistance=function(t,e){var n=e[0]-t[0],a=e[1]-t[1];return n*n+a*a},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)},o.len=o.length,o.squaredLength=function(t){var e=t[0],n=t[1];return e*e+n*n},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},o.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},o.normalize=function(t,e){var n=e[0],a=e[1],o=n*n+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},o.cross=function(t,e,n){var a=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=a,t},o.lerp=function(t,e,n,a){var o=e[0],r=e[1];return t[0]=o+a*(n[0]-o),t[1]=r+a*(n[1]-r),t},o.random=function(t,e){e=e||1;var n=2*a.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},o.transformMat2=function(t,e,n){var a=e[0],o=e[1];return t[0]=n[0]*a+n[2]*o,t[1]=n[1]*a+n[3]*o,t},o.transformMat2d=function(t,e,n){var a=e[0],o=e[1];return t[0]=n[0]*a+n[2]*o+n[4],t[1]=n[1]*a+n[3]*o+n[5],t},o.transformMat3=function(t,e,n){var a=e[0],o=e[1];return t[0]=n[0]*a+n[3]*o+n[6],t[1]=n[1]*a+n[4]*o+n[7],t},o.transformMat4=function(t,e,n){var a=e[0],o=e[1];return t[0]=n[0]*a+n[4]*o+n[12],t[1]=n[1]*a+n[5]*o+n[13],t},o.forEach=function(){var t=o.create();return function(e,n,a,o,r,i){var u,s;for(n||(n=2),a||(a=0),s=o?Math.min(o*n+a,e.length):e.length,u=a;s>u;u+=n)t[0]=e[u],t[1]=e[u+1],r(t,t,i),e[u]=t[0],e[u+1]=t[1];return e}}(),o.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},o.equals=function(t,e){var n=t[0],o=t[1],r=e[0],i=e[1];return Math.abs(n-r)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(r))&&Math.abs(o-i)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))},t.exports=o},function(t,e){"use strict";function n(){return"ontouchstart"in document.documentElement}function a(t,e,n,a){return Math.sqrt((t-n)*(t-n)+(e-a)*(e-a))}Object.defineProperty(e,"__esModule",{value:!0}),e.isTouchDevice=n,e.dist=a},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=a(o),i={};i.getBoundingRectangle=function(t){for(var e=Number.MAX_VALUE,n=Number.MAX_VALUE,a=Number.MIN_VALUE,o=Number.MIN_VALUE,i=0;i<t.length;i++){var u=t[i][0],s=t[i][1];e>u&&(e=u),u>a&&(a=u),n>s&&(n=s),s>o&&(o=s)}var l=.05*Math.max(a-e,o-n);return e-=l,a+=l,n-=l,o+=l,new r["default"](e,n,a-e,o-n)},i.linesIntersect=function(t,e,n,a,o,r,i,u){var s=void 0,l=void 0,h=void 0,c=void 0;s=n-t,l=a-e,h=i-o,c=u-r;var f=void 0,M=void 0;return f=(-l*(t-o)+s*(e-r))/(-h*l+s*c),M=(h*(e-r)-c*(t-o))/(-h*l+s*c),f>=0&&1>=f&&M>=0&&1>=M?[t+M*s,e+M*l]:null},i.sign=function(t){return t>0?1:0===t?0:-1},i.pointInsidePolygon=function(t,e,n,a,o){if(void 0===a||void 0===o){var r=i.getBoundingRectangle(n);a=r.x+r.width,o=e}for(var u=0,s=0;s<n.length;s++){var l=n[s][0],h=n[s][1],c=s+1===n.length?n[0][0]:n[s+1][0],f=s+1===n.length?n[0][1]:n[s+1][1];i.linesIntersect(t,e,a,o,l,h,c,f)&&u++}return u%2===1},i.segmentIntersectsPolygon=function(t,e,n,a,o){for(var r=0;r<o.length;r++){var u=o[r][0],s=o[r][1],l=r+1===o.length?o[0][0]:o[r+1][0],h=r+1===o.length?o[0][1]:o[r+1][1];if(i.linesIntersect(t,e,n,a,u,s,l,h))return!0}return!1},i.distance=function(t,e,n,a){return Math.sqrt((t-n)*(t-n)+(e-a)*(e-a))},i.distanceSquared=function(t,e,n,a){return(t-n)*(t-n)+(e-a)*(e-a)},i.distanceFromPointToSegment=function(t,e,n,a,o,r){var u=i.distanceSquared(n,a,o,r);if(0===u)return i.distance(t,e,n,a);var s=((t-n)*(o-n)+(e-a)*(r-a))/u;return 0>s?i.distance(t,e,n,a):s>1?i.distance(t,e,o,r):i.distance(t,e,n+s*(o-n),a+s*(r-a))},i.distanceFromPointToPolygon=function(t,e,n){for(var a=i.distanceFromPointToSegment(t,e,n[n.length-1][0],n[n.length-1][1],n[0][0],n[0][1]),o=1;o<n.length;o++){var r=i.distanceFromPointToSegment(t,e,n[o-1][0],n[o-1][1],n[o][0],n[o][1]);a>r&&(a=r)}return a},e["default"]=i,t.exports=e["default"]},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.TileMapOrtho=e.TileSheet=e.SpriteSheet=e.Sprite=e.Shapes=e.Rectangle=void 0;var o=n(26),r=a(o),i=n(27),u=a(i),s=n(28),l=a(s),h=n(29),c=a(h),f=n(30),M=a(f),d=n(31),v=a(d);e.Rectangle=r["default"],e.Shapes=u["default"],e.Sprite=l["default"],e.SpriteSheet=c["default"],e.TileSheet=M["default"],e.TileMapOrtho=v["default"]},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),s=n(12),l=a(s),h=function(t){function e(){return o(this,e),r(this,Object.getPrototypeOf(e).apply(this,arguments))}return i(e,t),u(e,[{key:"draw",value:function(t){var e=t.graphContext;e.fillStyle="green",e.fillRect(this._x,this._y,10,10)}}]),e}(l["default"]);e["default"]=h,t.exports=e["default"]},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};n.drawMarker=function(t,e,n,a,o,r){a=a||10,o=o||5,r=r||"blue",t.save(),t.strokeStyle=r,t.lineWidth=5,t.beginPath(),t.moveTo(e-a,n+a),t.lineTo(e+a,n-a),t.moveTo(e-a,n-a),t.lineTo(e+a,n+a),t.stroke(),t.restore()},n.drawArrow1=function(t,e,n,a,o,r,i,u){a=a||50,o=o||15,r=r||10,i=i||5,u=u||0,t.save(),t.fillStyle="green",t.beginPath(),u&&(t.translate(e,n),t.rotate(u),t.translate(-e,-n)),t.moveTo(e+o,n),t.lineTo(e+o-i,n-r),t.lineTo(e+o+a,n),t.lineTo(e+o-i,n+r),t.closePath(),t.fill(),t.restore()},n.drawPolygon=function(t,e){t.save(),t.strokeStyle="lightblue",t.fillStyle="rgba(173, 216, 230, 1)",t.lineWidth=5,t.beginPath(),t.moveTo(e[0][0],e[0][1]);for(var n=1;n<e.length;n++)t.lineTo(e[n][0],e[n][1]);t.closePath(),t.fill(),t.stroke(),t.restore()},n.fillPolygon=function(t,e){t.save(),t.strokeStyle="grey",t.lineWidth=1;for(var n=Number.MAX_VALUE,a=Number.MAX_VALUE,o=Number.MIN_VALUE,r=Number.MIN_VALUE,i=Math.PI/4,u=0;u<e.length;u++)e[u][0]<n&&(n=e[u][0]),e[u][1]<a&&(a=e[u][1]),e[u][0]>o&&(o=e[u][0]),e[u][1]>r&&(r=e[u][1]);t.beginPath(),t.moveTo(e[0][0],e[0][1]);for(var s=1;s<e.length;s++)t.lineTo(e[s][0],e[s][1]);t.closePath(),t.clip();var l=(r-a)/Math.tan(i);t.beginPath();for(var h=n-l;o>h;h+=15)t.moveTo(h,r),t.lineTo(h+l,a);t.stroke(),t.restore()},e["default"]=n,t.exports=e["default"]},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),s=n(12),l=a(s),h=n(3),c=a(h),f=function(t){function e(t){o(this,e);var n=r(this,Object.getPrototypeOf(e).call(this));return n._img=t,n._width=t.width,n._height=t.height,n._isPressed=!1,n._clicked=!1,n}return i(e,t),u(e,[{key:"setSize",value:function(t,e){if(void 0===e){var n=t;t=this._img.width*n,e=this._img.height*n}this._width=t,this._height=e}},{key:"update",value:function(t){}},{key:"draw",value:function(t){var e=t.graphContext;e.save(),e.drawImage(this._img,0,0,this._img.width,this._img.height,this._x,this._y,this._width,this._height),e.restore()}},{key:"getBounds",value:function(){return new c["default"](this._x,this._y,this._width,this._height)}}]),e}(l["default"]);e["default"]=f,t.exports=e["default"]},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),o=function(){function t(e,a){n(this,t),this._image=e,this._frames=a}return a(t,[{key:"drawFrame",value:function(e,n,a,o){var r=this._frames[n];r&&e.drawImage(this._image,r[t.FRAME_X],r[t.FRAME_Y],r[t.FRAME_WIDTH],r[t.FRAME_HEIGHT],a-r[t.FRAME_ANCHOR_X],o-r[t.FRAME_ANCHOR_Y],r[t.FRAME_WIDTH],r[t.FRAME_HEIGHT])}}]),t}();e["default"]=o,o.FRAME_X=0,o.FRAME_Y=1,o.FRAME_WIDTH=2,o.FRAME_HEIGHT=3,o.FRAME_ANCHOR_X=4,o.FRAME_ANCHOR_Y=5,t.exports=e["default"]},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),o=function(){function t(e,a,o){n(this,t),this._image=e,this._w=a,this._h=o,this._row=Math.floor(e.width/a)}return a(t,[{key:"drawTile",value:function(t,e,n,a){if(!(0>e)){var o=e%this._row*this._w,r=Math.floor(e/this._row)*this._h;t.drawImage(this._image,o,r,this._w,this._h,n,a,this._w,this._h)}}}]),t}();e["default"]=o,t.exports=e["default"]},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),s=n(12),l=a(s),h=function(t){function e(t,n,a,i,u){o(this,e);var s=r(this,Object.getPrototypeOf(e).call(this));return s._mapData=t,s._image=n,s._tileSize=a,s._viewportWidth=i,s._viewportHeight=u,s._x=0,s._y=0,s._offCanvas=document.createElement("canvas"),s._offContext=s._offCanvas.getContext("2d"),s._offBounds={x:0,y:0,w:0,h:0},s._offDirty=!0,s._resetOffScreenCanvas(),s._tilesPerRow=n.width/a,s}return i(e,t),u(e,[{key:"draw",value:function(t){var e=t.graphContext;this._offDirty&&this._redrawOffscreen();var n=-Math.floor(this._x)-this._offBounds.x*this._tileSize,a=-Math.floor(this._y)-this._offBounds.y*this._tileSize,o=Math.min(this._offCanvas.width-n,this._viewportWidth),r=Math.min(this._offCanvas.height-a,this._viewportHeight);e.drawImage(this._offCanvas,n,a,o,r,0,0,o,r)}},{key:"move",value:function(t,e){this._x+=t,this._y+=e,this._updateOffscreenBounds()}},{key:"setViewportSize",value:function(t,e){this._viewportWidth=t,this._viewportHeight=e,this._resetOffScreenCanvas()}},{key:"_resetOffScreenCanvas",value:function(){this._updateOffscreenBounds(),this._offCanvas.width=this._offBounds.w*this._tileSize,this._offCanvas.height=this._offBounds.h*this._tileSize,this._offDirty=!0}},{key:"_redrawOffscreen",value:function(){var t=this._offContext;t.clearRect(0,0,this._offCanvas.width,this._offCanvas.height);for(var e=Math.max(this._offBounds.x,0),n=Math.min(e+this._offBounds.w-1,this._mapData[0].length-1),a=Math.max(this._offBounds.y,0),o=Math.min(a+this._offBounds.h-1,this._mapData.length-1),r=a;o>=r;r++)for(var i=e;n>=i;i++){var u=this._mapData[r][i];this._drawTileAt(t,u,i,r)}this._offDirty=!1}},{key:"_drawTileAt",value:function(t,e,n,a){var o=e%this._tilesPerRow*this._tileSize,r=Math.floor(e/this._tilesPerRow)*this._tileSize,i=this._tileSize,u=(n-this._offBounds.x)*i,s=(a-this._offBounds.y)*i;t.drawImage(this._image,o,r,i,i,u,s,i,i)}},{key:"_updateOffscreenBounds",value:function(){var t=this._offBounds,e={x:Math.floor(-this._x/this._tileSize),y:Math.floor(-this._y/this._tileSize),w:Math.ceil(this._viewportWidth/this._tileSize)+1,h:Math.ceil(this._viewportHeight/this._tileSize)+1};t.x===e.x&&t.y===e.y&&t.w===e.w&&t.h===e.h||(this._offBounds=e,this._offDirty=!0)}}]),e}(l["default"]);e["default"]=h,t.exports=e["default"]}])});
//# sourceMappingURL=draco.min.js.map